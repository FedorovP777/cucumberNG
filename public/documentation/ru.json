[{"directive":"zone","defaultValue":"—","syntax":"zone имя [размер];","context":"upstream","description":"<p>\nЗадаёт <code><i>имя</i></code> и <code><i>размер</i></code> зоны разделяемой памяти,\nв которой хранятся конфигурация группы и её рабочее состояние,\nразделяемые между рабочими процессами.\nВ одной и той же зоне могут быть сразу несколько групп.\nВ этом случае достаточно указать <code><i>размер</i></code> только один раз.\n</p><p>\nДополнительно, как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>,\nв таких группах для изменения состава группы\nили настроек отдельных серверов\nнет необходимости перезапускать nginx.\nКонфигурация доступна через специальный location,\nв котором указана директива\n<a href=\"../http/ngx_http_upstream_conf_module.html#upstream_conf\">upstream_conf</a>.\n</p>"},{"directive":"zone","defaultValue":"—","syntax":"zone имя [размер];","context":"upstream","description":"<p>Эта директива появилась в версии 1.9.0.\n            </p></div><p>\nЗадаёт <code><i>имя</i></code> и <code><i>размер</i></code> зоны разделяемой памяти,\nв которой хранятся конфигурация группы и её рабочее состояние,\nразделяемые между рабочими процессами.\nВ одной и той же зоне могут быть сразу несколько групп.\nВ этом случае достаточно указать <code><i>размер</i></code> только один раз.\n</p><p>\nДополнительно, как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>,\nв таких группах для изменения состава группы\nили настроек отдельных серверов\nнет необходимости перезапускать nginx.\nКонфигурация доступна через специальный location,\nв котором указана директива\n<a href=\"ngx_http_upstream_conf_module.html#upstream_conf\">upstream_conf</a>.\n</p>"},{"directive":"xslt_types","defaultValue":"xslt_types text/xml;","syntax":"xslt_types mime-тип ...;","context":"http, server, location","description":"<p>\nРазрешает преобразования в ответах с указанными MIME-типами\nв дополнение к “<code>text/xml</code>”.\nСпециальное значение “<code>*</code>” соответствует любому MIME-типу\n(0.8.29).\nЕсли в результате преобразования выдаётся HTML-ответ, то его MIME-тип\nменяется на “<code>text/html</code>”.\n</p>"},{"directive":"xslt_stylesheet","defaultValue":"—","syntax":"xslt_stylesheet     шаблон    [параметр=значение ...];","context":"location","description":"<p>\nЗадаёт XSLT-шаблон и необязательные параметры для этого шаблона.\nШаблон компилируется на стадии конфигурации.\n</p><p>\nПараметры можно задавать как по отдельности, так и группировать\nв одной строке, разделяя символом “<code>:</code>”.\nЕсли же в самих параметрах встречается символ “<code>:</code>”,\nто его нужно экранировать в виде “<code>%3A</code>”.\nКроме того, <code>libxslt</code> требует,\nчтобы параметры, содержащие не только алфавитно-цифровые символы,\nбыли заключены в одинарные или двойные кавычки, например:\n</p> <blockquote class=\"example\"><pre>\nparam1='http%3A//www.example.com':param2=value2\n</pre></blockquote><p> \n</p><p>\nВ описании параметров можно использовать переменные, например,\nцелая строка параметров может быть взята из одной переменной:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    xslt_stylesheet /site/xslt/one.xslt\n                    $arg_xslt_params\n                    param1='$value1':param2=value2\n                    param3=value3;\n}\n</pre></blockquote><p> \n</p><p>\nМожно указать несколько шаблонов — в этом случае они\nбудут применяться последовательно в порядке их описания.\n</p>"},{"directive":"xslt_string_param","defaultValue":"—","syntax":"xslt_string_param параметр значение;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.18.\n            </p></div><p>\nЗадаёт строковые параметры для XSLT-шаблонов.\nВыражения XPath в значении параметра не интерпретируются.\nВ значении можно использовать переменные.\n</p><p>\nДиректив <code>xslt_string_param</code> может быть несколько.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <a href=\"#xslt_param\">xslt_param</a> и\n<code>xslt_string_param</code>.\n</p>"},{"directive":"xslt_param","defaultValue":"—","syntax":"xslt_param параметр значение;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.18.\n            </p></div><p>\nЗадаёт параметры для XSLT-шаблонов.\nЗначение рассматривается как выражение XPath.\nВ значении можно использовать переменные.\nЕсли нужно передать в шаблон строковое значение,\nможно воспользоваться директивой <a href=\"#xslt_string_param\">xslt_string_param</a>.\n</p><p>\nДиректив <code>xslt_param</code> может быть несколько.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <code>xslt_param</code> и\n<a href=\"#xslt_string_param\">xslt_string_param</a>.\n</p>"},{"directive":"xslt_last_modified","defaultValue":"xslt_last_modified off;","syntax":"xslt_last_modified on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.1.\n            </p></div><p>\nПозволяет сохранить поле заголовка “Last-Modified”\nисходного ответа во время XSLT-преобразований\nдля лучшего кэширования ответов.\n</p><p>\nПо умолчанию поле заголовка удаляется, так как содержимое ответа\nизменяется во время преобразования и может содержать динамически созданные\nэлементы или части, которые изменились независимо от исходного ответа.\n</p>"},{"directive":"xml_entities","defaultValue":"—","syntax":"xml_entities путь;","context":"http, server, location","description":"<p>\nЗадаёт файл DTD, в котором описаны символьные сущности.\nЭтот файл компилируется на стадии конфигурации.\nПо техническим причинам модуль не имеет возможности\nиспользовать внешнее подмножество, заданное в обрабатываемом XML,\nпоэтому оно игнорируется, а вместо него используется специально заданный файл.\nВ этом файле не нужно описывать структуру XML, достаточно только объявления\nнеобходимых символьных сущностей, например:\n</p> <blockquote class=\"example\"><pre>\n&lt;!ENTITY nbsp \"&amp;#xa0;\"&gt;\n</pre></blockquote><p> \n</p>"},{"directive":"xclient","defaultValue":"xclient on;","syntax":"xclient on | off;","context":"mail, server","description":"<p>\nРазрешает или запрещает передачу команды\n<a href=\"http://www.postfix.org/XCLIENT_README.html\">XCLIENT</a>\nс параметрами клиента при подключении к SMTP-бэкенду.\n</p><p>\nПри помощи <code>XCLIENT</code> MTA может писать в лог\nинформацию о клиенте и применять различные ограничения на основе этих данных.\n</p><p>\nЕсли команда <code>XCLIENT</code> разрешена,\nто при подключении к бэкенду nginx посылает ему следующие команды:\n</p> <ul class=\"compact\">\n<li>\n<code>EHLO</code>\nс <a href=\"ngx_mail_core_module.html#server_name\">именем сервера</a>\n</li>\n\n<li>\n<code>\nXCLIENT\n</code>\n</li>\n\n<li>\n<code>EHLO</code> или <code>HELO</code>,\nкак её передал клиент\n</li>\n</ul><p> \n</p><p>\nЕсли <a href=\"ngx_mail_core_module.html#resolver\">найденное</a>\nпо IP-адресу клиента имя указывает на тот же адрес,\nоно передаётся в параметре <code>NAME</code>\nкоманды <code>XCLIENT</code>.\nЕсли имя не может быть найдено, указывает на другой адрес,\nили не задан <a href=\"ngx_mail_core_module.html#resolver\">resolver</a>,\nто в параметре <code>NAME</code> передаётся\n<code>[UNAVAILABLE]</code>.\nЕсли же в процессе поиска имени или адреса произошла ошибка,\nпередаётся <code>[TEMPUNAVAIL]</code>.\n</p><p>\nЕсли команда <code>XCLIENT</code> запрещена,\nто при подключении к бэкенду nginx передаёт команду <code>EHLO</code> с\n<a href=\"ngx_mail_core_module.html#server_name\">именем сервера</a>,\nесли клиент передал <code>EHLO</code>,\nиначе <code>HELO</code> с именем сервера.\n</p>"},{"directive":"working_directory","defaultValue":"—","syntax":"working_directory каталог;","context":"main","description":"<p>\nЗадаёт каталог, который будет текущим для рабочего процесса.\nОсновное применение — запись core-файла, в этом случае рабочий\nпроцесс должен иметь права на запись в этот каталог.\n</p>"},{"directive":"worker_shutdown_timeout","defaultValue":"—","syntax":"worker_shutdown_timeout время;","context":"main","description":"<p>Эта директива появилась в версии 1.11.11.\n            </p></div><p>\nЗадаёт таймаут в секундах для плавного завершения рабочих процессов.\nПо истечении указанного <code><i>времени</i></code>\nnginx попытается закрыть все открытые соединения\nдля ускорения завершения.\n</p>"},{"directive":"worker_rlimit_nofile","defaultValue":"—","syntax":"worker_rlimit_nofile число;","context":"main","description":"<p>\nИзменяет ограничение на максимальное число открытых файлов\n(<code>RLIMIT_NOFILE</code>) для рабочих процессов.\nИспользуется для увеличения ограничения без перезапуска главного процесса.\n</p>"},{"directive":"worker_rlimit_core","defaultValue":"—","syntax":"worker_rlimit_core размер;","context":"main","description":"<p>\nИзменяет ограничение на наибольший размер core-файла\n(<code>RLIMIT_CORE</code>) для рабочих процессов.\nИспользуется для увеличения ограничения без перезапуска главного процесса.\n</p>"},{"directive":"worker_processes","defaultValue":"worker_processes 1;","syntax":"worker_processes число | auto;","context":"main","description":"<p>\nЗадаёт число рабочих процессов.\n</p><p>\nОптимальное значение зависит от множества факторов, включая\n(но не ограничиваясь ими) число процессорных ядер, число\nжёстких дисков с данными и картину нагрузок.\nЕсли затрудняетесь в выборе правильного значения, можно начать\nс установки его равным числу процессорных ядер\n(значение “<code>auto</code>” пытается определить его\nавтоматически).\n</p> <blockquote class=\"note\">\nПараметр <code>auto</code> поддерживается только начиная\nс версий 1.3.8 и 1.2.5.\n</blockquote><p> \n</p>"},{"directive":"worker_priority","defaultValue":"worker_priority 0;","syntax":"worker_priority число;","context":"main","description":"<p>\nЗадаёт приоритет планирования рабочих процессов подобно тому,\nкак это делается командой <code>nice</code>: отрицательное\n<code><i>число</i></code>\nозначает более высокий приоритет.\nДиапазон возможных значений, как правило, варьируется от -20 до 20.\n</p><p>\nПример использования:\n</p> <blockquote class=\"example\"><pre>\nworker_priority -10;\n</pre></blockquote><p> \n</p>"},{"directive":"worker_cpu_affinity","defaultValue":"—","syntax":"worker_cpu_affinity маска_CPU ...;worker_cpu_affinity auto [маска_CPU];","context":"main","description":"<p>\nПривязывает рабочие процессы к группам процессоров.\nКаждая группа процессоров задаётся битовой маской\nразрешённых к использованию процессоров.\nДля каждого рабочего процесса должна быть задана отдельная группа.\nПо умолчанию рабочие процессы не привязаны к конкретным процессорам.\n</p><p>\nНапример,\n</p> <blockquote class=\"example\"><pre>\nworker_processes    4;\nworker_cpu_affinity 0001 0010 0100 1000;\n</pre></blockquote><p> \nпривязывает каждый рабочий процесс к отдельному процессору, тогда как\n</p> <blockquote class=\"example\"><pre>\nworker_processes    2;\nworker_cpu_affinity 0101 1010;\n</pre></blockquote><p> \nпривязывает первый рабочий процесс к CPU0/CPU2,\nа второй — к CPU1/CPU3.\nВторой пример пригоден для hyper-threading.\n</p><p>\nСпециальное значение <code>auto</code> (1.9.10) позволяет\nавтоматически привязать рабочие процессы к доступным процессорам:\n</p> <blockquote class=\"example\"><pre>\nworker_processes auto;\nworker_cpu_affinity auto;\n</pre></blockquote><p> \nС помощью необязательной маски можно ограничить процессоры,\nдоступные для автоматической привязки:\n</p> <blockquote class=\"example\"><pre>\nworker_cpu_affinity auto 01010101;\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nДиректива доступна только на FreeBSD и Linux.\n</blockquote><p> \n</p>"},{"directive":"worker_connections","defaultValue":"worker_connections 512;","syntax":"worker_connections число;","context":"events","description":"<p>\nЗадаёт максимальное число соединений, которые одновременно\nможет открыть рабочий процесс.\n</p><p>\nСледует иметь в виду, что в это число входят все соединения\n(в том числе, например, соединения с проксируемыми серверами),\nа не только соединения с клиентами.\nСтоит также учитывать, что фактическое число одновременных\nсоединений не может превышать действующего ограничения на\nмаксимальное число открытых файлов,\nкоторое можно изменить с помощью <a href=\"#worker_rlimit_nofile\">worker_rlimit_nofile</a>.\n</p>"},{"directive":"worker_aio_requests","defaultValue":"worker_aio_requests 32;","syntax":"worker_aio_requests число;","context":"events","description":"<p>\n                    Эта директива появилась в версиях 1.1.4 и 1.0.7.\n                    \n                        </p>\n                    </div><p>\nПри использовании <a href=\"http/ngx_http_core_module.html#aio\">aio</a>\nсовместно с методом обработки соединений\n<a href=\"../docs/events.html#epoll\">epoll</a>,\nзадаёт максимальное <code><i>число</i></code> ожидающих обработки операций\nасинхронного ввода-вывода для одного рабочего процесса.\n</p>"},{"directive":"variables_hash_max_size","defaultValue":"variables_hash_max_size 1024;","syntax":"variables_hash_max_size размер;","context":"stream","description":"<p>Эта директива появилась в версии 1.11.2.\n            </p></div><p>\nЗадаёт максимальный <code><i>размер</i></code> хэш-таблицы переменных.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"variables_hash_max_size","defaultValue":"variables_hash_max_size 1024;","syntax":"variables_hash_max_size размер;","context":"http","description":"<p>\nЗадаёт максимальный <code><i>размер</i></code> хэш-таблицы переменных.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p> <blockquote class=\"note\">\nДо версии 1.5.13 по умолчанию использовалось значение 512.\n</blockquote><p> \n</p>"},{"directive":"variables_hash_bucket_size","defaultValue":"variables_hash_bucket_size 64;","syntax":"variables_hash_bucket_size размер;","context":"stream","description":"<p>Эта директива появилась в версии 1.11.2.\n            </p></div><p>\nЗадаёт размер корзины в хэш-таблице переменных.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"variables_hash_bucket_size","defaultValue":"variables_hash_bucket_size 64;","syntax":"variables_hash_bucket_size размер;","context":"http","description":"<p>\nЗадаёт размер корзины в хэш-таблице переменных.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"valid_referers","defaultValue":"—","syntax":"valid_referers     none |    blocked |    server_names |    строка    ...;","context":"server, location","description":"<p>\nЗадаёт значения поля “Referer” заголовка запроса, при\nкоторых встроенная переменная <code>$invalid_referer</code> будет иметь\nпустую строку в качестве значения.\nВ противном случае значение переменной равно “<code>1</code>”.\nПоиск совпадения производится без учёта регистра символов.\n</p><p>\nПараметры могут быть следующие:\n</p> <dl class=\"compact\">\n\n<dt><code>none</code></dt>\n<dd>\nполе “Referer” в заголовке запроса отсутствует;\n</dd>\n\n<dt><code>blocked</code></dt>\n<dd>\nполе “Referer” в заголовке запроса присутствует,\nно его значение удалено межсетевым экраном (firewall) или прокси-сервером;\nк таким значениям относятся строки, не начинающиеся на\n“<code>http://</code>” или “<code>https://</code>”;\n</dd>\n\n<dt><code>server_names</code></dt>\n<dd>\nв поле “Referer” заголовка запроса указано одно\nиз имён сервера;\n</dd>\n\n<dt>произвольная строка</dt>\n<dd>\nзадаёт имя сервера и необязательное начало URI.\nВ начале или конце имени сервера может быть “<code>*</code>”.\nПри проверке порт сервера в поле “Referer” игнорируется;\n</dd>\n\n<dt>регулярное выражение</dt>\n<dd>\nв начале должен быть символ “<code>~</code>”.\nНеобходимо учитывать, что на совпадение с выражением будет проверяться\nтекст, начинающийся после “<code>http://</code>”\nили “<code>https://</code>”.\n</dd>\n\n</dl><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nvalid_referers none blocked server_names\n               *.example.com example.* www.example.org/galleries/\n               ~\\.google\\.;\n</pre></blockquote><p> \n</p>"},{"directive":"uwsgi_temp_path","defaultValue":"uwsgi_temp_path uwsgi_temp;","syntax":"uwsgi_temp_path     путь    [уровень1    [уровень2    [уровень3]]];","context":"http, server, location","description":"<p>\nЗадаёт имя каталога для хранения временных файлов с данными,\nполученными от uwsgi-серверов.\nВ каталоге может использоваться иерархия подкаталогов до трёх уровней.\nНапример, при такой конфигурации\n</p> <blockquote class=\"example\"><pre>\nuwsgi_temp_path /spool/nginx/uwsgi_temp 1 2;\n</pre></blockquote><p> \nвременный файл будет следующего вида:\n</p> <blockquote class=\"example\"><pre>\n/spool/nginx/uwsgi_temp/<strong>7</strong>/<strong>45</strong>/00000123<strong>457</strong>\n</pre></blockquote><p> \n</p><p>\nСм. также параметр <code>use_temp_path</code> директивы\n<a href=\"#uwsgi_cache_path\">uwsgi_cache_path</a>.\n</p>"},{"directive":"uwsgi_temp_file_write_size","defaultValue":"uwsgi_temp_file_write_size 8k|16k;","syntax":"uwsgi_temp_file_write_size размер;","context":"http, server, location","description":"<p>\nОграничивает <code><i>размер</i></code> данных, сбрасываемых во временный файл\nза один раз, при включённой буферизации ответов uwsgi-сервера\nво временные файлы.\nПо умолчанию <code><i>размер</i></code> ограничен двумя буферами, заданными\nдирективами <a href=\"#uwsgi_buffer_size\">uwsgi_buffer_size</a> и <a href=\"#uwsgi_buffers\">uwsgi_buffers</a>.\nМаксимальный размер временного файла задаётся директивой\n<a href=\"#uwsgi_max_temp_file_size\">uwsgi_max_temp_file_size</a>.\n</p>"},{"directive":"uwsgi_store_access","defaultValue":"uwsgi_store_access user:rw;","syntax":"uwsgi_store_access пользователи:права ...;","context":"http, server, location","description":"<p>\nЗадаёт права доступа для создаваемых файлов и каталогов, например,\n</p> <blockquote class=\"example\"><pre>\nuwsgi_store_access user:rw group:rw all:r;\n</pre></blockquote><p> \n</p><p>\nЕсли заданы какие-либо права для <code>group</code> или\n<code>all</code>, то права для <code>user</code>\nуказывать необязательно:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_store_access group:rw all:r;\n</pre></blockquote><p> \n</p>"},{"directive":"uwsgi_store","defaultValue":"uwsgi_store off;","syntax":"uwsgi_store     on |    off |    строка;","context":"http, server, location","description":"<p>\nРазрешает сохранение на диск файлов.\nПараметр <code>on</code> сохраняет файлы в соответствии с путями,\nуказанными в директивах\n<a href=\"ngx_http_core_module.html#alias\">alias</a> или\n<a href=\"ngx_http_core_module.html#root\">root</a>.\nПараметр <code>off</code> запрещает сохранение файлов.\nКроме того, имя файла можно задать явно с помощью строки с переменными:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_store /data/www$original_uri;\n</pre></blockquote><p> \n</p><p>\nВремя изменения файлов выставляется согласно полученному полю\n“Last-Modified” в заголовке ответа.\nОтвет сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временный файл и постоянное место хранения ответа\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если сохраняемые файлы будут находиться на той же файловой\nсистеме, что и каталог с временными файлами, задаваемый директивой\n<a href=\"#uwsgi_temp_path\">uwsgi_temp_path</a> для данного location.\n</p><p>\nДирективу можно использовать для создания локальных копий статических\nнеизменяемых файлов, например, так:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    root               /data/www;\n    error_page         404 = /fetch$uri;\n}\n\nlocation /fetch/ {\n    internal;\n\n    uwsgi_pass         backend:9000;\n    ...\n\n    uwsgi_store        on;\n    uwsgi_store_access user:rw group:rw all:r;\n    uwsgi_temp_path    /data/temp;\n\n    alias              /data/www/;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"uwsgi_ssl_verify_depth","defaultValue":"uwsgi_ssl_verify_depth 1;","syntax":"uwsgi_ssl_verify_depth число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nУстанавливает глубину проверки в цепочке сертификатов suwsgi-сервера.\n</p>"},{"directive":"uwsgi_ssl_verify","defaultValue":"uwsgi_ssl_verify off;","syntax":"uwsgi_ssl_verify on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nРазрешает или запрещает проверку сертификата suwsgi-сервера.\n</p>"},{"directive":"uwsgi_ssl_trusted_certificate","defaultValue":"—","syntax":"uwsgi_ssl_trusted_certificate файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с доверенными сертификатами CA в формате PEM,\nиспользуемыми при <a href=\"#uwsgi_ssl_verify\">проверке</a>\nсертификата suwsgi-сервера.\n</p>"},{"directive":"uwsgi_ssl_session_reuse","defaultValue":"uwsgi_ssl_session_reuse on;","syntax":"uwsgi_ssl_session_reuse on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.8.\n            </p></div><p>\nОпределяет, использовать ли повторно SSL-сессии при\nработе с suwsgi-сервером.\nЕсли в логах появляются ошибки\n“<code>SSL3_GET_FINISHED:digest check failed</code>”,\nто можно попробовать выключить\nповторное использование сессий.\n</p>"},{"directive":"uwsgi_ssl_server_name","defaultValue":"uwsgi_ssl_server_name off;","syntax":"uwsgi_ssl_server_name on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nРазрешает или запрещает передачу имени сервера через\n<a href=\"http://en.wikipedia.org/wiki/Server_Name_Indication\">расширение\nServer Name Indication протокола TLS</a> (SNI, RFC 6066)\nпри установлении соединения с suwsgi-сервером.\n</p>"},{"directive":"uwsgi_ssl_protocols","defaultValue":"uwsgi_ssl_protocols TLSv1 TLSv1.1 TLSv1.2;","syntax":"uwsgi_ssl_protocols     [SSLv2]    [SSLv3]    [TLSv1]    [TLSv1.1]    [TLSv1.2]    [TLSv1.3];","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.8.\n            </p></div><p>\nРазрешает указанные протоколы для запросов к suwsgi-серверу.\n</p>"},{"directive":"uwsgi_ssl_password_file","defaultValue":"—","syntax":"uwsgi_ssl_password_file файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с паролями от\n<a href=\"#uwsgi_ssl_certificate_key\">секретных ключей</a>,\nгде каждый пароль указан на отдельной строке.\nПароли применяются по очереди в момент загрузки ключа.\n</p>"},{"directive":"uwsgi_ssl_name","defaultValue":"uwsgi_ssl_name имя хоста из uwsgi_pass;","syntax":"uwsgi_ssl_name имя;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nПозволяет переопределить имя сервера, используемое при\n<a href=\"#uwsgi_ssl_verify\">проверке</a>\nсертификата suwsgi-сервера, а также для\n<a href=\"#uwsgi_ssl_server_name\">передачи его через SNI</a>\nпри установлении соединения с suwsgi-сервером.\n</p><p>\nПо умолчанию используется имя хоста из <a href=\"#uwsgi_pass\">uwsgi_pass</a>.\n</p>"},{"directive":"uwsgi_ssl_crl","defaultValue":"—","syntax":"uwsgi_ssl_crl файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с отозванными сертификатами (CRL)\nв формате PEM, используемыми при <a href=\"#uwsgi_ssl_verify\">проверке</a>\nсертификата suwsgi-сервера.\n</p>"},{"directive":"uwsgi_ssl_ciphers","defaultValue":"uwsgi_ssl_ciphers DEFAULT;","syntax":"uwsgi_ssl_ciphers ciphers;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.8.\n            </p></div><p>\nОписывает разрешённые шифры для запросов к suwsgi-серверу.\nШифры задаются в формате, поддерживаемом библиотекой OpenSSL.\n</p><p>\nПолный список можно посмотреть с помощью команды\n“<code>openssl ciphers</code>”.\n</p>"},{"directive":"uwsgi_ssl_certificate_key","defaultValue":"—","syntax":"uwsgi_ssl_certificate_key файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с секретным ключом в формате PEM\nдля аутентификации на suwsgi-сервере.\n</p><p>\nВместо <code><i>файла</i></code> можно указать значение\n<code>engine</code>:<code><i>имя</i></code>:<code><i>id</i></code> (1.7.9),\nкоторое загружает ключ с указанным <code><i>id</i></code>\nиз OpenSSL engine с заданным <code><i>именем</i></code>.\n</p>"},{"directive":"uwsgi_ssl_certificate","defaultValue":"—","syntax":"uwsgi_ssl_certificate файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с сертификатом в формате PEM\nдля аутентификации на suwsgi-сервере.\n</p>"},{"directive":"uwsgi_send_timeout","defaultValue":"uwsgi_send_timeout 60s;","syntax":"uwsgi_send_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при передаче запроса uwsgi-серверу.\nТаймаут устанавливается не на всю передачу запроса,\nа только между двумя операциями записи.\nЕсли по истечении этого времени uwsgi-сервер не примет новых данных,\nсоединение закрывается.\n</p>"},{"directive":"uwsgi_request_buffering","defaultValue":"uwsgi_request_buffering on;","syntax":"uwsgi_request_buffering on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nРазрешает или запрещает использовать буферизацию тела запроса клиента.\n</p>"},{"directive":"uwsgi_read_timeout","defaultValue":"uwsgi_read_timeout 60s;","syntax":"uwsgi_read_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при чтении ответа uwsgi-сервера.\nТаймаут устанавливается не на всю передачу ответа,\nа только между двумя операциями чтения.\nЕсли по истечении этого времени uwsgi-сервер ничего не передаст,\nсоединение закрывается.\n</p>"},{"directive":"uwsgi_pass_request_headers","defaultValue":"uwsgi_pass_request_headers on;","syntax":"uwsgi_pass_request_headers on | off;","context":"http, server, location","description":null},{"directive":"uwsgi_pass_request_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"uwsgi_pass_header","defaultValue":"—","syntax":"uwsgi_pass_header поле;","context":"http, server, location","description":"<p>\nРазрешает передавать от uwsgi-сервера клиенту\n<a href=\"#uwsgi_hide_header\">запрещённые для передачи</a> поля заголовка.\n</p>"},{"directive":"uwsgi_pass","defaultValue":"—","syntax":"uwsgi_pass [протокол://]адрес;","context":"location, if в location","description":"<p>\nЗадаёт протокол и адрес uwsgi-сервера.\nВ качестве протокола можно указать\n“<code>uwsgi</code>” или “<code>suwsgi</code>”\n(secured uwsgi, uwsgi через SSL).\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи порта:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_pass localhost:9000;\nuwsgi_pass uwsgi://localhost:9000;\nuwsgi_pass suwsgi://[2001:db8::1]:9090;\n</pre></blockquote><p> \nили в виде пути UNIX-сокета:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_pass unix:/tmp/uwsgi.socket;\n</pre></blockquote><p> \n</p><p>\nЕсли доменному имени соответствует несколько адресов, то все они будут\nиспользоваться по очереди (round-robin).\nИ, кроме того, адрес может быть\n<a href=\"ngx_http_upstream_module.html\">группой серверов</a>.\n</p><p>\nВ значении параметра можно использовать переменные.\nВ этом случае, если адрес указан в виде доменного имени,\nимя ищется среди описанных\n<a href=\"ngx_http_upstream_module.html\">групп серверов</a>\nи если не найдено, то определяется с помощью\n<a href=\"ngx_http_core_module.html#resolver\">resolver</a>’а.\n</p><p>\n</p> <blockquote class=\"note\">\nПротокол secured uwsgi поддерживается начиная с версии 1.5.8.\n</blockquote><p> \n</p>"},{"directive":"uwsgi_param","defaultValue":"—","syntax":"uwsgi_param     параметр значение    [if_not_empty];","context":"http, server, location","description":"<p>\nЗадаёт <code><i>параметр</i></code>, который будет передаваться uwsgi-серверу.\nВ качестве значения можно использовать текст, переменные и их комбинации.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <code>uwsgi_param</code>.\n</p><p>\nСтандартные\n<a href=\"https://tools.ietf.org/html/rfc3875#section-4.1\">переменные\nокружения CGI</a>\nдолжны передаваться как заголовки uwsgi, см. файл <code>uwsgi_params</code>\nиз дистрибутива:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    include uwsgi_params;\n    ...\n}\n</pre></blockquote><p> \n</p><p>\nЕсли директива указана с <code>if_not_empty</code> (1.1.11),\nто такой параметр с пустым значением передаваться на сервер не будет:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_param HTTPS $https if_not_empty;\n</pre></blockquote><p> \n</p>"},{"directive":"uwsgi_no_cache","defaultValue":"—","syntax":"uwsgi_no_cache строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет сохраняться в кэш.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не будет сохранён:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_no_cache $cookie_nocache $arg_nocache$arg_comment;\nuwsgi_no_cache $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#uwsgi_cache_bypass\">uwsgi_cache_bypass</a>.\n</p>"},{"directive":"uwsgi_next_upstream_tries","defaultValue":"uwsgi_next_upstream_tries 0;","syntax":"uwsgi_next_upstream_tries число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает число допустимых попыток для передачи запроса\n<a href=\"#uwsgi_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"uwsgi_next_upstream_timeout","defaultValue":"uwsgi_next_upstream_timeout 0;","syntax":"uwsgi_next_upstream_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает время, в течение которого возможна передача запроса\n<a href=\"#uwsgi_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"uwsgi_next_upstream","defaultValue":"uwsgi_next_upstream error timeout;","syntax":"uwsgi_next_upstream     error |    timeout |    invalid_header |    http_500 |    http_503 |    http_403 |    http_404 |    http_429 |    non_idempotent |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях запрос будет передан следующему серверу:\n</p> <dl class=\"compact\">\n\n<dt><code>error</code></dt>\n<dd>произошла ошибка соединения с сервером, передачи ему запроса или\nчтения заголовка ответа сервера;</dd>\n\n<dt><code>timeout</code></dt>\n<dd>произошёл таймаут во время соединения с сервером,\nпередачи ему запроса или чтения заголовка ответа сервера;</dd>\n\n<dt><code>invalid_header</code></dt>\n<dd>сервер вернул пустой или неверный ответ;</dd>\n\n<dt><code>http_500</code></dt>\n<dd>сервер вернул ответ с кодом 500;</dd>\n\n<dt><code>http_503</code></dt>\n<dd>сервер вернул ответ с кодом 503;</dd>\n\n<dt><code>http_403</code></dt>\n<dd>сервер вернул ответ с кодом 403;</dd>\n\n<dt><code>http_404</code></dt>\n<dd>сервер вернул ответ с кодом 404;</dd>\n\n<dt><code>http_429</code></dt>\n<dd>сервер вернул ответ с кодом 429 (1.11.13);</dd>\n\n<dt id=\"non_idempotent\"><code>non_idempotent</code></dt>\n<dd>обычно запросы с\n<a href=\"https://tools.ietf.org/html/rfc7231#section-4.2.2\">неидемпотентным</a>\nметодом\n(<code>POST</code>, <code>LOCK</code>, <code>PATCH</code>)\nне передаются на другой сервер,\nесли запрос серверу группы уже был отправлен (1.9.13);\nвключение параметра явно разрешает повторять подобные запросы;\n</dd>\n\n<dt><code>off</code></dt>\n<dd>запрещает передачу запроса следующему серверу.</dd>\n\n</dl><p> \n</p><p>\nНеобходимо понимать, что передача запроса следующему серверу возможна\nтолько при условии, что клиенту ещё ничего не передавалось.\nТо есть, если ошибка или таймаут возникли в середине передачи ответа,\nто исправить это уже невозможно.\n</p><p>\nДиректива также определяет, что считается\n<a href=\"ngx_http_upstream_module.html#max_fails\">неудачной\nпопыткой</a> работы с сервером.\nСлучаи <code>error</code>, <code>timeout</code> и\n<code>invalid_header</code>\nвсегда считаются неудачными попытками, даже если они не указаны в директиве.\nСлучаи <code>http_500</code>, <code>http_503</code>\nи <code>http_429</code>\nсчитаются неудачными попытками, только если они указаны в директиве.\nСлучаи <code>http_403</code> и <code>http_404</code>\nникогда не считаются неудачными попытками.\n</p><p>\nПередача запроса следующему серверу может быть ограничена по\n<a href=\"#uwsgi_next_upstream_tries\">количеству попыток</a>\nи по <a href=\"#uwsgi_next_upstream_timeout\">времени</a>.\n</p>"},{"directive":"uwsgi_modifier2","defaultValue":"uwsgi_modifier2 0;","syntax":"uwsgi_modifier2 число;","context":"http, server, location","description":"<p>\nЗадаёт значение поля <code>modifier2</code> в\n<a href=\"http://uwsgi-docs.readthedocs.org/en/latest/Protocol.html#uwsgi-packet-header\">заголовке\nпакета uwsgi</a>.\n</p>"},{"directive":"uwsgi_modifier1","defaultValue":"uwsgi_modifier1 0;","syntax":"uwsgi_modifier1 число;","context":"http, server, location","description":"<p>\nЗадаёт значение поля <code>modifier1</code> в\n<a href=\"http://uwsgi-docs.readthedocs.org/en/latest/Protocol.html#uwsgi-packet-header\">заголовке\nпакета uwsgi</a>.\n</p>"},{"directive":"uwsgi_max_temp_file_size","defaultValue":"uwsgi_max_temp_file_size 1024m;","syntax":"uwsgi_max_temp_file_size размер;","context":"http, server, location","description":"<p>\nЕсли включена <a href=\"#uwsgi_buffering\">буферизация</a> ответов\nuwsgi-сервера, и ответ не вмещается целиком в буферы,\nзаданные директивами <a href=\"#uwsgi_buffer_size\">uwsgi_buffer_size</a> и\n<a href=\"#uwsgi_buffers\">uwsgi_buffers</a>, часть ответа может быть записана во временный файл.\nЭта директива задаёт максимальный <code><i>размер</i></code> временного файла.\nРазмер данных, сбрасываемых во временный файл за один раз, задаётся\nдирективой <a href=\"#uwsgi_temp_file_write_size\">uwsgi_temp_file_write_size</a>.\n</p><p>\nЗначение 0 отключает возможность буферизации ответов во временные файлы.\n</p><p>\n</p> <blockquote class=\"note\">\nДанное ограничение не распространяется на ответы,\nкоторые будут <a href=\"#uwsgi_cache\">закэшированы</a>\nили <a href=\"#uwsgi_store\">сохранены</a> на диске.\n</blockquote><p> \n</p>"},{"directive":"uwsgi_limit_rate","defaultValue":"uwsgi_limit_rate 0;","syntax":"uwsgi_limit_rate скорость;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nОграничивает скорость чтения ответа от uwsgi-сервера.\n<code><i>Скорость</i></code> задаётся в байтах в секунду.\nЗначение 0 отключает ограничение скорости.\nОграничение устанавливается на запрос,\nпоэтому, если nginx одновременно\nоткроет два соединения к uwsgi-серверу,\nсуммарная скорость будет вдвое выше заданного ограничения.\nОграничение работает только в случае, если включена\n<a href=\"#uwsgi_buffering\">буферизация</a> ответов uwsgi-сервера.\n</p>"},{"directive":"uwsgi_intercept_errors","defaultValue":"uwsgi_intercept_errors off;","syntax":"uwsgi_intercept_errors on | off;","context":"http, server, location","description":"<p>\nОпределяет, передавать ли клиенту ответы uwsgi-сервера с кодом\nбольше либо равным 300,\nили же перехватывать их и перенаправлять на обработку nginx’у с помощью\nдирективы <a href=\"ngx_http_core_module.html#error_page\">error_page</a>.\n</p>"},{"directive":"uwsgi_ignore_headers","defaultValue":"—","syntax":"uwsgi_ignore_headers поле ...;","context":"http, server, location","description":"<p>\nЗапрещает обработку некоторых полей заголовка из ответа uwsgi-сервера.\nВ директиве можно указать поля “X-Accel-Redirect”,\n“X-Accel-Expires”, “X-Accel-Limit-Rate” (1.1.6),\n“X-Accel-Buffering” (1.1.6),\n“X-Accel-Charset” (1.1.6), “Expires”,\n“Cache-Control”, “Set-Cookie” (0.8.44)\nи “Vary” (1.7.7).\n</p><p>\nЕсли не запрещено, обработка этих полей заголовка заключается в следующем:\n</p> <ul>\n\n<li>\n“X-Accel-Expires”, “Expires”,\n“Cache-Control”, “Set-Cookie”\nи “Vary”\nзадают параметры <a href=\"#uwsgi_cache_valid\">кэширования</a> ответа;\n</li>\n\n<li>\n“X-Accel-Redirect” производит\n<a href=\"ngx_http_core_module.html#internal\">внутреннее\nперенаправление</a> на указанный URI;\n</li>\n\n<li>\n“X-Accel-Limit-Rate” задаёт\n<a href=\"ngx_http_core_module.html#limit_rate\">ограничение\nскорости</a> передачи ответа клиенту;\n</li>\n\n<li>\n“X-Accel-Buffering” включает или выключает\n<a href=\"#uwsgi_buffering\">буферизацию</a> ответа;\n</li>\n\n<li>\n“X-Accel-Charset” задаёт желаемую\n<a href=\"ngx_http_charset_module.html#charset\">кодировку</a>\nответа.\n</li>\n\n</ul><p> \n</p>"},{"directive":"uwsgi_ignore_client_abort","defaultValue":"uwsgi_ignore_client_abort off;","syntax":"uwsgi_ignore_client_abort on | off;","context":"http, server, location","description":"<p>\nОпределяет, закрывать ли соединение с uwsgi-сервером\nв случае, если клиент закрыл соединение, не дождавшись ответа.\n</p>"},{"directive":"uwsgi_hide_header","defaultValue":"—","syntax":"uwsgi_hide_header поле;","context":"http, server, location","description":"<p>\nПо умолчанию\nnginx не передаёт клиенту поля заголовка “Status” и\n“X-Accel-...” из ответа uwsgi-сервера.\nДиректива <code>uwsgi_hide_header</code> задаёт дополнительные поля,\nкоторые не будут передаваться.\nЕсли же передачу полей нужно разрешить, можно воспользоваться\nдирективой <a href=\"#uwsgi_pass_header\">uwsgi_pass_header</a>.\n</p>"},{"directive":"uwsgi_force_ranges","defaultValue":"uwsgi_force_ranges off;","syntax":"uwsgi_force_ranges on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nВключает поддержку диапазонов запрашиваемых байт (byte-range)\nдля кэшированных и некэшированных ответов uwsgi-сервера\nвне зависимости от наличия поля “Accept-Ranges”\nв заголовках этих ответов.\n</p>"},{"directive":"uwsgi_connect_timeout","defaultValue":"uwsgi_connect_timeout 60s;","syntax":"uwsgi_connect_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут для установления соединения с uwsgi-сервером.\nНеобходимо иметь в виду, что этот таймаут обычно не может превышать 75 секунд.\n</p>"},{"directive":"uwsgi_cache_valid","defaultValue":"—","syntax":"uwsgi_cache_valid [код ...] время;","context":"http, server, location","description":"<p>\nЗадаёт время кэширования для разных кодов ответа.\nНапример, директивы\n</p> <blockquote class=\"example\"><pre>\nuwsgi_cache_valid 200 302 10m;\nuwsgi_cache_valid 404      1m;\n</pre></blockquote><p> \nзадают время кэширования 10 минут для ответов с кодами 200 и 302\nи 1 минуту для ответов с кодом 404.\n</p><p>\nЕсли указано только <code><i>время</i></code> кэширования,\n</p> <blockquote class=\"example\"><pre>\nuwsgi_cache_valid 5m;\n</pre></blockquote><p> \nто кэшируются только ответы 200, 301 и 302.\n</p><p>\nКроме того, можно кэшировать любые ответы с помощью параметра\n<code>any</code>:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_cache_valid 200 302 10m;\nuwsgi_cache_valid 301      1h;\nuwsgi_cache_valid any      1m;\n</pre></blockquote><p> \n</p><p>\nПараметры кэширования могут также быть заданы непосредственно\nв заголовке ответа.\nТакой способ приоритетнее, чем задание времени кэширования с помощью директивы.\n</p> <ul>\n\n<li>\nПоле заголовка “X-Accel-Expires” задаёт время кэширования\nответа в секундах.\nЗначение 0 запрещает кэшировать ответ.\nЕсли значение начинается с префикса <code>@</code>, оно задаёт абсолютное\nвремя в секундах с начала эпохи, до которого ответ может быть закэширован.\n</li>\n\n<li>\nЕсли в заголовке нет поля “X-Accel-Expires”,\nпараметры кэширования определяются по полям заголовка\n“Expires” или “Cache-Control”.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Set-Cookie”,\nне будет кэшироваться.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Vary”\nсо специальным значением “<code>*</code>”,\nне будет кэшироваться (1.7.7).\nОтвет, в заголовке которого есть поле “Vary”\nс другим значением, будет закэширован\nс учётом соответствующих полей заголовка запроса (1.7.7).\n</li>\n\n</ul><p> \nОбработка одного или более из этих полей заголовка может быть отключена\nпри помощи директивы <a href=\"#uwsgi_ignore_headers\">uwsgi_ignore_headers</a>.\n</p>"},{"directive":"uwsgi_cache_use_stale","defaultValue":"uwsgi_cache_use_stale off;","syntax":"uwsgi_cache_use_stale     error |    timeout |    invalid_header |    updating |    http_500 |    http_503 |    http_403 |    http_404 |    http_429 |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях можно использовать устаревший закэшированный ответ.\nПараметры директивы совпадают с параметрами\nдирективы <a href=\"#uwsgi_next_upstream\">uwsgi_next_upstream</a>.\n</p><p>\nПараметр <code>error</code> также позволяет использовать\nустаревший закэшированный ответ при невозможности выбора\nuwsgi-сервера для обработки запроса.\n</p>"},{"directive":"uwsgi_cache_revalidate","defaultValue":"uwsgi_cache_revalidate off;","syntax":"uwsgi_cache_revalidate on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nРазрешает ревалидацию просроченных элементов кэша при помощи\nусловных запросов с полями заголовка\n“If-Modified-Since” и “If-None-Match”.\n</p>"},{"directive":"uwsgi_cache_purge","defaultValue":"—","syntax":"uwsgi_cache_purge строка ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nЗадаёт условия, при которых запрос будет считаться запросом\nна очистку кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто запись в кэше с соответствующим\n<a href=\"#uwsgi_cache_key\">ключом кэширования</a> удаляется.\nВ результате успешной операции возвращается ответ с кодом\n204 (No Content).\n</p><p>\nЕсли <a href=\"#uwsgi_cache_key\">ключ кэширования</a>\nзапроса на очистку заканчивается\nзвёздочкой (“<code>*</code>”), то все записи в кэше, соответствующие\nэтой маске, будут удалены из кэша.\nТем не менее, эти записи будут оставаться на диске или до момента удаления\nиз-за <a href=\"#uwsgi_cache_path\">отсутствия обращения к данным</a>,\nили до обработки их процессом “<a href=\"#purger\">cache purger</a>” (1.7.12),\nили до попытки клиента получить к ним доступ.\n</p><p>\nПример конфигурации:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_cache_path /data/nginx/cache keys_zone=cache_zone:10m;\n\nmap $request_method $purge_method {\n    PURGE   1;\n    default 0;\n}\n\nserver {\n    ...\n    location / {\n        uwsgi_pass        http://backend;\n        uwsgi_cache       cache_zone;\n        uwsgi_cache_key   $uri;\n        uwsgi_cache_purge $purge_method;\n    }\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nФункциональность доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"uwsgi_cache_path","defaultValue":"—","syntax":"uwsgi_cache_path     путь    [levels=уровни]    [use_temp_path=on|off]    keys_zone=имя:размер    [inactive=время]    [max_size=размер]    [manager_files=число]    [manager_sleep=время]    [manager_threshold=время]    [loader_files=число]    [loader_sleep=время]    [loader_threshold=время]    [purger=on|off]    [purger_files=число]    [purger_sleep=время]    [purger_threshold=время];","context":"http","description":"<p>\nЗадаёт путь и другие параметры кэша.\nДанные кэша хранятся в файлах.\nИменем файла в кэше является результат функции MD5\nот <a href=\"#uwsgi_cache_key\">ключа кэширования</a>.\nПараметр <code>levels</code> задаёт уровни иерархии кэша:\nможно задать от 1 до 3 уровней, на каждом уровне допускаются значения 1 или 2.\nНапример, при использовании\n</p> <blockquote class=\"example\"><pre>\nuwsgi_cache_path /data/nginx/cache levels=1:2 keys_zone=one:10m;\n</pre></blockquote><p> \nимена файлов в кэше будут такого вида:\n</p> <blockquote class=\"example\"><pre>\n/data/nginx/cache/<strong>c</strong>/<strong>29</strong>/b7f54b2df7773722d382f4809d650<strong>29c</strong>\n</pre></blockquote><p> \n</p><p>\nКэшируемый ответ сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временные файлы и кэш\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если кэш будет находиться на той же файловой\nсистеме, что и каталог с временными файлами.\nКакой из каталогов будет использоваться для временных файлов\nопределяется параметром <code>use_temp_path</code> (1.7.10).\nЕсли параметр не задан или установлен в значение “<code>on</code>”,\nто будет использоваться каталог, задаваемый директивой\n<a href=\"#uwsgi_temp_path\">uwsgi_temp_path</a> для данного location.\nЕсли параметр установлен в значение “<code>off</code>”,\nто временные файлы будут располагаться непосредственно в каталоге кэша.\n</p><p>\nКроме того, все активные ключи и информация о данных хранятся в зоне\nразделяемой памяти, <code><i>имя</i></code> и <code><i>размер</i></code> которой\nзадаются параметром <code>keys_zone</code>.\nЗоны размером в 1 мегабайт достаточно для хранения около 8 тысяч ключей.\n</p><p>\nЕсли к данным кэша не обращаются в течение времени, заданного параметром\n<code>inactive</code>, то данные удаляются, независимо от их свежести.\nПо умолчанию <code>inactive</code> равен 10 минутам.\n</p><p>\nСпециальный процесс “cache manager” следит за максимальным размером кэша,\nзаданным параметром <code>max_size</code>, и при превышении\nего размеров удаляет наименее востребованные данные.\nУдаление данных происходит итерациями, настраиваемыми параметрами (1.11.5)\n<code>manager_files</code>,\n<code>manager_threshold</code> и\n<code>manager_sleep</code>.\nЗа одну итерацию загружается не более <code>manager_files</code>\nэлементов (по умолчанию 100).\nВремя работы одной итерации ограничено параметром\n<code>manager_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>manager_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nЧерез минуту после старта активируется специальный процесс “cache loader”,\nкоторый загружает в зону кэша информацию о ранее закэшированных данных,\nхранящихся на файловой системе.\nЗагрузка также происходит итерациями.\nЗа одну итерацию загружается не более <code>loader_files</code>\nэлементов (по умолчанию 100).\nКроме того, время работы одной итерации ограничено параметром\n<code>loader_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>loader_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nКроме того,\nследующие параметры доступны как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>:\n</p><p>\n</p> <dl class=\"compact\">\n\n<dt id=\"purger\">\n<code>purger</code>=<code>on</code>|<code>off</code>\n</dt>\n<dd>\nУказывает, будут ли записи в кэше, соответствующие\n<a href=\"#uwsgi_cache_purge\">маске</a>,\nудалены с диска при помощи процесса “cache purger” (1.7.12).\nУстановка параметра в значение <code>on</code>\n(по умолчанию <code>off</code>)\nактивирует процесс “cache purger”, который\nпроходит по всем записям в кэше\nи удаляет записи, соответствующие этой маске.\n</dd>\n\n<dt id=\"purger_files\">\n<code>purger_files</code>=<code><i>число</i></code>\n</dt>\n<dd>\nЗадаёт число элементов, которые будут сканироваться за одну итерацию (1.7.12).\nПо умолчанию <code>purger_files</code> равен 10.\n</dd>\n\n<dt id=\"purger_threshold\">\n<code>purger_threshold</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт продолжительность одной итерации (1.7.12).\nПо умолчанию <code>purger_threshold</code> равен 50 миллисекундам.\n</dd>\n\n<dt id=\"purger_sleep\">\n<code>purger_sleep</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт паузу между итерациями (1.7.12).\nПо умолчанию <code>purger_sleep</code> равен 50 миллисекундам.\n</dd>\n\n</dl><p> \n</p><p>\n</p> <blockquote class=\"note\">\nВ версиях 1.7.3, 1.7.7 и 1.11.10 формат заголовка кэша был изменён.\nПри обновлении на более новую версию nginx\nранее закэшированные ответы будут считаться недействительными.\n</blockquote><p> \n</p>"},{"directive":"uwsgi_cache_min_uses","defaultValue":"uwsgi_cache_min_uses 1;","syntax":"uwsgi_cache_min_uses число;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> запросов, после которого ответ будет закэширован.\n</p>"},{"directive":"uwsgi_cache_methods","defaultValue":"uwsgi_cache_methods GET HEAD;","syntax":"uwsgi_cache_methods     GET |    HEAD |    POST    ...;","context":"http, server, location","description":"<p>\nЕсли метод запроса клиента указан в этой директиве,\nто ответ будет закэширован.\nМетоды “<code>GET</code>” и “<code>HEAD</code>” всегда добавляются\nв список, но тем не менее рекомендуется перечислять их явно.\nСм. также директиву <a href=\"#uwsgi_no_cache\">uwsgi_no_cache</a>.\n</p>"},{"directive":"uwsgi_cache_max_range_offset","defaultValue":"—","syntax":"uwsgi_cache_max_range_offset число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.6.\n            </p></div><p>\nЗадаёт смещение в байтах для запросов с указанием диапазона запрашиваемых байт\n(byte-range requests).\nЕсли диапазон находится за указанным смещением,\nrange-запрос будет передан на uwsgi-сервер\nи ответ не будет закэширован.\n</p>"},{"directive":"uwsgi_cache_lock_timeout","defaultValue":"uwsgi_cache_lock_timeout 5s;","syntax":"uwsgi_cache_lock_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЗадаёт таймаут для <a href=\"#uwsgi_cache_lock\">uwsgi_cache_lock</a>.\nПо истечении указанного <code><i>времени</i></code>\nзапрос будет передан на uwsgi-сервер,\nоднако ответ не будет закэширован.\n</p> <blockquote class=\"note\">\nДо версии 1.7.8 такой ответ мог быть закэширован.\n</blockquote><p> \n</p>"},{"directive":"uwsgi_cache_lock_age","defaultValue":"uwsgi_cache_lock_age 5s;","syntax":"uwsgi_cache_lock_age время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЕсли последний запрос, переданный на uwsgi-сервер\nдля заполнения нового элемента кэша,\nне завершился за указанное <code><i>время</i></code>,\nна uwsgi-сервер может быть передан ещё один запрос.\n</p>"},{"directive":"uwsgi_cache_lock","defaultValue":"uwsgi_cache_lock off;","syntax":"uwsgi_cache_lock on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЕсли включено, одновременно только одному запросу будет позволено\nзаполнить новый элемент кэша, идентифицируемый согласно директиве\n<a href=\"#uwsgi_cache_key\">uwsgi_cache_key</a>, передав запрос на uwsgi-сервер.\nОстальные запросы этого же элемента будут либо ожидать\nпоявления ответа в кэше, либо освобождения блокировки\nэтого элемента, в течение времени, заданного директивой\n<a href=\"#uwsgi_cache_lock_timeout\">uwsgi_cache_lock_timeout</a>.\n</p>"},{"directive":"uwsgi_cache_key","defaultValue":"—","syntax":"uwsgi_cache_key строка;","context":"http, server, location","description":"<p>\nЗадаёт ключ для кэширования, например,\n</p> <blockquote class=\"example\"><pre>\nuwsgi_cache_key localhost:9000$request_uri;\n</pre></blockquote><p> \n</p>"},{"directive":"uwsgi_cache_bypass","defaultValue":"—","syntax":"uwsgi_cache_bypass строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет браться из кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не берётся из кэша:\n</p> <blockquote class=\"example\"><pre>\nuwsgi_cache_bypass $cookie_nocache $arg_nocache$arg_comment;\nuwsgi_cache_bypass $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#uwsgi_no_cache\">uwsgi_no_cache</a>.\n</p>"},{"directive":"uwsgi_cache_background_update","defaultValue":"uwsgi_cache_background_update off;","syntax":"uwsgi_cache_background_update on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.10.\n            </p></div><p>\nПозволяет запустить фоновый подзапрос\nдля обновления просроченного элемента кэша,\nв то время как клиенту возвращается устаревший закэшированный ответ.\nИспользование устаревшего закэшированного ответа в момент его обновления\nдолжно быть\n<a href=\"#uwsgi_cache_use_stale_updating\">разрешено</a>.\n</p>"},{"directive":"uwsgi_cache","defaultValue":"uwsgi_cache off;","syntax":"uwsgi_cache зона | off;","context":"http, server, location","description":"<p>\nЗадаёт зону разделяемой памяти, используемой для кэширования.\nОдна и та же зона может использоваться в нескольких местах.\nВ значении параметра можно использовать переменные (1.7.9).\nПараметр <code>off</code> запрещает кэширование, унаследованное\nс предыдущего уровня конфигурации.\n</p>"},{"directive":"uwsgi_busy_buffers_size","defaultValue":"uwsgi_busy_buffers_size 8k|16k;","syntax":"uwsgi_busy_buffers_size размер;","context":"http, server, location","description":"<p>\nПри включённой <a href=\"#uwsgi_buffering\">буферизации</a> ответов\nuwsgi-сервера, ограничивает суммарный <code><i>размер</i></code>\nбуферов, которые могут быть заняты для отправки ответа клиенту, пока\nответ ещё не прочитан целиком.\nОставшиеся буферы тем временем могут использоваться для чтения ответа\nи, при необходимости, буферизации части ответа во временный файл.\nПо умолчанию <code><i>размер</i></code> ограничен двумя буферами, заданными\nдирективами <a href=\"#uwsgi_buffer_size\">uwsgi_buffer_size</a> и <a href=\"#uwsgi_buffers\">uwsgi_buffers</a>.\n</p>"},{"directive":"uwsgi_buffers","defaultValue":"uwsgi_buffers 8 4k|8k;","syntax":"uwsgi_buffers число размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> и <code><i>размер</i></code> буферов\nдля одного соединения,\nв которые будет читаться ответ, получаемый от uwsgi-сервера.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p>"},{"directive":"uwsgi_buffering","defaultValue":"uwsgi_buffering on;","syntax":"uwsgi_buffering on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает использовать буферизацию ответов uwsgi-сервера.\n</p><p>\nЕсли буферизация включена, то nginx принимает ответ uwsgi-сервера\nкак можно быстрее, сохраняя его в буферы, заданные директивами\n<a href=\"#uwsgi_buffer_size\">uwsgi_buffer_size</a> и <a href=\"#uwsgi_buffers\">uwsgi_buffers</a>.\nЕсли ответ не вмещается целиком в память, то его часть может быть записана\nна диск во <a href=\"#uwsgi_temp_path\">временный файл</a>.\nЗапись во временные файлы контролируется директивами\n<a href=\"#uwsgi_max_temp_file_size\">uwsgi_max_temp_file_size</a> и\n<a href=\"#uwsgi_temp_file_write_size\">uwsgi_temp_file_write_size</a>.\n</p><p>\nЕсли буферизация выключена, то ответ синхронно передаётся клиенту сразу же\nпо мере его поступления.\nnginx не пытается считать весь ответ uwsgi-сервера.\nМаксимальный размер данных, который nginx может принять от сервера\nза один раз, задаётся директивой <a href=\"#uwsgi_buffer_size\">uwsgi_buffer_size</a>.\n</p><p>\nБуферизация может быть также включена или выключена путём передачи\nзначения “<code>yes</code>” или “<code>no</code>” в поле\n“X-Accel-Buffering” заголовка ответа.\nЭту возможность можно запретить с помощью директивы\n<a href=\"#uwsgi_ignore_headers\">uwsgi_ignore_headers</a>.\n</p>"},{"directive":"uwsgi_buffer_size","defaultValue":"uwsgi_buffer_size 4k|8k;","syntax":"uwsgi_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> буфера, в который будет читаться\nпервая часть ответа, получаемого от uwsgi-сервера.\nПо умолчанию размер одного буфера равен размеру страницы памяти.\nВ зависимости от платформы это или 4K, или 8K,\nоднако его можно сделать меньше.\n</p>"},{"directive":"uwsgi_bind","defaultValue":"—","syntax":"uwsgi_bind     адрес    [transparent] |    off;","context":"http, server, location","description":"<p>\nЗадаёт локальный IP-адрес с необязательным портом (1.11.2),\nкоторый будет использоваться в исходящих соединениях с uwsgi-сервером.\nВ значении параметра допустимо использование переменных (1.3.12).\nСпециальное значение <code>off</code> (1.3.12) отменяет действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>uwsgi_bind</code>, позволяя системе\nсамостоятельно выбирать локальный IP-адрес и порт.\n</p>"},{"directive":"userid_service","defaultValue":"userid_service IP-адрес сервера;","syntax":"userid_service номер;","context":"http, server, location","description":"<p>\nЕсли идентификаторы выдаются несколькими серверами (сервисами),\nто каждому сервису следует назначить свой собственный <code><i>номер</i></code>,\nдля обеспечения уникальности выдаваемых идентификаторов клиентов.\nПо умолчанию для кук первой версии используется ноль.\nДля кук второй версии по умолчанию используется число, составленное из\nпоследних четырёх октетов IP-адреса сервера.\n</p>"},{"directive":"userid_path","defaultValue":"userid_path /;","syntax":"userid_path путь;","context":"http, server, location","description":"<p>\nЗадаёт путь, для которого устанавливается кука.\n</p>"},{"directive":"userid_p3p","defaultValue":"userid_p3p none;","syntax":"userid_p3p строка | none;","context":"http, server, location","description":"<p>\nЗадаёт значение для поля заголовка “P3P”, которое будет\nвыдаваться вместе с кукой.\nЕсли задано специальное значение <code>none</code>,\nто в ответе не будет заголовка “P3P”.\n</p>"},{"directive":"userid_name","defaultValue":"userid_name uid;","syntax":"userid_name имя;","context":"http, server, location","description":"<p>\nЗадаёт имя куки.\n</p>"},{"directive":"userid_mark","defaultValue":"userid_mark off;","syntax":"userid_mark     буква | цифра |    = |    off;","context":"http, server, location","description":"<p>\nЕсли параметр не <code>off</code>, включает механизм маркировки кук\nи задаёт символ, используемый в качестве метки.\nЭтот механизм позволяет добавить или изменить\n<a href=\"#userid_p3p\">userid_p3p</a> и/или время хранения куки, но при этом оставить\nнеизменным идентификатор клиента.\nМеткой может быть любая буква английского алфавита (с учётом регистра),\nцифра или знак “<code>=</code>”.\n</p><p>\nЕсли метка задана, то она сравнивается с первым дополняющим символом\nв base64 представлении идентификатора клиента, передаваемом в куке.\nЕсли они не совпадают, то кука перепосылается с заданной меткой,\nвременем хранения и заголовком “P3P”.\n</p>"},{"directive":"userid_expires","defaultValue":"userid_expires off;","syntax":"userid_expires время | max |    off;","context":"http, server, location","description":"<p>\nЗадаёт время, в течение которого браузер должен хранить куку.\nПараметр <code>max</code> устанавливает срок хранения куки до\n31 декабря 2037 года 23:55:55 GMT.\nУказание параметра <code>off</code> позволяет ограничить время\nдействия куки сессией браузера.\n</p>"},{"directive":"userid_domain","defaultValue":"userid_domain none;","syntax":"userid_domain имя | none;","context":"http, server, location","description":"<p>\nЗадаёт домен, для которого устанавливается кука.\nПараметр <code>none</code> запрещает выдавать домен для куки.\n</p>"},{"directive":"userid","defaultValue":"userid off;","syntax":"userid     on |    v1 |    log |    off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает выдачу кук и запись приходящих кук в лог:\n</p> <dl class=\"compact\">\n\n<dt><code>on</code></dt>\n<dd>\nразрешает выдачу кук версии 2\nи запись приходящих кук в лог;\n</dd>\n\n<dt><code>v1</code></dt>\n<dd>\nразрешает выдачу кук версии 1\nи запись приходящих кук в лог;\n</dd>\n\n<dt><code>log</code></dt>\n<dd>\nзапрещает выдачу кук,\nно разрешает запись приходящих кук в лог;\n</dd>\n\n<dt><code>off</code></dt>\n<dd>\nзапрещает выдачу кук и запись приходящих кук в лог.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"user","defaultValue":"","syntax":"user пользователь [группа];","context":"","description":null},{"directive":"use","defaultValue":"—","syntax":"use метод;","context":"events","description":"<p>\nЗадаёт <code><i>метод</i></code>, используемый для\n<a href=\"events.html\">обработки соединений</a>.\nОбычно нет необходимости задавать его явно, поскольку по умолчанию\nnginx сам выбирает наиболее эффективный метод.\n</p>"},{"directive":"upstream_conf","defaultValue":"—","syntax":"upstream_conf;","context":"location","description":"<p>\nАктивирует HTTP-интерфейс для настройки групп серверов в содержащем location.\nДоступ в location следует\n<a href=\"ngx_http_core_module.html#satisfy\">ограничить</a>.\n</p><p>\nС помощью команд настройки можно:\n</p> <ul class=\"compact\">\n\n<li>просматривать конфигурацию группы;</li>\n\n<li>\nпросматривать или изменять конфигурацию, а также\nудалять серверы;\n</li>\n\n<li>добавлять новые серверы.</li>\n\n</ul><p> \n</p> <blockquote class=\"note\">\nПоскольку адреса в группе не обязаны быть уникальными,\nобращение к отдельным серверам в группе осуществляется по их идентификаторам.\nИдентификаторы назначаются автоматически и показываются при добавлении сервера\nили просмотре конфигурации группы.\n</blockquote><p> \n</p><p>\nКоманда настройки состоит из параметров, передаваемых в аргументах запроса,\nнапример:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?upstream=backend\n</pre></blockquote><p> \n</p><p>\nПоддерживаются следующие параметры:\n\n</p> <dl>\n\n<dt>\n<code>stream=</code></dt>\n<dd>\nВыбирает группу серверов\n<a href=\"../stream/ngx_stream_upstream_module.html\">stream</a>.\nЕсли параметр не задан, будет выбрана группа серверов\n<a href=\"ngx_http_upstream_module.html\">http</a>.\n</dd>\n\n<dt>\n<code>upstream=</code><code><i>имя</i></code></dt>\n<dd>\nВыбирает группу серверов для работы.\nПараметр является обязательным.\n</dd>\n\n<dt>\n<code>id=</code><code><i>число</i></code></dt>\n<dd>\nВыбирает сервер для просмотра, изменения или удаления.\n</dd>\n\n<dt>\n<code>remove=</code></dt>\n<dd>\nУдаляет сервер из группы.\n</dd>\n\n<dt>\n<code>add=</code></dt>\n<dd>\nДобавляет новый сервер в группу.\n</dd>\n\n<dt>\n<code>backup=</code></dt>\n<dd>\nНеобходим для добавления запасного сервера.\n<blockquote class=\"note\">\nДо версии 1.7.2 параметр <code>backup=</code> требовался\nтакже для просмотра, изменения или удаления существующих запасных серверов.\n</blockquote>\n</dd>\n\n<dt>\n<code>server=</code><code><i>адрес</i></code></dt>\n<dd>\nТо же, что и параметр “<code>адрес</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#server\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#server\">stream</a>.\n<p>\nПри добавлении сервер можно задать в виде доменного имени.\nВ этом случае любые изменения IP-адресов, соответствующих доменному имени\nсервера, отслеживаются и автоматически применяются к конфигурации группы\nбез необходимости перезапуска nginx (1.7.2).\nДля этого в блоке\n<a href=\"ngx_http_core_module.html#resolver\">http</a>\nили\n<a href=\"../stream/ngx_stream_core_module.html#resolver\">stream</a>\nдолжна быть задана директива “<code>resolver</code>”.\nСм. также параметр “<code>resolve</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#resolve\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#resolve\">stream</a>.\n</p>\n</dd>\n\n<dt>\n<code>service=</code><code><i>имя</i></code></dt>\n<dd>\nТо же, что и параметр “<code>service</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#service\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#service\">stream</a>\n(1.9.13).\n</dd>\n\n<dt>\n<code>weight=</code><code><i>число</i></code></dt>\n<dd>\nТо же, что и параметр “<code>weight</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#weight\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#weight\">stream</a>.\n</dd>\n\n<dt>\n<code>max_conns=</code><code><i>число</i></code></dt>\n<dd>\nТо же, что и параметр “<code>max_conns</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#max_conns\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#max_conns\">stream</a>.\n</dd>\n\n<dt>\n<code>max_fails=</code><code><i>число</i></code></dt>\n<dd>\nТо же, что и параметр “<code>max_fails</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#max_fails\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#max_fails\">stream</a>.\n</dd>\n\n<dt>\n<code>fail_timeout=</code><code><i>время</i></code></dt>\n<dd>\nТо же, что и параметр “<code>fail_timeout</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#fail_timeout\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#fail_timeout\">stream</a>.\n</dd>\n\n<dt>\n<code>slow_start=</code><code><i>время</i></code></dt>\n<dd>\nТо же, что и параметр “<code>slow_start</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#slow_start\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#slow_start\">stream</a>.\n</dd>\n\n<dt>\n<code>down=</code></dt>\n<dd>\nТо же, что и параметр “<code>down</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#down\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#down\">stream</a>.\n</dd>\n\n<dt id=\"drain\"><code>drain=</code></dt>\n<dd>\nПереводит сервер группы серверов\n<a href=\"ngx_http_upstream_module.html\">http</a>\nв режим “draining” (1.7.5).\nВ этом режиме на сервер будут проксироваться только\n<a href=\"ngx_http_upstream_module.html#sticky\">привязанные</a>\nк нему запросы.\n</dd>\n\n<dt>\n<code>up=</code></dt>\n<dd>\nПараметр, обратный по значению параметру “<code>down</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#down\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#down\">stream</a>.\n</dd>\n\n<dt>\n<code>route=</code><code><i>строка</i></code></dt>\n<dd>\nТо же, что и параметр “<code>route</code>” сервера группы\n<a href=\"ngx_http_upstream_module.html#route\">http</a>.\n</dd>\n\n</dl><p> \n\nПервые три параметра выбирают объект.\nОбъектом может быть либо группа серверов http или stream,\nлибо отдельный сервер.\nЕсли остальные параметры не указаны, то показывается конфигурация выбранной\nгруппы или сервера.\n</p><p>\nНапример, команда для просмотра конфигурации всей группы\nвыглядит следующим образом:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?upstream=backend\n</pre></blockquote><p> \n\nДля просмотра конфигурации отдельного сервера следует указать его идентификатор:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?upstream=backend&amp;id=42\n</pre></blockquote><p> \n</p><p>\nДля добавления нового сервера в группу\nследует указать его адрес в параметре “<code>server=</code>”.\nЕсли остальные параметры не указаны, то при добавлении сервера\nих значения будут установлены по умолчанию (см. директиву\n“<code>server</code>” для\n<a href=\"ngx_http_upstream_module.html#server\">http</a>\nили\n<a href=\"../stream/ngx_stream_upstream_module.html#server\">stream</a>).\n</p><p>\nНапример, команда для добавления нового основного сервера в группу\nвыглядит следующим образом:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?add=&amp;upstream=backend&amp;server=127.0.0.1:8080\n</pre></blockquote><p> \n\nДобавление нового запасного сервера происходит следующим образом:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?add=&amp;upstream=backend&amp;backup=&amp;server=127.0.0.1:8080\n</pre></blockquote><p> \n\nДобавление нового основного сервера с нестандартными\nзначениями параметров и с пометкой его как постоянно недоступного\n(“<code>down</code>”) происходит следующим образом:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?add=&amp;upstream=backend&amp;server=127.0.0.1:8080&amp;weight=2&amp;down=\n</pre></blockquote><p> \n\nДля удаления сервера следует указать его идентификатор:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?remove=&amp;upstream=backend&amp;id=42\n</pre></blockquote><p> \n\nПометка существующего сервера как постоянно недоступного\n(“<code>down</code>”) происходит следующим образом:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?upstream=backend&amp;id=42&amp;down=\n</pre></blockquote><p> \n\nИзменение адреса существующего сервера происходит следующим образом:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?upstream=backend&amp;id=42&amp;server=192.0.2.3:8123\n</pre></blockquote><p> \n\nИзменение других параметров существующего сервера происходит следующим образом:\n</p> <blockquote class=\"example\"><pre>\nhttp://127.0.0.1/upstream_conf?upstream=backend&amp;id=42&amp;max_fails=3&amp;weight=4\n</pre></blockquote><p> \n\nВышеприведённые примеры актуальны для группы серверов\n<a href=\"ngx_http_upstream_module.html\">http</a>.\nАналогичные примеры для группы серверов\n<a href=\"../stream/ngx_stream_upstream_module.html\">stream</a>\nтребуют указания параметра “<code>stream=</code>”.\n</p>"},{"directive":"upstream","defaultValue":"—","syntax":"upstream название { ... }","context":"stream","description":"<p>\nОписывает группу серверов.\nСерверы могут слушать на разных портах.\nКроме того, можно одновременно использовать серверы,\nслушающие на TCP- и UNIX-сокетах.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nupstream backend {\n    server backend1.example.com:12345 weight=5;\n    server 127.0.0.1:12345            max_fails=3 fail_timeout=30s;\n    server unix:/tmp/backend2;\n    server backend3.example.com:12345 resolve;\n\n    server backup1.example.com:12345  backup;\n}\n</pre></blockquote><p> \n</p><p>\nПо умолчанию соединения распределяются по серверам циклически\n(в режиме round-robin) с учётом весов серверов.\nВ вышеприведённом примере каждые 7 соединений будут распределены так:\n5 соединений на <code>backend1.example.com:12345</code>\nи по одному соединению на второй и третий серверы.\nЕсли при попытке работы с сервером происходит ошибка, то соединение\nпередаётся следующему серверу, и так далее до тех пор, пока не будут опробованы\nвсе работающие серверы.\nЕсли связь с серверами не удалась, соединение будет закрыто.\n</p>"},{"directive":"upstream","defaultValue":"—","syntax":"upstream название { ... }","context":"http","description":"<p>\nОписывает группу серверов.\nСерверы могут слушать на разных портах.\nКроме того, можно одновременно использовать серверы,\nслушающие на TCP- и UNIX-сокетах.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nupstream backend {\n    server backend1.example.com weight=5;\n    server 127.0.0.1:8080       max_fails=3 fail_timeout=30s;\n    server unix:/tmp/backend3;\n\n    server backup1.example.com  backup;\n}\n</pre></blockquote><p> \n</p><p>\nПо умолчанию запросы распределяются по серверам циклически\n(в режиме round-robin) с учётом весов серверов.\nВ вышеприведённом примере каждые 7 запросов будут распределены так:\n5 запросов на <code>backend1.example.com</code>\nи по одному запросу на второй и третий серверы.\nЕсли при попытке работы с сервером происходит ошибка, то запрос\nпередаётся следующему серверу, и так далее до тех пор, пока не будут опробованы\nвсе работающие серверы.\nЕсли не удастся получить успешный ответ\nни от одного из серверов, то клиенту будет возвращён результат работы\nс последним сервером.\n</p>"},{"directive":"uninitialized_variable_warn","defaultValue":"uninitialized_variable_warn on;","syntax":"uninitialized_variable_warn on | off;","context":"http, server, location, if","description":"<p>\nОпределяет, нужно ли писать в лог предупреждения о неинициализированных\nпеременных.\n</p>"},{"directive":"underscores_in_headers","defaultValue":"underscores_in_headers off;","syntax":"underscores_in_headers on | off;","context":"http, server","description":"<p>\nРазрешает или запрещает использование символов подчёркивания в\nполях заголовка запроса клиента.\nЕсли использование символов подчёркивания запрещено, поля заголовка запроса, в\nименах которых есть подчёркивания,\nпомечаются как недопустимые и подпадают под действие директивы\n<a href=\"#ignore_invalid_headers\">ignore_invalid_headers</a>.\n</p><p>\nЕсли директива указана на уровне <a href=\"#server\">server</a>,\nеё значение используется только в том случае,\nесли сервер является сервером по умолчанию.\nУказанное значение распространяется на все виртуальные серверы,\nслушающие на том же адресе и порту.\n</p>"},{"directive":"types_hash_max_size","defaultValue":"types_hash_max_size 1024;","syntax":"types_hash_max_size размер;","context":"http, server, location","description":"<p>\nЗадаёт максимальный <code><i>размер</i></code> хэш-таблиц типов.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"types_hash_bucket_size","defaultValue":"types_hash_bucket_size 64;","syntax":"types_hash_bucket_size размер;","context":"http, server, location","description":"<p>\nЗадаёт размер корзины в хэш-таблицах типов.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p> <blockquote class=\"note\">\nДо версии 1.5.13\nзначение по умолчанию зависело от размера строки кэша процессора.\n</blockquote><p> \n</p>"},{"directive":"types","defaultValue":"types {    text/html  html;    image/gif  gif;    image/jpeg jpg;}","syntax":"types { ... }","context":"http, server, location","description":"<p>\nЗадаёт соответствие расширений имён файлов и MIME-типов ответов.\nРасширения нечувствительны к регистру символов.\nОдному MIME-типу может соответствовать несколько расширений, например:\n</p> <blockquote class=\"example\"><pre>\ntypes {\n    application/octet-stream bin exe dll;\n    application/octet-stream deb;\n    application/octet-stream dmg;\n}\n</pre></blockquote><p> \n</p><p>\nДостаточно полная таблица соответствий входит в дистрибутив nginx\nи находится в файле <code>conf/mime.types</code>.\n</p><p>\nДля того чтобы для определённого location’а для всех ответов\nвыдавался MIME-тип “<code>application/octet-stream</code>”,\nможно использовать следующее:\n</p> <blockquote class=\"example\"><pre>\nlocation /download/ {\n    types        { }\n    default_type application/octet-stream;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"try_files","defaultValue":"—","syntax":"try_files файл ... uri;try_files файл ... =код;","context":"server, location","description":"<p>\nПроверяет существование файлов в заданном порядке и использует\nдля обработки запроса первый найденный файл, причём обработка\nделается в контексте этого же location’а.\nПуть к файлу строится из параметра <code><i>файл</i></code>\nв соответствии с директивами\n<a href=\"#root\">root</a> и <a href=\"#alias\">alias</a>.\nС помощью слэша в конце имени можно проверить существование каталога,\nнапример, “<code>$uri/</code>”.\nВ случае, если ни один файл не найден, то делается внутреннее\nперенаправление на <code><i>uri</i></code>, заданный последним параметром.\nНапример:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    try_files $uri /images/default.gif;\n}\n\nlocation = /images/default.gif {\n    expires 30s;\n}\n</pre></blockquote><p> \nПоследний параметр может также указывать на именованный location,\nкак в примерах ниже.\nС версии 0.7.51 последний параметр может также быть <code><i>кодом</i></code>:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    try_files $uri $uri/index.html $uri.html =404;\n}\n</pre></blockquote><p> \n</p><p>\nПример использования при проксировании Mongrel:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    try_files /system/maintenance.html\n              $uri $uri/index.html $uri.html\n              @mongrel;\n}\n\nlocation @mongrel {\n    proxy_pass http://mongrel;\n}\n</pre></blockquote><p> \n</p><p>\nПример использования вместе с Drupal/FastCGI:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    try_files $uri $uri/ @drupal;\n}\n\nlocation ~ \\.php$ {\n    try_files $uri @drupal;\n\n    fastcgi_pass ...;\n\n    fastcgi_param SCRIPT_FILENAME /path/to$fastcgi_script_name;\n    fastcgi_param SCRIPT_NAME     $fastcgi_script_name;\n    fastcgi_param QUERY_STRING    $args;\n\n    ... прочие fastcgi_param\n}\n\nlocation @drupal {\n    fastcgi_pass ...;\n\n    fastcgi_param SCRIPT_FILENAME /path/to/index.php;\n    fastcgi_param SCRIPT_NAME     /index.php;\n    fastcgi_param QUERY_STRING    q=$uri&amp;$args;\n\n    ... прочие fastcgi_param\n}\n</pre></blockquote><p> \nВ следующем примере директива <code>try_files</code>\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    try_files $uri $uri/ @drupal;\n}\n</pre></blockquote><p> \nаналогична директивам\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    error_page 404 = @drupal;\n    log_not_found off;\n}\n</pre></blockquote><p> \nА здесь\n</p> <blockquote class=\"example\"><pre>\nlocation ~ \\.php$ {\n    try_files $uri @drupal;\n\n    fastcgi_pass ...;\n\n    fastcgi_param SCRIPT_FILENAME /path/to$fastcgi_script_name;\n\n    ...\n}\n</pre></blockquote><p> \n<code>try_files</code> проверяет существование PHP-файла,\nпрежде чем передать запрос FastCGI-серверу.\n</p><p>\nПример использования вместе с Wordpress и Joomla:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    try_files $uri $uri/ @wordpress;\n}\n\nlocation ~ \\.php$ {\n    try_files $uri @wordpress;\n\n    fastcgi_pass ...;\n\n    fastcgi_param SCRIPT_FILENAME /path/to$fastcgi_script_name;\n    ... прочие fastcgi_param\n}\n\nlocation @wordpress {\n    fastcgi_pass ...;\n\n    fastcgi_param SCRIPT_FILENAME /path/to/index.php;\n    ... прочие fastcgi_param\n}\n</pre></blockquote><p> \n</p>"},{"directive":"timer_resolution","defaultValue":"—","syntax":"timer_resolution интервал;","context":"main","description":"<p>\nУменьшает разрешение таймеров времени в рабочих процессах, за счёт\nчего уменьшается число системных вызовов <code>gettimeofday()</code>.\nПо умолчанию <code>gettimeofday()</code> вызывается после каждой\nоперации получения событий из ядра.\nПри уменьшении разрешения <code>gettimeofday()</code> вызывается только\nодин раз за указанный <code><i>интервал</i></code>.\n</p><p>\nПример использования:\n</p> <blockquote class=\"example\"><pre>\ntimer_resolution 100ms;\n</pre></blockquote><p> \n</p><p>\nВнутренняя реализация интервала зависит от используемого метода:\n</p> <ul class=\"compact\">\n\n<li>\nфильтр <code>EVFILT_TIMER</code> при использовании <code>kqueue</code>;\n</li>\n\n<li>\n<code>timer_create()</code> при использовании <code>eventport</code>;\n</li>\n\n<li>\nи <code>setitimer()</code> во всех остальных случаях.\n</li>\n\n</ul><p> \n</p>"},{"directive":"timeout","defaultValue":"timeout 60s;","syntax":"timeout время;","context":"mail, server","description":"<p>\nЗадаёт таймаут, который используется до начала проксирования на бэкенд.\n</p>"},{"directive":"thread_pool","defaultValue":"thread_pool default threads=32 max_queue=65536;","syntax":"thread_pool     имя    threads=число    [max_queue=число];","context":"main","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nЗадаёт именованные пулы потоков,\nиспользуемые для многопоточной обработки операций чтения и отправки файлов\n<a href=\"http/ngx_http_core_module.html#aio\">без блокирования</a>\nрабочего процесса.\n</p><p>\nПараметр <code>threads</code>\nзадаёт число потоков в пуле.\n</p><p>\nЕсли все потоки из пула заняты выполнением заданий,\nновое задание будет ожидать своего выполнения в очереди.\nПараметр <code>max_queue</code> ограничивает число заданий,\nожидающих своего выполнения в очереди.\nПо умолчанию в очереди может находиться до 65536 заданий.\nПри переполнении очереди задание завершается с ошибкой.\n</p>"},{"directive":"tcp_nopush","defaultValue":"tcp_nopush off;","syntax":"tcp_nopush on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает использование параметра сокета\n<code>TCP_NOPUSH</code> во FreeBSD или\n<code>TCP_CORK</code> в Linux.\nПараметр включаются только при использовании <a href=\"#sendfile\">sendfile</a>.\nВключение параметра  позволяет\n</p> <ul class=\"compact\">\n\n<li>\nпередавать заголовок ответа и начало файла в одном пакете\nв Linux и во FreeBSD 4.*;\n</li>\n\n<li>\nпередавать файл полными пакетами.\n</li>\n\n</ul><p> \n</p>"},{"directive":"tcp_nodelay","defaultValue":"tcp_nodelay on;","syntax":"tcp_nodelay on | off;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.9.4.\n            </p></div><p>\nРазрешает или запрещает использование параметра <code>TCP_NODELAY</code>.\nПараметр включается как для клиентских соединений,\nтак и для соединений с проксируемыми серверами.\n</p>"},{"directive":"tcp_nodelay","defaultValue":"tcp_nodelay on;","syntax":"tcp_nodelay on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает использование параметра <code>TCP_NODELAY</code>.\nПараметр включается только при переходе соединения в состояние keep-alive.\n</p>"},{"directive":"sub_filter_types","defaultValue":"sub_filter_types text/html;","syntax":"sub_filter_types mime-тип ...;","context":"http, server, location","description":"<p>\nРазрешает замену строк в ответах с указанными MIME-типами\nв дополнение к “<code>text/html</code>”.\nСпециальное значение “<code>*</code>” соответствует любому MIME-типу\n(0.8.29).\n</p>"},{"directive":"sub_filter_once","defaultValue":"sub_filter_once on;","syntax":"sub_filter_once on | off;","context":"http, server, location","description":"<p>\nОпределяет, сколько раз нужно искать каждую из заменяемых строк:\nодин раз или многократно.\n</p>"},{"directive":"sub_filter_last_modified","defaultValue":"sub_filter_last_modified off;","syntax":"sub_filter_last_modified on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.1.\n            </p></div><p>\nПозволяет сохранить поле заголовка “Last-Modified”\nисходного ответа во время замены\nдля лучшего кэширования ответов.\n</p><p>\nПо умолчанию поле заголовка удаляется, так как содержимое ответа\nизменяется во время обработки.\n</p>"},{"directive":"sub_filter","defaultValue":"—","syntax":"sub_filter строка замена;","context":"http, server, location","description":"<p>\nЗадаёт строку, которую нужно заменить, и строку замены.\nЗаменяемая строка проверяется без учёта регистра.\nВ заменяемой строке (1.9.4) и в строке замены можно использовать переменные.\nНа одном уровне может\nбыть указано несколько директив <code>sub_filter</code> (1.9.4).\nДирективы наследуются с предыдущего уровня при условии, что\nна данном уровне не описаны свои директивы <code>sub_filter</code>.\n</p>"},{"directive":"stub_status","defaultValue":"—","syntax":"stub_status;","context":"server, location","description":"<p>\nИнформация о состоянии будет доступна из данного location.\n</p><p>\n</p> <blockquote class=\"note\">\nДо версии 1.7.5\nсинтаксис директивы требовал наличия произвольного аргумента, например\n“<code>stub_status on</code>”.\n</blockquote><p> \n</p>"},{"directive":"stream","defaultValue":"—","syntax":"stream { ... }","context":"main","description":"<p>\nПредоставляет контекст конфигурационного файла, в котором указываются\nдирективы stream-сервера.\n</p>"},{"directive":"sticky_cookie_insert","defaultValue":"—","syntax":"sticky_cookie_insert имя[expires=время][domain=домен][path=путь];","context":"upstream","description":"<p>\nЭта директива устарела начиная с версии 1.5.7.\nВместо неё следует использовать аналогичную директиву\n<a href=\"#sticky\">sticky</a> с изменённым синтаксисом:\n</p> <blockquote class=\"note\">\n<code>sticky cookie</code> <code><i>имя</i></code>\n[<code>expires=</code><code><i>время</i></code>]\n[<code>domain=</code><code><i>домен</i></code>]\n[<code>path=</code><code><i>путь</i></code>];\n</blockquote><p> \n</p>"},{"directive":"sticky","defaultValue":"—","syntax":"sticky     cookie имя    [expires=время]    [domain=домен]    [httponly]    [secure]    [path=путь];sticky     route переменная ...;sticky     learn    create=$переменная    lookup=$переменная    zone=имя:размер    [timeout=время]    [header];","context":"upstream","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nВключает режим привязки сеансов, в котором запросы клиента\nбудут передаваться на один и тот же сервер группы.\nДоступны три метода:\n</p> <dl class=\"compact\">\n<dt id=\"sticky_cookie\"><code>cookie</code></dt>\n<dd>\n\n<p>\nПри использовании метода <code>cookie</code> информация о\nназначенном сервере передаётся в HTTP-куке:\n</p> <blockquote class=\"example\"><pre>\nupstream backend {\n    server backend1.example.com;\n    server backend2.example.com;\n\n    sticky cookie srv_id expires=1h domain=.example.com path=/;\n}\n</pre></blockquote><p> \n</p>\n\n<p>\nЗапрос от клиента, ещё не привязанного к определённому серверу,\nпередаётся на сервер, выбранный согласно настроенному методу балансировки.\nДальнейшие запросы от этого клиента передаются на тот же сервер.\nЕсли назначенный сервер не может обработать запрос, выбирается новый\nсервер как если бы клиент не имел привязки к серверу.\n</p>\n\n<p>\nПервый параметр задаёт имя куки, которую необходимо установить или проверить.\nДополнительные параметры могут быть следующими:\n</p> <dl class=\"compact\">\n\n<dt><code>expires=</code><code><i>время</i></code></dt>\n<dd>\nЗадаёт <code><i>время</i></code>, в течение которого браузеру необходимо хранить куку.\nСпециальное значение <code>max</code> устанавливает срок хранения куки до\n31 декабря 2037 года 23:55:55 GMT.\nЕсли параметр не указан, то время действия куки ограничивается сессией браузера.\n</dd>\n\n<dt><code>domain=</code><code><i>домен</i></code></dt>\n<dd>\nЗадаёт <code><i>домен</i></code>, для которого устанавливается кука.\nВ значении параметра можно использовать переменные (1.11.5).\n</dd>\n\n<dt><code>httponly</code></dt>\n<dd>\nДобавляет атрибут <code>HttpOnly</code> к куке (1.7.11).\n</dd>\n\n<dt><code>secure</code></dt>\n<dd>\nДобавляет атрибут <code>Secure</code> к куке (1.7.11).\n</dd>\n\n<dt><code>path=</code><code><i>путь</i></code></dt>\n<dd>\nЗадаёт <code><i>путь</i></code>, для которого устанавливается кука.\n</dd>\n\n</dl><p> \nЕсли пропущен тот или иной параметр, то соответствующего поля в куке не будет.\n</p>\n</dd>\n\n<dt id=\"sticky_route\"><code>route</code></dt>\n<dd>\n\n<p>\nПри использовании метода <code>route</code> проксируемый сервер назначает\nклиенту маршрут по получении первого запроса.\nВсе последующие запросы от этого клиента будут содержать информацию о\nмаршруте в куке или URI.\nЭта информация сравнивается с параметром “<code>route</code>” директивы\n<a href=\"#server\">server</a> для идентификации сервера, на который\nследует проксировать запрос.\nЕсли параметр “<code>route</code>” не задан, то именем маршрута\nбудет являться MD5-хэш IP-адреса и порта\n(или пути UNIX-сокета) в шестнадцатеричном виде.\nЕсли назначенный сервер не может обработать запрос, выбирается новый сервер\nсогласно настроенному методу балансировки как если бы в запросе не было\nинформации о маршруте.\n</p>\n\n<p>\nПараметры метода <code>route</code> задают переменные, которые\nмогут содержать информацию о маршруте.\nПервая непустая переменная используется для поиска соответствующего сервера.\n</p>\n\n<p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nmap $cookie_jsessionid $route_cookie {\n    ~.+\\.(?P&lt;route&gt;\\w+)$ $route;\n}\n\nmap $request_uri $route_uri {\n    ~jsessionid=.+\\.(?P&lt;route&gt;\\w+)$ $route;\n}\n\nupstream backend {\n    server backend1.example.com route=a;\n    server backend2.example.com route=b;\n\n    sticky route $route_cookie $route_uri;\n}\n</pre></blockquote><p> \nВ этом примере маршрут берётся из куки “<code>JSESSIONID</code>”,\nесли она присутствует в запросе.\nВ противном случае используется маршрут из URI.\n</p>\n\n</dd>\n\n<dt id=\"sticky_learn\"><code>learn</code></dt>\n<dd>\n<p>\nПри использовании метода <code>learn</code> (1.7.1) nginx\nанализирует ответы от вышестоящего сервера и запоминает\nначатые им сессии, которые обычно передаются в HTTP-куке.\n</p> <blockquote class=\"example\"><pre>\nupstream backend {\n   server backend1.example.com:8080;\n   server backend2.example.com:8081;\n\n   sticky learn\n          create=$upstream_cookie_examplecookie\n          lookup=$cookie_examplecookie\n          zone=client_sessions:1m;\n}\n</pre></blockquote><p> \n\nВ примере выше сервер группы создаёт сессию путём установки\nкуки “<code>EXAMPLECOOKIE</code>” в своём ответе.\nПоследующие запросы с этой кукой будут передаваться на этот же сервер.\nЕсли сервер не может обработать запрос, выбирается новый\nсервер как если бы клиент не имел привязки к серверу.\n</p>\n\n<p>\nПараметры <code>create</code> и <code>lookup</code>\nзадают переменные, в которых соответственно указывается способ\nсоздания новых и поиска существующих сессий.\nОба параметра могут быть указаны больше одного раза\n(в этом случае используется первая непустая переменная).\n</p>\n\n<p>\nСессии хранятся в зоне разделяемой памяти, <code><i>имя</i></code> и\n<code><i>размер</i></code> которой задаются параметром <code>zone</code>.\nЗоны размером в 1 мегабайт достаточно для хранения около 8 тысяч сессий\nна 64-битной платформе.\nСессии, к которым не было обращений в течение времени, заданного параметром\n<code>timeout</code>, удаляются из зоны.\nПо умолчанию <code>timeout</code> равен 10 минутам.\n</p>"},{"directive":"status_zone","defaultValue":"—","syntax":"status_zone зона;","context":"server","description":"<p>\nВключает сбор информации о состоянии виртуального сервера группы\n<a href=\"ngx_http_core_module.html#server\">http</a>\nили\n<a href=\"../stream/ngx_stream_core_module.html#server\">stream</a>\n(1.7.11) в указанной <code><i>зоне</i></code>.\nВ одной и той же зоне может одновременно собираться информация\nсразу по нескольким серверам.\n</p>"},{"directive":"status_format","defaultValue":"status_format json;","syntax":"status_format json;status_format jsonp [callback];","context":"http, server, location","description":"<p>\nПо умолчанию информация выводится в формате JSON.\n</p><p>\nТакже данные могут выводиться в формате JSONP.\nПараметр <code><i>callback</i></code> задаёт имя callback-функции.\nЗначение может содержать переменные.\nЕсли параметр не задан или вычисленное значение является пустой строкой,\nиспользуется имя “<code>ngx_status_jsonp_callback</code>”.\n</p>"},{"directive":"status","defaultValue":"—","syntax":"status;","context":"location","description":"<p>\nИнформация о состоянии будет доступна из содержащего location.\nДоступ в location следует\n<a href=\"ngx_http_core_module.html#satisfy\">ограничить</a>.\n</p>"},{"directive":"state","defaultValue":"—","syntax":"state файл;","context":"upstream","description":"<p>Эта директива появилась в версии 1.9.7.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code>, в котором хранится состояние\nдинамически настраиваемой группы.\n</p><p>\nПримеры:\n</p> <blockquote class=\"example\"><pre>\nstate /var/lib/nginx/state/servers.conf; # путь для Linux\nstate /var/db/nginx/state/servers.conf;  # путь для FreeBSD\n</pre></blockquote><p> \n</p><p>\nВ данный момент состояние ограничено списком серверов с их параметрами.\nФайл читается при парсинге конфигурации и обновляется каждый раз при\n<a href=\"ngx_http_upstream_conf_module.html#upstream_conf\">изменении</a>\nконфигурации группы.\nИзменение содержимого файла напрямую не рекомендуется.\nДирективу нельзя использовать\nсовместно с директивой <a href=\"#server\">server</a>.\n</p><p>\n</p> <blockquote class=\"note\">\nИзменения, совершённые в момент\n<a href=\"../control.html#reconfiguration\">перезагрузки конфигурации</a>\nили <a href=\"../control.html#upgrade\">обновления бинарного файла</a>,\nмогут быть потеряны.\n</blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЭта директива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"state","defaultValue":"—","syntax":"state файл;","context":"upstream","description":"<p>Эта директива появилась в версии 1.9.7.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code>, в котором хранится состояние\nдинамически настраиваемой группы.\n</p><p>\nПримеры:\n</p> <blockquote class=\"example\"><pre>\nstate /var/lib/nginx/state/servers.conf; # путь для Linux\nstate /var/db/nginx/state/servers.conf;  # путь для FreeBSD\n</pre></blockquote><p> \n</p><p>\nВ данный момент состояние ограничено списком серверов с их параметрами.\nФайл читается при парсинге конфигурации и обновляется каждый раз при\n<a href=\"ngx_http_upstream_conf_module.html#upstream_conf\">изменении</a>\nконфигурации группы.\nИзменение содержимого файла напрямую не рекомендуется.\nДирективу нельзя использовать\nсовместно с директивой <a href=\"#server\">server</a>.\n</p><p>\n</p> <blockquote class=\"note\">\nИзменения, совершённые в момент\n<a href=\"../control.html#reconfiguration\">перезагрузки конфигурации</a>\nили <a href=\"../control.html#upgrade\">обновления бинарного файла</a>,\nмогут быть потеряны.\n</blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЭта директива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"starttls","defaultValue":"starttls off;","syntax":"starttls   on |  off |  only;","context":"mail, server","description":"<p>\n</p> <dl class=\"compact\">\n\n<dt><code>on</code></dt>\n<dd>\nразрешить использование команд <code>STLS</code> для POP3\nи <code>STARTTLS</code> для IMAP и SMTP;\n</dd>\n\n<dt><code>off</code></dt>\n<dd>\nзапретить использование команд <code>STLS</code>\nи <code>STARTTLS</code>;\n</dd>\n\n<dt><code>only</code></dt>\n<dd>\nтребовать предварительного перехода на TLS.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"ssl_verify_depth","defaultValue":"ssl_verify_depth 1;","syntax":"ssl_verify_depth число;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.8.\n            </p></div><p>\nУстанавливает глубину проверки в цепочке клиентских сертификатов.\n</p>"},{"directive":"ssl_verify_depth","defaultValue":"ssl_verify_depth 1;","syntax":"ssl_verify_depth число;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nУстанавливает глубину проверки в цепочке клиентских сертификатов.\n</p>"},{"directive":"ssl_verify_depth","defaultValue":"ssl_verify_depth 1;","syntax":"ssl_verify_depth число;","context":"http, server","description":"<p>\nУстанавливает глубину проверки в цепочке клиентских сертификатов.\n</p>"},{"directive":"ssl_verify_client","defaultValue":"ssl_verify_client off;","syntax":"ssl_verify_client     on | off |    optional | optional_no_ca;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.8.\n            </p></div><p>\nРазрешает проверку клиентских сертификатов.\nРезультат проверки доступен через переменную\n<a href=\"#var_ssl_client_verify\">$ssl_client_verify</a>.\nЕсли при проверке клиентского сертификата произошла ошибка\nили клиент не предоставил требуемый сертификат,\nсоединение закрывается.\n</p><p>\nПараметр <code>optional</code> запрашивает клиентский\nсертификат, и если сертификат был предоставлен, проверяет его.\n</p><p>\nПараметр <code>optional_no_ca</code>\nзапрашивает сертификат\nклиента, но не требует, чтобы он был подписан доверенным сертификатом CA.\nЭто предназначено для случаев, когда фактическая проверка сертификата\nосуществляется внешним по отношению к nginx’у сервисом.\nСодержимое сертификата доступно через переменную\n<a href=\"#var_ssl_client_cert\">$ssl_client_cert</a>.\n</p>"},{"directive":"ssl_verify_client","defaultValue":"ssl_verify_client off;","syntax":"ssl_verify_client     on | off |    optional | optional_no_ca;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nРазрешает проверку клиентских сертификатов.\nРезультат проверки передаётся в заголовке\n“Auth-SSL-Verify” в запросе\n<a href=\"ngx_mail_auth_http_module.html#auth_http\">аутентификации</a>.\n</p><p>\nПараметр <code>optional</code> запрашивает клиентский\nсертификат, и если сертификат был предоставлен, проверяет его.\n</p><p>\nПараметр <code>optional_no_ca</code>\nзапрашивает сертификат\nклиента, но не требует, чтобы он был подписан доверенным сертификатом CA.\nЭто предназначено для случаев, когда фактическая проверка сертификата\nосуществляется внешним по отношению к nginx’у сервисом.\nСодержимое сертификата доступно в запросах,\n<a href=\"ngx_mail_auth_http_module.html#auth_http_pass_client_cert\">посылаемых</a>\nна сервер аутентификации.\n</p>"},{"directive":"ssl_verify_client","defaultValue":"ssl_verify_client off;","syntax":"ssl_verify_client     on | off |    optional | optional_no_ca;","context":"http, server","description":"<p>\nРазрешает проверку клиентских сертификатов.\nРезультат проверки доступен через переменную\n<a href=\"#var_ssl_client_verify\">$ssl_client_verify</a>.\n</p><p>\nПараметр <code>optional</code> (0.8.7+) запрашивает клиентский\nсертификат, и если сертификат был предоставлен, проверяет его.\n</p><p>\nПараметр <code>optional_no_ca</code> (1.3.8, 1.2.5)\nзапрашивает сертификат\nклиента, но не требует, чтобы он был подписан доверенным сертификатом CA.\nЭто предназначено для случаев, когда фактическая проверка сертификата\nосуществляется внешним по отношению к nginx’у сервисом.\nСодержимое сертификата доступно через переменную\n<a href=\"#var_ssl_client_cert\">$ssl_client_cert</a>.\n</p>"},{"directive":"ssl_trusted_certificate","defaultValue":"—","syntax":"ssl_trusted_certificate файл;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.8.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с доверенными сертификатами CA в формате PEM,\nкоторые используются для <a href=\"#ssl_verify_client\">проверки</a>\nклиентских сертификатов.\n</p><p>\nВ отличие от <a href=\"#ssl_client_certificate\">ssl_client_certificate</a>, список этих сертификатов\nне будет отправляться клиентам.\n</p>"},{"directive":"ssl_trusted_certificate","defaultValue":"—","syntax":"ssl_trusted_certificate файл;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с доверенными сертификатами CA в формате PEM,\nкоторые используются для\n<a href=\"#ssl_verify_client\">проверки</a> клиентских сертификатов.\n</p><p>\nВ отличие от <a href=\"#ssl_client_certificate\">ssl_client_certificate</a>, список этих сертификатов\nне будет отправляться клиентам.\n</p>"},{"directive":"ssl_trusted_certificate","defaultValue":"—","syntax":"ssl_trusted_certificate файл;","context":"http, server","description":"<p>Эта директива появилась в версии 1.3.7.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с доверенными сертификатами CA в формате PEM,\nкоторые используются для <a href=\"#ssl_verify_client\">проверки</a>\nклиентских сертификатов и ответов OCSP,\nесли включён <a href=\"#ssl_stapling\">ssl_stapling</a>.\n</p><p>\nВ отличие от <a href=\"#ssl_client_certificate\">ssl_client_certificate</a>, список этих сертификатов\nне будет отправляться клиентам.\n</p>"},{"directive":"ssl_stapling_verify","defaultValue":"ssl_stapling_verify off;","syntax":"ssl_stapling_verify on | off;","context":"http, server","description":"<p>Эта директива появилась в версии 1.3.7.\n            </p></div><p>\nРазрешает или запрещает проверку сервером ответов OCSP.\n</p><p>\nДля работоспособности проверки сертификат издателя сертификата сервера,\nкорневой сертификат и все промежуточные сертификаты должны быть указаны\nкак доверенные с помощью директивы\n<a href=\"#ssl_trusted_certificate\">ssl_trusted_certificate</a>.\n</p>"},{"directive":"ssl_stapling_responder","defaultValue":"—","syntax":"ssl_stapling_responder url;","context":"http, server","description":"<p>Эта директива появилась в версии 1.3.7.\n            </p></div><p>\nПереопределяет URL OCSP responder’а, указанный в расширении сертификата\n“<a href=\"https://tools.ietf.org/html/rfc5280#section-4.2.2.1\">Authority\nInformation Access</a>”.\n</p><p>\nПоддерживаются только “<code>http://</code>” OCSP responder’ы:\n</p> <blockquote class=\"example\"><pre>\nssl_stapling_responder http://ocsp.example.com/;\n</pre></blockquote><p> \n</p>"},{"directive":"ssl_stapling_file","defaultValue":"—","syntax":"ssl_stapling_file файл;","context":"http, server","description":"<p>Эта директива появилась в версии 1.3.7.\n            </p></div><p>\nЕсли задано, то вместо опроса OCSP responder’а,\nуказанного в сертификате сервера,\nответ берётся из указанного <code><i>файла</i></code>.\n</p><p>\nОтвет должен быть в формате DER и может быть сгенерирован командой\n“<code>openssl ocsp</code>”.\n</p>"},{"directive":"ssl_stapling","defaultValue":"ssl_stapling off;","syntax":"ssl_stapling on | off;","context":"http, server","description":"<p>Эта директива появилась в версии 1.3.7.\n            </p></div><p>\nРазрешает или запрещает\n<a href=\"https://tools.ietf.org/html/rfc4366#section-3.6\">прикрепление\nOCSP-ответов</a> сервером.\nПример:\n</p> <blockquote class=\"example\"><pre>\nssl_stapling on;\nresolver 192.0.2.1;\n</pre></blockquote><p> \n</p><p>\nДля работы OCSP stapling’а должен быть известен сертификат издателя\nсертификата сервера.\nЕсли в заданном директивой <a href=\"#ssl_certificate\">ssl_certificate</a>\nфайле не содержится промежуточных сертификатов,\nто сертификат издателя сертификата сервера следует поместить в файл,\nзаданный директивой <a href=\"#ssl_trusted_certificate\">ssl_trusted_certificate</a>.\n</p><p>\nДля преобразования имени хоста OCSP responder’а в адрес необходимо\nдополнительно задать директиву\n<a href=\"ngx_http_core_module.html#resolver\">resolver</a>.\n</p>"},{"directive":"ssl_session_timeout","defaultValue":"ssl_session_timeout 5m;","syntax":"ssl_session_timeout время;","context":"stream, server","description":"<p>\nЗадаёт время, в течение которого клиент может повторно\nиспользовать параметры сессии.\n</p>"},{"directive":"ssl_session_timeout","defaultValue":"ssl_session_timeout 5m;","syntax":"ssl_session_timeout время;","context":"mail, server","description":"<p>\nЗадаёт время, в течение которого клиент может повторно\nиспользовать параметры сессии.\n</p>"},{"directive":"ssl_session_timeout","defaultValue":"ssl_session_timeout 5m;","syntax":"ssl_session_timeout время;","context":"http, server","description":"<p>\nЗадаёт время, в течение которого клиент может повторно\nиспользовать параметры сессии.\n</p>"},{"directive":"ssl_session_tickets","defaultValue":"ssl_session_tickets on;","syntax":"ssl_session_tickets on | off;","context":"stream, server","description":"<p>\nРазрешает или запрещает возобновление сессий при помощи\n<a href=\"https://tools.ietf.org/html/rfc5077\">TLS session tickets</a>.\n</p>"},{"directive":"ssl_session_tickets","defaultValue":"ssl_session_tickets on;","syntax":"ssl_session_tickets on | off;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.5.9.\n            </p></div><p>\nРазрешает или запрещает возобновление сессий при помощи\n<a href=\"https://tools.ietf.org/html/rfc5077\">TLS session tickets</a>.\n</p>"},{"directive":"ssl_session_tickets","defaultValue":"ssl_session_tickets on;","syntax":"ssl_session_tickets on | off;","context":"http, server","description":"<p>Эта директива появилась в версии 1.5.9.\n            </p></div><p>\nРазрешает или запрещает возобновление сессий при помощи\n<a href=\"https://tools.ietf.org/html/rfc5077\">TLS session tickets</a>.\n</p>"},{"directive":"ssl_session_ticket_key","defaultValue":"—","syntax":"ssl_session_ticket_key файл;","context":"stream, server","description":"<p>\nЗадаёт <code><i>файл</i></code> с секретным ключом, применяемым при шифровании и\nрасшифровании TLS session tickets.\nДиректива необходима, если один и тот же ключ нужно использовать\nна нескольких серверах.\nПо умолчанию используется случайно сгенерированный ключ.\n</p><p>\nЕсли указано несколько ключей, то только первый ключ\nиспользуется для шифрования TLS session tickets.\nЭто позволяет настроить ротацию ключей, например:\n</p> <blockquote class=\"example\"><pre>\nssl_session_ticket_key current.key;\nssl_session_ticket_key previous.key;\n</pre></blockquote><p> \n</p><p>\n<code><i>Файл</i></code> должен содержать 80 или 48 байт случайных данных\nи может быть создан следующей командой:\n</p> <blockquote class=\"example\"><pre>\nopenssl rand 80 &gt; ticket.key\n</pre></blockquote><p> \nВ зависимости от размера файла для шифрования будет использоваться либо \nAES256 (для 80-байтных ключей, 1.11.8), либо AES128 (для 48-байтных ключей).\n</p>"},{"directive":"ssl_session_ticket_key","defaultValue":"—","syntax":"ssl_session_ticket_key файл;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с секретным ключом, применяемым при шифровании и\nрасшифровании TLS session tickets.\nДиректива необходима, если один и тот же ключ нужно использовать\nна нескольких серверах.\nПо умолчанию используется случайно сгенерированный ключ.\n</p><p>\nЕсли указано несколько ключей, то только первый ключ\nиспользуется для шифрования TLS session tickets.\nЭто позволяет настроить ротацию ключей, например:\n</p> <blockquote class=\"example\"><pre>\nssl_session_ticket_key current.key;\nssl_session_ticket_key previous.key;\n</pre></blockquote><p> \n</p><p>\n<code><i>Файл</i></code> должен содержать 80 или 48 байт случайных данных\nи может быть создан следующей командой:\n</p> <blockquote class=\"example\"><pre>\nopenssl rand 80 &gt; ticket.key\n</pre></blockquote><p> \nВ зависимости от размера файла для шифрования будет использоваться либо \nAES256 (для 80-байтных ключей, 1.11.8), либо AES128 (для 48-байтных ключей).\n</p>"},{"directive":"ssl_session_ticket_key","defaultValue":"—","syntax":"ssl_session_ticket_key файл;","context":"http, server","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с секретным ключом, применяемым при шифровании и\nрасшифровании TLS session tickets.\nДиректива необходима, если один и тот же ключ нужно использовать\nна нескольких серверах.\nПо умолчанию используется случайно сгенерированный ключ.\n</p><p>\nЕсли указано несколько ключей, то только первый ключ\nиспользуется для шифрования TLS session tickets.\nЭто позволяет настроить ротацию ключей, например:\n</p> <blockquote class=\"example\"><pre>\nssl_session_ticket_key current.key;\nssl_session_ticket_key previous.key;\n</pre></blockquote><p> \n</p><p>\n<code><i>Файл</i></code> должен содержать 80 или 48 байт случайных данных\nи может быть создан следующей командой:\n</p> <blockquote class=\"example\"><pre>\nopenssl rand 80 &gt; ticket.key\n</pre></blockquote><p> \nВ зависимости от размера файла для шифрования будет использоваться либо \nAES256 (для 80-байтных ключей, 1.11.8), либо AES128 (для 48-байтных ключей).\n</p>"},{"directive":"ssl_session_cache","defaultValue":"ssl_session_cache none;","syntax":"ssl_session_cache     off |    none |    [builtin[:размер]]    [shared:название:размер];","context":"stream, server","description":"<p>\nЗадаёт тип и размеры кэшей для хранения параметров сессий.\nТип кэша может быть следующим:\n</p> <dl class=\"compact\">\n\n<dt><code>off</code></dt>\n<dd>\nжёсткое запрещение использования кэша сессий:\nnginx явно сообщает клиенту, что сессии не могут использоваться повторно.\n</dd>\n\n<dt><code>none</code></dt>\n<dd>\nмягкое запрещение использования кэша сессий:\nnginx сообщает клиенту, что сессии могут использоваться повторно, но\nна самом деле не хранит параметры сессии в кэше.\n</dd>\n\n<dt><code>builtin</code></dt>\n<dd>\nвстроенный в OpenSSL кэш, используется в рамках только одного рабочего процесса.\nРазмер кэша задаётся в сессиях.\nЕсли размер не задан, то он равен 20480 сессиям.\nИспользование встроенного кэша может вести к фрагментации памяти.\n</dd>\n\n<dt><code>shared</code></dt>\n<dd>\nкэш, разделяемый между всеми рабочими процессами.\nРазмер кэша задаётся в байтах, в 1 мегабайт может поместиться\nоколо 4000 сессий.\nУ каждого разделяемого кэша должно быть произвольное название.\nКэш с одинаковым названием может использоваться в нескольких\nсерверах.\n</dd>\n\n</dl><p> \n</p><p>\nМожно использовать одновременно оба типа кэша, например:\n</p> <blockquote class=\"example\"><pre>\nssl_session_cache builtin:1000 shared:SSL:10m;\n</pre></blockquote><p> \nоднако использование только разделяемого кэша без встроенного должно\nбыть более эффективным.\n</p>"},{"directive":"ssl_session_cache","defaultValue":"ssl_session_cache none;","syntax":"ssl_session_cache     off |    none |    [builtin[:размер]]    [shared:название:размер];","context":"mail, server","description":"<p>\nЗадаёт тип и размеры кэшей для хранения параметров сессий.\nТип кэша может быть следующим:\n</p> <dl>\n\n<dt><code>off</code></dt>\n<dd>\nжёсткое запрещение использования кэша сессий:\nnginx явно сообщает клиенту, что сессии не могут использоваться повторно.\n</dd>\n\n<dt><code>none</code></dt>\n<dd>\nмягкое запрещение использования кэша сессий:\nnginx сообщает клиенту, что сессии могут использоваться повторно, но\nна самом деле не хранит параметры сессии в кэше.\n</dd>\n\n<dt><code>builtin</code></dt>\n<dd>\nвстроенный в OpenSSL кэш, используется в рамках только одного рабочего процесса.\nРазмер кэша задаётся в сессиях.\nЕсли размер не задан, то он равен 20480 сессиям.\nИспользование встроенного кэша может вести к фрагментации памяти.\n</dd>\n\n<dt><code>shared</code></dt>\n<dd>\nкэш, разделяемый между всеми рабочими процессами.\nРазмер кэша задаётся в байтах, в 1 мегабайт может поместиться\nоколо 4000 сессий.\nУ каждого разделяемого кэша должно быть произвольное название.\nКэш с одинаковым названием может использоваться в нескольких\nсерверах.\n</dd>\n\n</dl><p> \n</p><p>\nМожно использовать одновременно оба типа кэша, например:\n</p> <blockquote class=\"example\"><pre>\nssl_session_cache builtin:1000 shared:SSL:10m;\n</pre></blockquote><p> \nоднако использование только разделяемого кэша без встроенного должно\nбыть более эффективным.\n</p>"},{"directive":"ssl_session_cache","defaultValue":"ssl_session_cache none;","syntax":"ssl_session_cache     off |    none |    [builtin[:размер]]    [shared:название:размер];","context":"http, server","description":"<p>\nЗадаёт тип и размеры кэшей для хранения параметров сессий.\nТип кэша может быть следующим:\n</p> <dl class=\"compact\">\n\n<dt><code>off</code></dt>\n<dd>\nжёсткое запрещение использования кэша сессий:\nnginx явно сообщает клиенту, что сессии не могут использоваться повторно.\n</dd>\n\n<dt><code>none</code></dt>\n<dd>\nмягкое запрещение использования кэша сессий:\nnginx сообщает клиенту, что сессии могут использоваться повторно, но\nна самом деле не хранит параметры сессии в кэше.\n</dd>\n\n<dt><code>builtin</code></dt>\n<dd>\nвстроенный в OpenSSL кэш, используется в рамках только одного рабочего процесса.\nРазмер кэша задаётся в сессиях.\nЕсли размер не задан, то он равен 20480 сессиям.\nИспользование встроенного кэша может вести к фрагментации памяти.\n</dd>\n\n<dt><code>shared</code></dt>\n<dd>\nкэш, разделяемый между всеми рабочими процессами.\nРазмер кэша задаётся в байтах, в 1 мегабайт может поместиться\nоколо 4000 сессий.\nУ каждого разделяемого кэша должно быть произвольное название.\nКэш с одинаковым названием может использоваться в нескольких\nвиртуальных серверах.\n</dd>\n\n</dl><p> \n</p><p>\nМожно использовать одновременно оба типа кэша, например:\n</p> <blockquote class=\"example\"><pre>\nssl_session_cache builtin:1000 shared:SSL:10m;\n</pre></blockquote><p> \nоднако использование только разделяемого кэша без встроенного должно\nбыть более эффективным.\n</p>"},{"directive":"ssl_protocols","defaultValue":"ssl_protocols TLSv1 TLSv1.1 TLSv1.2;","syntax":"ssl_protocols     [SSLv2]    [SSLv3]    [TLSv1]    [TLSv1.1]    [TLSv1.2]    [TLSv1.3];","context":"stream, server","description":"<p>\nРазрешает указанные протоколы.\n</p> <blockquote class=\"note\">\nПараметры <code>TLSv1.1</code> и <code>TLSv1.2</code>\nработают только при использовании OpenSSL 1.0.1 и выше.\n</blockquote><p> \n</p> <blockquote class=\"note\">\nПараметр <code>TLSv1.3</code> (1.13.0) работает только\nпри использовании OpenSSL 1.1.1, собранной с поддержкой TLSv1.3.\n</blockquote><p> \n</p>"},{"directive":"ssl_protocols","defaultValue":"ssl_protocols TLSv1 TLSv1.1 TLSv1.2;","syntax":"ssl_protocols     [SSLv2]    [SSLv3]    [TLSv1]    [TLSv1.1]    [TLSv1.2]    [TLSv1.3];","context":"mail, server","description":"<p>\nРазрешает указанные протоколы.\n</p> <blockquote class=\"note\">\nПараметры <code>TLSv1.1</code> и <code>TLSv1.2</code>\n(1.1.13, 1.0.12) работают только при использовании OpenSSL 1.0.1 и выше.\n</blockquote><p> \n</p> <blockquote class=\"note\">\nПараметр <code>TLSv1.3</code> (1.13.0) работает только\nпри использовании OpenSSL 1.1.1, собранной с поддержкой TLSv1.3.\n</blockquote><p> \n</p>"},{"directive":"ssl_protocols","defaultValue":"ssl_protocols TLSv1 TLSv1.1 TLSv1.2;","syntax":"ssl_protocols     [SSLv2]    [SSLv3]    [TLSv1]    [TLSv1.1]    [TLSv1.2]    [TLSv1.3];","context":"http, server","description":"<p>\nРазрешает указанные протоколы.\n</p> <blockquote class=\"note\">\nПараметры <code>TLSv1.1</code> и <code>TLSv1.2</code>\n(1.1.13, 1.0.12) работают только при использовании OpenSSL 1.0.1 и выше.\n</blockquote><p> \n</p> <blockquote class=\"note\">\nПараметр <code>TLSv1.3</code> (1.13.0) работает только\nпри использовании OpenSSL 1.1.1, собранной с поддержкой TLSv1.3.\n</blockquote><p> \n</p>"},{"directive":"ssl_preread","defaultValue":"ssl_preread off;","syntax":"ssl_preread on | off;","context":"stream, server","description":"<p>\nРазрешает извлечение информации из сообщения ClientHello во время фазы\n<a href=\"stream_processing.html#preread_phase\">предварительного чтения</a>.\n</p>"},{"directive":"ssl_prefer_server_ciphers","defaultValue":"ssl_prefer_server_ciphers off;","syntax":"ssl_prefer_server_ciphers on | off;","context":"stream, server","description":"<p>\nУказывает, чтобы при использовании протоколов SSLv3 и TLS\nсерверные шифры были более приоритетны, чем клиентские.\n</p>"},{"directive":"ssl_prefer_server_ciphers","defaultValue":"ssl_prefer_server_ciphers off;","syntax":"ssl_prefer_server_ciphers on | off;","context":"mail, server","description":"<p>\nУказывает, чтобы при использовании протоколов SSLv3 и TLS\nсерверные шифры были более приоритетны, чем клиентские.\n</p>"},{"directive":"ssl_prefer_server_ciphers","defaultValue":"ssl_prefer_server_ciphers off;","syntax":"ssl_prefer_server_ciphers on | off;","context":"http, server","description":"<p>\nУказывает, чтобы при использовании протоколов SSLv3 и TLS\nсерверные шифры были более приоритетны, чем клиентские.\n</p>"},{"directive":"ssl_password_file","defaultValue":"—","syntax":"ssl_password_file файл;","context":"stream, server","description":"<p>\nЗадаёт <code><i>файл</i></code> с паролями от\n<a href=\"#ssl_certificate_key\">секретных ключей</a>,\nгде каждый пароль указан на отдельной строке.\nПароли применяются по очереди в момент загрузки ключа.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nstream {\n    ssl_password_file /etc/keys/global.pass;\n    ...\n\n    server {\n        listen 127.0.0.1:12345;\n        ssl_certificate_key /etc/keys/first.key;\n    }\n\n    server {\n        listen 127.0.0.1:12346;\n\n        # вместо файла можно указать именованный канал\n        ssl_password_file /etc/keys/fifo;\n        ssl_certificate_key /etc/keys/second.key;\n    }\n}\n</pre></blockquote><p> \n</p>"},{"directive":"ssl_password_file","defaultValue":"—","syntax":"ssl_password_file файл;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.7.3.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с паролями от\n<a href=\"#ssl_certificate_key\">секретных ключей</a>,\nгде каждый пароль указан на отдельной строке.\nПароли применяются по очереди в момент загрузки ключа.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nmail {\n    ssl_password_file /etc/keys/global.pass;\n    ...\n\n    server {\n        server_name mail1.example.com;\n        ssl_certificate_key /etc/keys/first.key;\n    }\n\n    server {\n        server_name mail2.example.com;\n\n        # вместо файла можно указать именованный канал\n        ssl_password_file /etc/keys/fifo;\n        ssl_certificate_key /etc/keys/second.key;\n    }\n}\n</pre></blockquote><p> \n</p>"},{"directive":"ssl_password_file","defaultValue":"—","syntax":"ssl_password_file файл;","context":"http, server","description":"<p>Эта директива появилась в версии 1.7.3.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с паролями от\n<a href=\"#ssl_certificate_key\">секретных ключей</a>,\nгде каждый пароль указан на отдельной строке.\nПароли применяются по очереди в момент загрузки ключа.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nhttp {\n    ssl_password_file /etc/keys/global.pass;\n    ...\n\n    server {\n        server_name www1.example.com;\n        ssl_certificate_key /etc/keys/first.key;\n    }\n\n    server {\n        server_name www2.example.com;\n\n        # вместо файла можно указать именованный канал\n        ssl_password_file /etc/keys/fifo;\n        ssl_certificate_key /etc/keys/second.key;\n    }\n}\n</pre></blockquote><p> \n</p>"},{"directive":"ssl_handshake_timeout","defaultValue":"ssl_handshake_timeout 60s;","syntax":"ssl_handshake_timeout время;","context":"stream, server","description":"<p>\nЗадаёт таймаут для завершения операции SSL handshake.\n</p>"},{"directive":"ssl_engine","defaultValue":"—","syntax":"ssl_engine устройство;","context":"main","description":"<p>\nЗадаёт название аппаратного SSL-акселератора.\n</p>"},{"directive":"ssl_ecdh_curve","defaultValue":"ssl_ecdh_curve auto;","syntax":"ssl_ecdh_curve кривая;","context":"stream, server","description":"<p>\nЗадаёт <code><i>кривую</i></code> для ECDHE-шифров.\n</p><p>\nПри использовании OpenSSL 1.0.2 и выше\nможно указывать несколько кривых (1.11.0), например:\n</p> <blockquote class=\"example\"><pre>\nssl_ecdh_curve prime256v1:secp384r1;\n</pre></blockquote><p> \n</p><p>\nСпециальное значение <code>auto</code> (1.11.0) соответствует\nвстроенному в библиотеку OpenSSL списку кривых для OpenSSL 1.0.2 и выше,\nили <code>prime256v1</code> для более старых версий.\n</p><p>\n</p> <blockquote class=\"note\">\nДо версии 1.11.0\nпо умолчанию использовалась кривая <code>prime256v1</code>.\n</blockquote><p> \n</p>"},{"directive":"ssl_ecdh_curve","defaultValue":"ssl_ecdh_curve auto;","syntax":"ssl_ecdh_curve кривая;","context":"mail, server","description":"<p>\n                    Эта директива появилась в версиях 1.1.0 и 1.0.6.\n                    \n                        </p>\n                    </div><p>\nЗадаёт кривую для ECDHE-шифров.\n</p><p>\nПри использовании OpenSSL 1.0.2 и выше\nможно указывать несколько кривых (1.11.0), например:\n</p> <blockquote class=\"example\"><pre>\nssl_ecdh_curve prime256v1:secp384r1;\n</pre></blockquote><p> \n</p><p>\nСпециальное значение <code>auto</code> (1.11.0) соответствует\nвстроенному в библиотеку OpenSSL списку кривых для OpenSSL 1.0.2 и выше,\nили <code>prime256v1</code> для более старых версий.\n</p><p>\n</p> <blockquote class=\"note\">\nДо версии 1.11.0\nпо умолчанию использовалась кривая <code>prime256v1</code>.\n</blockquote><p> \n</p>"},{"directive":"ssl_ecdh_curve","defaultValue":"ssl_ecdh_curve auto;","syntax":"ssl_ecdh_curve кривая;","context":"http, server","description":"<p>\n                    Эта директива появилась в версиях 1.1.0 и 1.0.6.\n                    \n                        </p>\n                    </div><p>\nЗадаёт кривую для ECDHE-шифров.\n</p><p>\nПри использовании OpenSSL 1.0.2 и выше\nможно указывать несколько кривых (1.11.0), например:\n</p> <blockquote class=\"example\"><pre>\nssl_ecdh_curve prime256v1:secp384r1;\n</pre></blockquote><p> \n</p><p>\nСпециальное значение <code>auto</code> (1.11.0) соответствует\nвстроенному в библиотеку OpenSSL списку кривых для OpenSSL 1.0.2 и выше,\nили <code>prime256v1</code> для более старых версий.\n</p><p>\n</p> <blockquote class=\"note\">\nДо версии 1.11.0\nпо умолчанию использовалась кривая <code>prime256v1</code>.\n</blockquote><p> \n</p>"},{"directive":"ssl_dhparam","defaultValue":"—","syntax":"ssl_dhparam файл;","context":"stream, server","description":"<p>\nУказывает <code><i>файл</i></code> с параметрами для DHE-шифров.\n</p>"},{"directive":"ssl_dhparam","defaultValue":"—","syntax":"ssl_dhparam файл;","context":"mail, server","description":"<p>Эта директива появилась в версии 0.7.2.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с параметрами для DHE-шифров.\n</p>"},{"directive":"ssl_dhparam","defaultValue":"—","syntax":"ssl_dhparam файл;","context":"http, server","description":"<p>Эта директива появилась в версии 0.7.2.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с параметрами для DHE-шифров.\n</p>"},{"directive":"ssl_crl","defaultValue":"—","syntax":"ssl_crl файл;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.8.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с отозванными сертификатами (CRL)\nв формате PEM, используемыми для\n<a href=\"#ssl_verify_client\">проверки</a> клиентских сертификатов.\n</p>"},{"directive":"ssl_crl","defaultValue":"—","syntax":"ssl_crl файл;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с отозванными сертификатами (CRL)\nв формате PEM, используемыми для\n<a href=\"#ssl_verify_client\">проверки</a> клиентских сертификатов.\n</p>"},{"directive":"ssl_crl","defaultValue":"—","syntax":"ssl_crl файл;","context":"http, server","description":"<p>Эта директива появилась в версии 0.8.7.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с отозванными сертификатами (CRL)\nв формате PEM, используемыми для\n<a href=\"#ssl_verify_client\">проверки</a> клиентских сертификатов.\n</p>"},{"directive":"ssl_client_certificate","defaultValue":"—","syntax":"ssl_client_certificate файл;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.8.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с доверенными сертификатами CA в формате\nPEM, которые используются для\n<a href=\"#ssl_verify_client\">проверки</a> клиентских сертификатов.\n</p><p>\nСписок сертификатов будет отправляться клиентам.\nЕсли это нежелательно, можно воспользоваться директивой\n<a href=\"#ssl_trusted_certificate\">ssl_trusted_certificate</a>.\n</p>"},{"directive":"ssl_client_certificate","defaultValue":"—","syntax":"ssl_client_certificate файл;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с доверенными сертификатами CA в формате\nPEM, которые используются для\n<a href=\"#ssl_verify_client\">проверки</a> клиентских сертификатов.\n</p><p>\nСписок сертификатов будет отправляться клиентам.\nЕсли это нежелательно, можно воспользоваться директивой\n<a href=\"#ssl_trusted_certificate\">ssl_trusted_certificate</a>.\n</p>"},{"directive":"ssl_client_certificate","defaultValue":"—","syntax":"ssl_client_certificate файл;","context":"http, server","description":"<p>\nУказывает <code><i>файл</i></code> с доверенными сертификатами CA в формате\nPEM, которые используются для\n<a href=\"#ssl_verify_client\">проверки</a> клиентских сертификатов и\nответов OCSP, если включён <a href=\"#ssl_stapling\">ssl_stapling</a>.\n</p><p>\nСписок сертификатов будет отправляться клиентам.\nЕсли это нежелательно, можно воспользоваться директивой\n<a href=\"#ssl_trusted_certificate\">ssl_trusted_certificate</a>.\n</p>"},{"directive":"ssl_ciphers","defaultValue":"ssl_ciphers HIGH:!aNULL:!MD5;","syntax":"ssl_ciphers шифры;","context":"stream, server","description":"<p>\nОписывает разрешённые шифры.\nШифры задаются в формате, поддерживаемом библиотекой\nOpenSSL, например:\n</p> <blockquote class=\"example\"><pre>\nssl_ciphers ALL:!aNULL:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;\n</pre></blockquote><p> \n</p><p>\nПолный список можно посмотреть с помощью команды\n“<code>openssl ciphers</code>”.\n</p>"},{"directive":"ssl_ciphers","defaultValue":"ssl_ciphers HIGH:!aNULL:!MD5;","syntax":"ssl_ciphers шифры;","context":"mail, server","description":"<p>\nОписывает разрешённые шифры.\nШифры задаются в формате, поддерживаемом библиотекой\nOpenSSL, например:\n</p> <blockquote class=\"example\"><pre>\nssl_ciphers ALL:!aNULL:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;\n</pre></blockquote><p> \n</p><p>\nПолный список можно посмотреть с помощью команды\n“<code>openssl ciphers</code>”.\n</p><p>\n</p> <blockquote class=\"note\">\nВ предыдущих версиях nginx по умолчанию использовались\n<a href=\"../http/configuring_https_servers.html#compatibility\">другие</a>\nшифры.\n</blockquote><p> \n</p>"},{"directive":"ssl_ciphers","defaultValue":"ssl_ciphers HIGH:!aNULL:!MD5;","syntax":"ssl_ciphers шифры;","context":"http, server","description":"<p>\nОписывает разрешённые шифры.\nШифры задаются в формате, поддерживаемом библиотекой\nOpenSSL, например:\n</p> <blockquote class=\"example\"><pre>\nssl_ciphers ALL:!aNULL:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;\n</pre></blockquote><p> \n</p><p>\nПолный список можно посмотреть с помощью команды\n“<code>openssl ciphers</code>”.\n</p><p>\n</p> <blockquote class=\"note\">\nВ предыдущих версиях nginx по умолчанию использовались\n<a href=\"configuring_https_servers.html#compatibility\">другие</a>\nшифры.\n</blockquote><p> \n</p>"},{"directive":"ssl_certificate_key","defaultValue":"—","syntax":"ssl_certificate_key файл;","context":"stream, server","description":"<p>\nУказывает <code><i>файл</i></code> с секретным ключом в формате PEM\nдля данного сервера.\n</p><p>\nВместо <code><i>файла</i></code> можно указать значение\n<code>engine</code>:<code><i>имя</i></code>:<code><i>id</i></code>,\nкоторое загружает ключ с указанным <code><i>id</i></code>\nиз OpenSSL engine с заданным <code><i>именем</i></code>.\n</p>"},{"directive":"ssl_certificate_key","defaultValue":"—","syntax":"ssl_certificate_key файл;","context":"mail, server","description":"<p>\nУказывает <code><i>файл</i></code> с секретным ключом в формате PEM\nдля данного сервера.\n</p><p>\nВместо <code><i>файла</i></code> можно указать значение\n<code>engine</code>:<code><i>имя</i></code>:<code><i>id</i></code> (1.7.9),\nкоторое загружает ключ с указанным <code><i>id</i></code>\nиз OpenSSL engine с заданным <code><i>именем</i></code>.\n</p>"},{"directive":"ssl_certificate_key","defaultValue":"—","syntax":"ssl_certificate_key файл;","context":"http, server","description":"<p>\nУказывает <code><i>файл</i></code> с секретным ключом в формате PEM\nдля данного виртуального сервера.\n</p><p>\nВместо <code><i>файла</i></code> можно указать значение\n<code>engine</code>:<code><i>имя</i></code>:<code><i>id</i></code> (1.7.9),\nкоторое загружает ключ с указанным <code><i>id</i></code>\nиз OpenSSL engine с заданным <code><i>именем</i></code>.\n</p>"},{"directive":"ssl_certificate","defaultValue":"—","syntax":"ssl_certificate файл;","context":"stream, server","description":"<p>\nУказывает <code><i>файл</i></code> с сертификатом в формате PEM\nдля данного сервера.\nЕсли вместе с основным сертификатом нужно указать промежуточные,\nто они должны находиться в этом же файле в следующем порядке — сначала\nосновной сертификат, а затем промежуточные.\nВ этом же файле может находиться секретный ключ в формате PEM.\n</p><p>\nНачиная с версии 1.11.0\nэта директива может быть указана несколько раз\nдля загрузки сертификатов разных типов, например RSA и ECDSA:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    listen              12345 ssl;\n\n    ssl_certificate     example.com.rsa.crt;\n    ssl_certificate_key example.com.rsa.key;\n\n    ssl_certificate     example.com.ecdsa.crt;\n    ssl_certificate_key example.com.ecdsa.key;\n\n    ...\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nВозможность задавать отдельные цепочки сертификатов для разных сертификатов\nесть только в OpenSSL 1.0.2 и выше.\nДля более старых версий следует указывать только одну цепочку сертификатов.\n</blockquote><p> \n</p>"},{"directive":"ssl_certificate","defaultValue":"—","syntax":"ssl_certificate файл;","context":"mail, server","description":"<p>\nУказывает <code><i>файл</i></code> с сертификатом в формате PEM\nдля данного сервера.\nЕсли вместе с основным сертификатом нужно указать промежуточные,\nто они должны находиться в этом же файле в следующем порядке: сначала\nосновной сертификат, а затем промежуточные.\nВ этом же файле может находиться секретный ключ в формате PEM.\n</p><p>\nНачиная с версии 1.11.0\nэта директива может быть указана несколько раз\nдля загрузки сертификатов разных типов, например RSA и ECDSA:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    listen              993 ssl;\n\n    ssl_certificate     example.com.rsa.crt;\n    ssl_certificate_key example.com.rsa.key;\n\n    ssl_certificate     example.com.ecdsa.crt;\n    ssl_certificate_key example.com.ecdsa.key;\n\n    ...\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nВозможность задавать отдельные цепочки сертификатов для разных сертификатов\nесть только в OpenSSL 1.0.2 и выше.\nДля более старых версий следует указывать только одну цепочку сертификатов.\n</blockquote><p> \n</p>"},{"directive":"ssl_certificate","defaultValue":"—","syntax":"ssl_certificate файл;","context":"http, server","description":"<p>\nУказывает <code><i>файл</i></code> с сертификатом в формате PEM\nдля данного виртуального сервера.\nЕсли вместе с основным сертификатом нужно указать промежуточные,\nто они должны находиться в этом же файле в следующем порядке: сначала\nосновной сертификат, а затем промежуточные.\nВ этом же файле может находиться секретный ключ в формате PEM.\n</p><p>\nНачиная с версии 1.11.0\nэта директива может быть указана несколько раз\nдля загрузки сертификатов разных типов, например RSA и ECDSA:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    listen              443 ssl;\n    server_name         example.com;\n\n    ssl_certificate     example.com.rsa.crt;\n    ssl_certificate_key example.com.rsa.key;\n\n    ssl_certificate     example.com.ecdsa.crt;\n    ssl_certificate_key example.com.ecdsa.key;\n\n    ...\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nВозможность задавать отдельные\n<a href=\"configuring_https_servers.html#chains\">цепочки\nсертификатов</a>\nдля разных сертификатов есть только в OpenSSL 1.0.2 и выше.\nДля более старых версий следует указывать только одну цепочку сертификатов.\n</blockquote><p> \n</p><p>\nНужно иметь в виду, что из-за ограничения протокола HTTPS\nвиртуальные серверы должны слушать на разных IP-адресах:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    listen          192.168.1.1:443;\n    server_name     one.example.com;\n    ssl_certificate one.example.com.crt;\n    ...\n}\n\nserver {\n    listen          192.168.1.2:443;\n    server_name     two.example.com;\n    ssl_certificate two.example.com.crt;\n    ...\n}\n</pre></blockquote><p> \nиначе для второго сайта будет выдаваться\n<a href=\"configuring_https_servers.html#name_based_https_servers\">сертификат первого сервера</a>.\n</p>"},{"directive":"ssl_buffer_size","defaultValue":"ssl_buffer_size 16k;","syntax":"ssl_buffer_size size;","context":"http, server","description":"<p>Эта директива появилась в версии 1.5.9.\n            </p></div><p>\nЗадаёт размер буфера, используемого при отправке данных.\n</p><p>\nПо умолчанию размер буфера равен 16k, что соответствует минимальным\nнакладным расходам при передаче больших ответов.\nС целью минимизации времени получения начала ответа (Time To First Byte)\nможет быть полезно использовать меньшие значения,\nнапример:\n</p> <blockquote class=\"example\"><pre>\nssl_buffer_size 4k;\n</pre></blockquote><p> \n</p>"},{"directive":"ssl","defaultValue":"ssl off;","syntax":"ssl on | off;","context":"mail, server","description":"<p>\nВключает протокол SSL/TLS для данного сервера.\n</p>"},{"directive":"ssl","defaultValue":"ssl off;","syntax":"ssl on | off;","context":"http, server","description":"<p>\nВключает протокол HTTPS для данного виртуального сервера.\n</p> <blockquote class=\"note\">\nВместо этой директивы рекомендуется использовать параметр\n<code>ssl</code> директивы\n<a href=\"ngx_http_core_module.html#listen\">listen</a>.\n</blockquote><p> \n</p>"},{"directive":"ssi_value_length","defaultValue":"ssi_value_length 256;","syntax":"ssi_value_length длина;","context":"http, server, location","description":"<p>\nЗадаёт максимальную длину значений параметров в SSI-командах.\n</p>"},{"directive":"ssi_types","defaultValue":"ssi_types text/html;","syntax":"ssi_types mime-тип ...;","context":"http, server, location","description":"<p>\nРазрешает обработку команд SSI в ответах с указанными MIME-типами\nв дополнение к “<code>text/html</code>”.\nСпециальное значение “<code>*</code>” соответствует любому MIME-типу\n(0.8.29).\n</p>"},{"directive":"ssi_silent_errors","defaultValue":"ssi_silent_errors off;","syntax":"ssi_silent_errors on | off;","context":"http, server, location","description":"<p>\nРазрешает не выводить строку\n“<code>[an error occurred while processing the directive]</code>”,\nесли во время обработки SSI произошла ошибка.\n</p>"},{"directive":"ssi_min_file_chunk","defaultValue":"ssi_min_file_chunk 1k;","syntax":"ssi_min_file_chunk размер;","context":"http, server, location","description":"<p>\nЗадаёт минимальный <code><i>размер</i></code> частей ответа, хранящихся\nна диске, начиная с которого имеет смысл посылать их с помощью\n<a href=\"ngx_http_core_module.html#sendfile\">sendfile</a>.\n</p>"},{"directive":"ssi_last_modified","defaultValue":"ssi_last_modified off;","syntax":"ssi_last_modified on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.1.\n            </p></div><p>\nПозволяет сохранить поле заголовка “Last-Modified”\nисходного ответа во время обработки SSI\nдля лучшего кэширования ответов.\n</p><p>\nПо умолчанию поле заголовка удаляется, так как содержимое ответа\nизменяется во время обработки и может содержать динамически созданные\nэлементы или части, которые изменились независимо от исходного ответа.\n</p>"},{"directive":"ssi","defaultValue":"ssi off;","syntax":"ssi on | off;","context":"http, server, location, if в location","description":"<p>\nРазрешает или запрещает обработку команд SSI в ответах.\n</p>"},{"directive":"split_clients","defaultValue":"—","syntax":"split_clients     строка    $переменная { ... }","context":"stream","description":"<p>\nСоздаёт переменную для A/B тестирования, например:\n</p> <blockquote class=\"example\"><pre>\nsplit_clients \"${remote_addr}AAA\" $variant {\n               0.5%               .one;\n               2.0%               .two;\n               *                  \"\";\n}\n</pre></blockquote><p> \nЗначение исходной строки хэшируется с помощью MurmurHash2.\nВ приведённом примере при значениях хэша от 0 до 21474835 (0.5%)\nпеременная <code>$variant</code> получит значение <code>\".one\"</code>.\nПри значениях хэша от 21474836 до 107374180 (2%) — <code>\".two\"</code>.\nИ при значениях хэша от 107374181 до 4294967295 — <code>\"\"</code>\n(пустая строка).\n</p>"},{"directive":"split_clients","defaultValue":"—","syntax":"split_clients     строка    $переменная { ... }","context":"http","description":"<p>\nСоздаёт переменную для A/B тестирования, например:\n</p> <blockquote class=\"example\"><pre>\nsplit_clients \"${remote_addr}AAA\" $variant {\n               0.5%               .one;\n               2.0%               .two;\n               *                  \"\";\n}\n</pre></blockquote><p> \nЗначение исходной строки хэшируется с помощью MurmurHash2.\nВ приведённом примере при значениях хэша от 0 до 21474835 (0.5%)\nпеременная <code>$variant</code> получит значение <code>\".one\"</code>.\nПри значениях хэша от 21474836 до 107374180 (2%) — <code>\".two\"</code>.\nИ при значениях хэша от 107374181 до 4294967295 — <code>\"\"</code>\n(пустая строка).\n</p>"},{"directive":"spdy_headers_comp","defaultValue":"spdy_headers_comp 0;","syntax":"spdy_headers_comp степень;","context":"http, server","description":"<p>\nУстанавливает <code><i>степень</i></code> сжатия заголовков ответа\nв диапазоне от 1 (быстрее, но хуже сжатие) до 9 (медленнее, лучшее сжатие).\nСпециальное значение 0 отключает сжатие заголовков.\n</p>"},{"directive":"spdy_chunk_size","defaultValue":"spdy_chunk_size 8k;","syntax":"spdy_chunk_size размер;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.9.\n            </p></div><p>\nЗадаёт максимальный размер частей,\nна которые будет\n<a href=\"http://www.chromium.org/spdy/spdy-protocol/spdy-protocol-draft2#TOC-Data-frames\">\nразделяться</a> тело ответа.\nСлишком маленькое значение может\nпривести к росту накладных расходов.\nСлишком большое значение может\nнегативно сказаться на приоритизации из-за\n<a href=\"http://en.wikipedia.org/wiki/Head-of-line_blocking\">\nблокировки очереди</a>.\n</p>"},{"directive":"source_charset","defaultValue":"—","syntax":"source_charset кодировка;","context":"http, server, location, if в location","description":"<p>\nЗадаёт исходную кодировку ответа.\nЕсли эта кодировка отличается от указанной в директиве\n<a href=\"#charset\">charset</a>, то выполняется перекодирование.\n</p>"},{"directive":"smtp_capabilities","defaultValue":"—","syntax":"smtp_capabilities расширение ...;","context":"mail, server","description":"<p>\nПозволяет указать список расширений протокола SMTP,\nвыдаваемый клиенту в ответе на команду\n<code>EHLO</code>.\nВ зависимости от значения директивы\n<a href=\"ngx_mail_ssl_module.html#starttls\">starttls</a>\nк этому списку автоматически добавляются\nметоды аутентификации, указанные в директиве <a href=\"#smtp_auth\">smtp_auth</a>, и\n<a href=\"https://tools.ietf.org/html/rfc3207\">STARTTLS</a>.\n</p><p>\nВ данной директиве имеет смысл указать расширения,\nподдерживаемые MTA,\nна который проксируются клиенты (если эти расширения относятся к командам,\nиспользуемым после аутентификации, когда nginx прозрачно проксирует подключение\nклиента на бэкенд).\n</p><p>\nТекущий список стандартизованных расширений опубликован на\n<a href=\"http://www.iana.org/assignments/mail-parameters\">www.iana.org</a>.\n</p>"},{"directive":"smtp_auth","defaultValue":"smtp_auth login plain;","syntax":"smtp_auth метод ...;","context":"mail, server","description":"<p>\nЗадаёт разрешённые методы\n<a href=\"https://tools.ietf.org/html/rfc2554\">SASL-аутентификации</a>\nSMTP-клиентов.\nПоддерживаемые методы:\n</p> <dl class=\"compact\">\n\n<dt><code>login</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/draft-murchison-sasl-login-00\">AUTH LOGIN</a>\n</dd>\n\n<dt><code>plain</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc4616\">AUTH PLAIN</a>\n</dd>\n\n<dt><code>cram-md5</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc2195\">AUTH CRAM-MD5</a>.\nДля работы этого метода пароль должен храниться в незашифрованном виде.\n</dd>\n\n<dt><code>external</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc4422\">AUTH EXTERNAL</a> (1.11.6).\n</dd>\n\n<dt><code>none</code></dt>\n<dd>\nАутентификация не требуется.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"slice","defaultValue":"slice 0;","syntax":"slice размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> фрагмента.\nНулевое значение запрещает разбиение ответов на фрагменты.\nОбратите внимание, что слишком низкое значение может привести\nк излишнему потреблению памяти\nи открытию большого количества файлов.\n</p><p>\nДля того, чтобы подзапрос вернул необходимый диапазон,\nпеременная <code>$slice_range</code> должна быть\n<a href=\"ngx_http_proxy_module.html#proxy_set_header\">передана</a> на\nпроксируемый сервер в качестве поля <code>Range</code> заголовка запроса.\nЕсли включено\n<a href=\"ngx_http_proxy_module.html#proxy_cache\">кэширование</a>,\nто необходимо добавить <code>$slice_range</code> в\n<a href=\"ngx_http_proxy_module.html#proxy_cache_key\">ключ\nкэширования</a>\nи <a href=\"ngx_http_proxy_module.html#proxy_cache_valid\">включить</a>\nкэширование ответов с кодом 206.\n</p>"},{"directive":"set_real_ip_from","defaultValue":"—","syntax":"set_real_ip_from     адрес |    CIDR |    unix:;","context":"stream, server","description":"<p>\nЗадаёт доверенные адреса, которые передают верный адрес\nдля замены.\nЕсли указано специальное значение <code>unix:</code>,\nдоверенными будут считаться все UNIX-сокеты.\n</p>"},{"directive":"set_real_ip_from","defaultValue":"—","syntax":"set_real_ip_from     адрес |    CIDR |    unix:;","context":"http, server, location","description":"<p>\nЗадаёт доверенные адреса, которые передают верный адрес\nдля замены.\nЕсли указано специальное значение <code>unix:</code>,\nдоверенными будут считаться все UNIX-сокеты.\nДоверенные адреса могут быть также заданы при помощи имени хоста (1.13.1).\n</p> <blockquote class=\"note\">\nIPv6-адреса поддерживаются начиная с версий 1.3.0 и 1.2.1.\n</blockquote><p> \n</p>"},{"directive":"set","defaultValue":"—","syntax":"set $переменная значение;","context":"server, location, if","description":"<p>\nУстанавливает значение указанной переменной.\nВ качестве значения можно использовать текст, переменные и их комбинации.\n</p>"},{"directive":"server_tokens","defaultValue":"server_tokens on;","syntax":"server_tokens     on |    off |    build |    строка;","context":"http, server, location","description":"<p>\nРазрешает или запрещает выдавать версию nginx’а на страницах ошибок и\nв поле “Server” заголовка ответа.\n</p>"},{"directive":"server_names_hash_max_size","defaultValue":"server_names_hash_max_size 512;","syntax":"server_names_hash_max_size размер;","context":"http","description":"<p>\nЗадаёт максимальный <code><i>размер</i></code> хэш-таблиц имён серверов.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"server_names_hash_bucket_size","defaultValue":"server_names_hash_bucket_size 32|64|128;","syntax":"server_names_hash_bucket_size размер;","context":"http","description":"<p>\nЗадаёт размер корзины в хэш-таблицах имён серверов.\nЗначение по умолчанию зависит от размера строки кэша процессора.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"server_name_in_redirect","defaultValue":"server_name_in_redirect off;","syntax":"server_name_in_redirect on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает использовать в\n<a href=\"#absolute_redirect\">абсолютных</a> перенаправлениях,\nвыдаваемых nginx’ом, основное имя сервера, задаваемое директивой\n<a href=\"#server_name\">server_name</a>.\nЕсли использование основного имени сервера запрещено, то используется имя,\nуказанное в поле “Host” заголовка запроса.\nЕсли же этого поля нет, то используется IP-адрес сервера.\n</p><p>\nИспользование в перенаправлениях порта управляется\nдирективой <a href=\"#port_in_redirect\">port_in_redirect</a>.\n</p>"},{"directive":"server_name","defaultValue":"server_name hostname;","syntax":"server_name имя;","context":"mail, server","description":"<p>\nЗадаёт имя сервера, используемое:\n</p> <ul class=\"compact\">\n\n<li>\nв начальном приветствии POP3/SMTP-сервера;\n</li>\n\n<li>\nв salt при аутентификации SASL-методом CRAM-MD5;\n</li>\n\n<li>\nв команде <code>EHLO</code> при подключении к SMTP-бэкенду,\nесли разрешена передача команды\n<a href=\"ngx_mail_proxy_module.html#xclient\">XCLIENT</a>.\n</li>\n\n</ul><p> \n</p><p>\nЕсли директива не указана, используется имя хоста (hostname) машины.\n</p>"},{"directive":"server_name","defaultValue":"server_name \"\";","syntax":"server_name имя ...;","context":"server","description":"<p>\nЗадаёт имена виртуального сервера, например:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    server_name example.com www.example.com;\n}\n</pre></blockquote><p> \n</p><p>\nПервое имя становится основным именем сервера.\n</p><p>\nВ именах серверов можно использовать звёздочку (“<code>*</code>”)\nдля замены первой или последней части имени:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    server_name example.com *.example.com www.example.*;\n}\n</pre></blockquote><p> \nТакие имена называются именами с маской.\n</p><p>\nДва первых вышеприведённых имени можно объединить в одно:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    server_name .example.com;\n}\n</pre></blockquote><p> \n</p><p>\nВ качестве имени сервера можно также использовать регулярное выражение,\nуказав перед ним тильду (“<code>~</code>”):\n</p> <blockquote class=\"example\"><pre>\nserver {\n    server_name www.example.com ~^www\\d+\\.example\\.com$;\n}\n</pre></blockquote><p> \n</p><p>\nРегулярное выражение может содержать выделения (0.7.40),\nкоторые могут затем использоваться в других директивах:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    server_name ~^(www\\.)?(.+)$;\n\n    location / {\n        root /sites/$2;\n    }\n}\n\nserver {\n    server_name _;\n\n    location / {\n        root /sites/default;\n    }\n}\n</pre></blockquote><p> \n</p><p>\nИменованные выделения в регулярном выражении создают переменные (0.8.25),\nкоторые могут затем использоваться в других директивах:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    server_name ~^(www\\.)?(?&lt;domain&gt;.+)$;\n\n    location / {\n        root /sites/$domain;\n    }\n}\n\nserver {\n    server_name _;\n\n    location / {\n        root /sites/default;\n    }\n}\n</pre></blockquote><p> \n</p><p>\nЕсли параметр директивы установлен в “<code>$hostname</code>” (0.9.4), то\nподставляется имя хоста (hostname) машины.\n</p><p>\nВозможно также указать пустое имя сервера (0.7.11):\n</p> <blockquote class=\"example\"><pre>\nserver {\n    server_name www.example.com \"\";\n}\n</pre></blockquote><p> \nЭто позволяет обрабатывать запросы без поля “Host” заголовка\nзапроса в этом сервере, а не в сервере по умолчанию для данной пары адрес:порт.\nЭто настройка по умолчанию.\n</p> <blockquote class=\"note\">\nДо 0.8.48 по умолчанию использовалось имя хоста (hostname) машины.\n</blockquote><p> \n</p><p>\nПри поиске виртуального сервера по имени,\nесли имени соответствует несколько из указанных вариантов,\nнапример, одновременно подходят и имя с маской, и регулярное выражение,\nбудет выбран первый подходящий вариант в следующем порядке приоритета:\n</p> <ol class=\"compact\">\n\n<li>\nточное имя\n</li>\n\n<li>\nсамое длинное имя с маской в начале,\nнапример “<code>*.example.com</code>”\n</li>\n\n<li>\nсамое длинное имя с маской в конце,\nнапример “<code>mail.*</code>”\n</li>\n\n<li>\nпервое подходящее регулярное выражение\n(в порядке следования в конфигурационном файле)\n</li>\n\n</ol><p> \n</p><p>\nПодробнее имена серверов обсуждаются в отдельном\n<a href=\"server_names.html\">документе</a>.\n</p>"},{"directive":"server","defaultValue":"—","syntax":"server адрес [параметры];","context":"upstream","description":"<p>\nЗадаёт <code><i>адрес</i></code> и другие <code><i>параметры</i></code>\nсервера.\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи обязательного порта, или в виде пути UNIX-сокета, который\nуказывается после префикса “<code>unix:</code>”.\nДоменное имя, которому соответствует несколько IP-адресов,\nзадаёт сразу несколько серверов.\n</p><p>\nМогут быть заданы следующие параметры:\n</p> <dl class=\"compact\">\n\n<dt id=\"weight\">\n<code>weight</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт вес сервера, по умолчанию 1.\n</dd>\n\n<dt id=\"max_conns\">\n<code>max_conns</code>=<code><i>число</i></code>\n</dt>\n<dd>\nограничивает максимальное <code><i>число</i></code> одновременных\nсоединений к проксируемому серверу (1.11.5).\nЗначение по умолчанию равно 0 и означает, что ограничения нет.\nЕсли группа не находится в <a href=\"#zone\">зоне разделяемой памяти</a>,\nто ограничение работает отдельно для каждого рабочего процесса.\n<blockquote class=\"note\">\nДо версии 1.11.5 этот параметр был доступен как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote>\n</dd>\n\n<dt id=\"max_fails\">\n<code>max_fails</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт число неудачных попыток работы с сервером, которые должны произойти\nв течение времени, заданного параметром <code>fail_timeout</code>,\nчтобы сервер считался недоступным на период времени, также заданный\nпараметром <code>fail_timeout</code>.\nПо умолчанию число попыток устанавливается равным 1.\nНулевое значение отключает учёт попыток.\nВ данном случае неудачной попыткой считается ошибка или таймаут\nпри установке соединения с сервером.\n</dd>\n\n<dt id=\"fail_timeout\">\n<code>fail_timeout</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт\n<ul class=\"compact\">\n\n<li>\nвремя, в течение которого должно произойти заданное число неудачных\nпопыток работы с сервером для того, чтобы сервер считался недоступным;\n</li>\n\n<li>\nи время, в течение которого сервер будет считаться недоступным.\n</li>\n\n</ul>\nПо умолчанию параметр равен 10 секундам.\n</dd>\n\n<dt id=\"backup\">\n<code>backup</code>\n</dt>\n<dd>\nпомечает сервер как запасной сервер.\nНа него будут передаваться соединения в случае,\nесли не работают основные серверы.\n</dd>\n\n<dt id=\"down\">\n<code>down</code>\n</dt>\n<dd>\nпомечает сервер как постоянно недоступный.\n</dd>\n\n</dl><p> \n</p><p>\nКроме того,\nследующие параметры доступны как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>:\n</p> <dl class=\"compact\">\n\n<dt id=\"resolve\">\n<code>resolve</code>\n</dt>\n<dd>\nотслеживает изменения IP-адресов, соответствующих доменному имени сервера,\nи автоматически изменяет конфигурацию группы\nбез необходимости перезапуска nginx.\nГруппа должна находиться в <a href=\"#zone\">зоне разделяемой памяти</a>.\n<p>\nДля работы этого параметра\nдиректива <a href=\"ngx_stream_core_module.html#resolver\">resolver</a>\nдолжна быть задана в блоке\n<a href=\"ngx_stream_core_module.html#stream\">stream</a>.\nПример:\n</p> <blockquote class=\"example\"><pre>\nstream {\n    resolver 10.0.0.1;\n\n    upstream u {\n        zone ...;\n        ...\n        server example.com:12345 resolve;\n    }\n}\n</pre></blockquote><p> \n</p>\n</dd>\n\n<dt id=\"service\">\n<code>service</code>=<code><i>имя</i></code>\n</dt>\n<dd>\nвключает преобразование\n<a href=\"https://tools.ietf.org/html/rfc2782\">SRV</a>-записей\nDNS и задаёт <code><i>имя</i></code> сервиса (1.9.13).\nДля работы параметра необходимо указать\nпараметр <a href=\"#resolve\">resolve</a> для сервера\nи не указывать порт сервера.\n<p>\nЕсли имя сервиса не содержит точку (“<code>.</code>”), то\nимя составляется в соответствии с\n<a href=\"https://tools.ietf.org/html/rfc2782\">RFC</a>\nи в префикс службы добавляется протокол TCP.\nНапример, для получения\nSRV-записи <code>_http._tcp.backend.example.com</code>\nнеобходимо указать директиву:\n</p> <blockquote class=\"example\"><pre>\nserver backend.example.com service=http resolve;\n</pre></blockquote><p> \nЕсли имя сервиса содержит одну и более точек, то имя составляется\nпри помощи соединения префикса службы и имени сервера.\nНапример, для получения SRV-записей\n<code>_http._tcp.backend.example.com</code>\nи <code>server1.backend.example.com</code>\nнеобходимо указать директивы:\n</p> <blockquote class=\"example\"><pre>\nserver backend.example.com service=_http._tcp resolve;\nserver example.com service=server1.backend resolve;\n</pre></blockquote><p> \n</p>\n\n<p>\nSRV-записи с наивысшим приоритетом\n(записи с одинаковым наименьшим значением приоритета)\nпреобразуются в основные серверы,\nостальные SRV-записи преобразуются в запасные серверы.\nЕсли в конфигурации сервера указан параметр <a href=\"#backup\">backup</a>,\nвысокоприоритетные SRV-записи преобразуются в запасные серверы,\nостальные SRV-записи игнорируются.\n</p>\n</dd>\n\n<dt id=\"slow_start\">\n<code>slow_start</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт <code><i>время</i></code>, в течение которого вес сервера\nвосстановится от нуля до своего номинального значения в ситуации, когда\nнеработоспособный (unhealthy) сервер вновь становится работоспособным\n(<a href=\"ngx_http_upstream_hc_module.html#health_check\">healthy</a>)\nили когда сервер становится доступным по прошествии времени,\nв течение которого он считался <a href=\"#fail_timeout\">недоступным</a>.\nЗначение по умолчанию равно нулю и означает, что медленный старт выключен.\n<blockquote class=\"note\">\nПараметр нельзя использовать совместно с\nметодом балансировки нагрузки <a href=\"#hash\">hash</a>.\n</blockquote>\n</dd>\n\n</dl><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЕсли в группе только один сервер, параметры <code>max_fails</code>,\n<code>fail_timeout</code> и <code>slow_start</code>\nигнорируются и такой сервер никогда не будет считаться недоступным.\n</blockquote><p> \n</p>"},{"directive":"server","defaultValue":"—","syntax":"server { ... }","context":"stream","description":"<p>\nЗадаёт конфигурацию для сервера.\n</p>"},{"directive":"server","defaultValue":"—","syntax":"server { ... }","context":"mail","description":"<p>\nЗадаёт конфигурацию для сервера.\n</p>"},{"directive":"server","defaultValue":"—","syntax":"server адрес [параметры];","context":"upstream","description":"<p>\nЗадаёт <code><i>адрес</i></code> и другие <code><i>параметры</i></code>\nсервера.\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи необязательного порта, или в виде пути UNIX-сокета, который\nуказывается после префикса “<code>unix:</code>”.\nЕсли порт не указан, используется порт 80.\nДоменное имя, которому соответствует несколько IP-адресов,\nзадаёт сразу несколько серверов.\n</p><p>\nМогут быть заданы следующие параметры:\n</p> <dl class=\"compact\">\n\n<dt id=\"weight\">\n<code>weight</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт вес сервера, по умолчанию 1.\n</dd>\n\n<dt id=\"max_conns\">\n<code>max_conns</code>=<code><i>число</i></code>\n</dt>\n<dd>\nограничивает максимальное <code><i>число</i></code> одновременных активных\nсоединений к проксируемому серверу (1.11.5).\nЗначение по умолчанию равно 0 и означает, что ограничения нет.\nЕсли группа не находится в <a href=\"#zone\">зоне разделяемой памяти</a>,\nто ограничение работает отдельно для каждого рабочего процесса.\n<blockquote class=\"note\">\nПри включённых <a href=\"#keepalive\">неактивных постоянных</a> соединениях,\nнескольких\n<a href=\"../ngx_core_module.html#worker_processes\">рабочих процессах</a>\nи <a href=\"#zone\">зоне разделяемой памяти</a>,\nсуммарное число активных и неактивных соединений с проксируемым сервером\nможет превышать значение <code>max_conns</code>.\n</blockquote>\n<blockquote class=\"note\">\nНачиная с версии 1.5.9 и до версии 1.11.5\nэтот параметр был доступен как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote>\n</dd>\n\n<dt id=\"max_fails\">\n<code>max_fails</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт число неудачных попыток работы с сервером, которые должны произойти\nв течение времени, заданного параметром <code>fail_timeout</code>,\nчтобы сервер считался недоступным на период времени, также заданный\nпараметром <code>fail_timeout</code>.\nПо умолчанию число попыток устанавливается равным 1.\nНулевое значение отключает учёт попыток.\nЧто считается неудачной попыткой, определяется директивами\n<a href=\"ngx_http_proxy_module.html#proxy_next_upstream\">proxy_next_upstream</a>,\n<a href=\"ngx_http_fastcgi_module.html#fastcgi_next_upstream\">fastcgi_next_upstream</a>,\n<a href=\"ngx_http_uwsgi_module.html#uwsgi_next_upstream\">uwsgi_next_upstream</a>,\n<a href=\"ngx_http_scgi_module.html#scgi_next_upstream\">scgi_next_upstream</a> и\n<a href=\"ngx_http_memcached_module.html#memcached_next_upstream\">memcached_next_upstream</a>.\n</dd>\n\n<dt id=\"fail_timeout\">\n<code>fail_timeout</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт\n<ul class=\"compact\">\n\n<li>\nвремя, в течение которого должно произойти заданное число неудачных\nпопыток работы с сервером для того, чтобы сервер считался недоступным;\n</li>\n\n<li>\nи время, в течение которого сервер будет считаться недоступным.\n</li>\n\n</ul>\nПо умолчанию параметр равен 10 секундам.\n</dd>\n\n<dt id=\"backup\">\n<code>backup</code>\n</dt>\n<dd>\nпомечает сервер как запасной сервер.\nНа него будут передаваться запросы в случае, если не работают основные серверы.\n</dd>\n\n<dt id=\"down\">\n<code>down</code>\n</dt>\n<dd>\nпомечает сервер как постоянно недоступный.\n</dd>\n\n</dl><p> \n</p><p>\nКроме того,\nследующие параметры доступны как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>:\n</p> <dl class=\"compact\">\n\n<dt id=\"resolve\">\n<code>resolve</code>\n</dt>\n<dd>\nотслеживает изменения IP-адресов, соответствующих доменному имени сервера,\nи автоматически изменяет конфигурацию группы\nбез необходимости перезапуска nginx (1.5.12).\nГруппа должна находиться в <a href=\"#zone\">зоне разделяемой памяти</a>.\n<p>\nДля работы этого параметра\nдиректива <a href=\"ngx_http_core_module.html#resolver\">resolver</a>\nдолжна быть задана в блоке\n<a href=\"ngx_http_core_module.html#http\">http</a>.\nПример:\n</p> <blockquote class=\"example\"><pre>\nhttp {\n    resolver 10.0.0.1;\n\n    upstream u {\n        zone ...;\n        ...\n        server example.com resolve;\n    }\n}\n</pre></blockquote><p> \n</p>\n</dd>\n\n<dt id=\"route\">\n<code>route</code>=<code><i>строка</i></code>\n</dt>\n<dd>\nзадаёт имя маршрута к серверу.\n</dd>\n\n<dt id=\"service\">\n<code>service</code>=<code><i>имя</i></code>\n</dt>\n<dd>\nвключает преобразование\n<a href=\"https://tools.ietf.org/html/rfc2782\">SRV</a>-записей\nDNS и задаёт <code><i>имя</i></code> сервиса (1.9.13).\nДля работы параметра необходимо указать\nпараметр <a href=\"#resolve\">resolve</a> для сервера\nи не указывать порт сервера.\n<p>\nЕсли имя сервиса не содержит точку (“<code>.</code>”), то\nимя составляется в соответствии с\n<a href=\"https://tools.ietf.org/html/rfc2782\">RFC</a>\nи в префикс службы добавляется протокол TCP.\nНапример, для получения\nSRV-записи <code>_http._tcp.backend.example.com</code>\nнеобходимо указать директиву:\n</p> <blockquote class=\"example\"><pre>\nserver backend.example.com service=http resolve;\n</pre></blockquote><p> \nЕсли имя сервиса содержит одну и более точек, то имя составляется\nпри помощи соединения префикса службы и имени сервера.\nНапример, для получения SRV-записей\n<code>_http._tcp.backend.example.com</code>\nи <code>server1.backend.example.com</code>\nнеобходимо указать директивы:\n</p> <blockquote class=\"example\"><pre>\nserver backend.example.com service=_http._tcp resolve;\nserver example.com service=server1.backend resolve;\n</pre></blockquote><p> \n</p>\n\n<p>\nSRV-записи с наивысшим приоритетом\n(записи с одинаковым наименьшим значением приоритета)\nпреобразуются в основные серверы,\nостальные SRV-записи преобразуются в запасные серверы.\nЕсли в конфигурации сервера указан параметр <a href=\"#backup\">backup</a>,\nвысокоприоритетные SRV-записи преобразуются в запасные серверы,\nостальные SRV-записи игнорируются.\n</p>\n</dd>\n\n<dt id=\"slow_start\">\n<code>slow_start</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт <code><i>время</i></code>, в течение которого вес сервера\nвосстановится от нуля до своего номинального значения в ситуации, когда\nнеработоспособный (unhealthy) сервер вновь становится работоспособным\n(<a href=\"ngx_http_upstream_hc_module.html#health_check\">healthy</a>)\nили когда сервер становится доступным по прошествии времени,\nв течение которого он считался <a href=\"#fail_timeout\">недоступным</a>.\nЗначение по умолчанию равно нулю и означает, что медленный старт выключен.\n<blockquote class=\"note\">\nПараметр нельзя использовать совместно с\nметодами балансировки нагрузки <a href=\"#hash\">hash</a> и <a href=\"#ip_hash\">ip_hash</a>.\n</blockquote>\n</dd>\n\n</dl><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЕсли в группе только один сервер, параметры <code>max_fails</code>,\n<code>fail_timeout</code> и <code>slow_start</code>\nигнорируются и такой сервер никогда не будет считаться недоступным.\n</blockquote><p> \n</p>"},{"directive":"server","defaultValue":"—","syntax":"server { ... }","context":"http","description":"<p>\nЗадаёт конфигурацию для виртуального сервера.\nЧёткого разделения виртуальных серверов на IP-based (на основании IP-адреса)\nи name-based (на основании поля “Host” заголовка запроса) нет.\nВместо этого директивами <a href=\"#listen\">listen</a> описываются все\nадреса и порты, на которых нужно принимать соединения для этого сервера,\nа в директиве <a href=\"#server_name\">server_name</a> указываются все имена серверов.\nПримеры конфигураций описаны в документе\n“<a href=\"request_processing.html\">Как nginx обрабатывает запросы</a>”.\n</p>"},{"directive":"sendfile_max_chunk","defaultValue":"sendfile_max_chunk 0;","syntax":"sendfile_max_chunk размер;","context":"http, server, location","description":"<p>\nПри установке в ненулевое значение ограничивает объём данных,\nкоторый может передан за один вызов <code>sendfile()</code>.\nБез этого ограничения одно быстрое соединение может целиком\nзахватить рабочий процесс.\n</p>"},{"directive":"sendfile","defaultValue":"sendfile off;","syntax":"sendfile on | off;","context":"http, server, location, if в location","description":"<p>\nРазрешает или запрещает использовать\n<code>sendfile()</code>.\n</p><p>\nНачиная с nginx 0.8.12 и FreeBSD 5.2.1,\nможно использовать <a href=\"#aio\">aio</a> для подгрузки данных\nдля <code>sendfile()</code>:\n</p> <blockquote class=\"example\"><pre>\nlocation /video/ {\n    sendfile       on;\n    tcp_nopush     on;\n    aio            on;\n}\n</pre></blockquote><p> \nВ такой конфигурации функция <code>sendfile()</code> вызывается с флагом\n<code>SF_NODISKIO</code>, в результате чего она не блокируется на диске, а\nсообщает об отсутствии данных в памяти.\nПосле этого nginx инициирует асинхронную подгрузку данных, читая один байт.\nПри этом ядро FreeBSD подгружает в память первые 128K байт файла, однако\nпри последующих чтениях файл подгружается частями только по 16K.\nИзменить это можно с помощью директивы\n<a href=\"#read_ahead\">read_ahead</a>.\n</p> <blockquote class=\"note\">\nДо версии 1.7.11 подгрузка данных включалась с помощью\n<code>aio sendfile;</code>.\n</blockquote><p> \n</p>"},{"directive":"send_timeout","defaultValue":"send_timeout 60s;","syntax":"send_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при передаче ответа клиенту.\nТаймаут устанавливается не на всю передачу ответа,\nа только между двумя операциями записями.\nЕсли по истечении этого времени клиент ничего не примет,\nсоединение будет закрыто.\n</p>"},{"directive":"send_lowat","defaultValue":"send_lowat 0;","syntax":"send_lowat размер;","context":"http, server, location","description":"<p>\nПри установке этой директивы в ненулевое значение nginx будет пытаться\nминимизировать число операций отправки на клиентских сокетах либо при\nпомощи флага <code>NOTE_LOWAT</code> метода\n<a href=\"../events.html#kqueue\">kqueue</a>,\nлибо при помощи параметра сокета <code>SO_SNDLOWAT</code>.\nВ обоих случаях будет использован указанный <code><i>размер</i></code>.\n</p><p>\nЭта директива игнорируется на Linux, Solaris и Windows.\n</p>"},{"directive":"secure_link_secret","defaultValue":"—","syntax":"secure_link_secret слово;","context":"location","description":"<p>\nЗадаёт секретное <code><i>слово</i></code> для проверки аутентичности\nзапрашиваемых ссылок.\n</p><p>\nПолный URI запрашиваемой ссылки выглядит так:\n</p> <blockquote class=\"example\"><pre>\n/<code><i>префикс</i></code>/<code><i>хэш</i></code>/<code><i>ссылка</i></code>\n</pre></blockquote><p> \nгде <code><i>хэш</i></code> — MD5-хэш в шестнадцатеричном виде,\nвычисленный для конкатенации ссылки и секретного слова,\nа <code><i>префикс</i></code> — произвольная строка без слэшей.\n</p><p>\nЕсли запрашиваемая ссылка проходит проверку на аутентичность,\nзначением переменной <code>$secure_link</code> становится ссылка,\nвыделенная из URI запроса.\nВ противном случае значением переменной <code>$secure_link</code>\nстановится пустая строка.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nlocation /p/ {\n    secure_link_secret secret;\n\n    if ($secure_link = \"\") {\n        return 403;\n    }\n\n    rewrite ^ /secure/$secure_link;\n}\n\nlocation /secure/ {\n    internal;\n}\n</pre></blockquote><p> \nПо запросу “<code>/p/5e814704a28d9bc1914ff19fa0c4a00a/link</code>”\nбудет выполнено внутреннее перенаправление на\n“<code>/secure/link</code>”.\n</p><p>\nЗначение хэша для данного примера на UNIX можно получить так:\n</p> <blockquote class=\"example\"><pre>\necho -n 'linksecret' | openssl md5 -hex\n</pre></blockquote><p> \n</p>"},{"directive":"secure_link_md5","defaultValue":"—","syntax":"secure_link_md5 выражение;","context":"http, server, location","description":"<p>\nЗадаёт выражение, для которого считается значение MD5-хэш,\nсравниваемое с переданным в запросе.\n</p><p>\nВыражение должно содержать защищаемую часть ссылки (ресурс)\nи секретную составляющую.\nЕсли ссылка имеет ограниченный срок действия,\nвыражение также должно содержать <code>$secure_link_expires</code>.\n</p><p>\nДля предотвращения несанкционированного доступа выражение\nможет содержать информацию о клиенте, например, его адрес и\nверсию браузера.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nlocation /s/ {\n    secure_link $arg_md5,$arg_expires;\n    secure_link_md5 \"$secure_link_expires$uri$remote_addr secret\";\n\n    if ($secure_link = \"\") {\n        return 403;\n    }\n\n    if ($secure_link = \"0\") {\n        return 410;\n    }\n\n    ...\n}\n</pre></blockquote><p> \nСсылка\n“<code>/s/link?md5=_e4Nc3iduzkWRm01TBBNYw&amp;expires=2147483647</code>”\nограничивает доступ к “<code>/s/link</code>” для клиента с IP-адресом\n127.0.0.1.\nСсылка также имеет ограниченный срок действия до 19 января 2038 года (GMT).\n</p><p>\nЗначение аргумента запроса <code><i>md5</i></code> на UNIX можно получить так:\n</p> <blockquote class=\"example\"><pre>\necho -n '2147483647/s/link127.0.0.1 secret' | \\\n    openssl md5 -binary | openssl base64 | tr +/ -_ | tr -d =\n</pre></blockquote><p> \n</p>"},{"directive":"secure_link","defaultValue":"—","syntax":"secure_link выражение;","context":"http, server, location","description":"<p>\nЗадаёт строку с переменными, из которой будет выделено значение\nконтрольной суммы и время действия ссылки.\n</p><p>\nИспользуемые в выражении переменные обычно связаны с запросом;\nсм. <a href=\"#secure_link_md5\">пример</a> ниже.\n</p><p>\nВыделенное из строки значение контрольной суммы сравнивается со\nзначением MD5-хэша, вычисляемым для выражения, заданного\nдирективой <a href=\"#secure_link_md5\">secure_link_md5</a>.\nЕсли контрольные суммы не совпадают, значением переменной\n<code>$secure_link</code> становится пустая строка.\nЕсли контрольные суммы совпадают, проверяется время действия ссылки.\nЕсли срок действия ссылки задан и истёк, переменная\n<code>$secure_link</code> получает значение “<code>0</code>”.\nВ противном случае она получает значение “<code>1</code>”.\nЗначение MD5-хэш передаётся в запросе закодированным в\n<a href=\"https://tools.ietf.org/html/rfc4648#section-5\">base64url</a>.\n</p><p>\nЕсли ссылка имеет ограниченный срок действия, время её действия\nзадаётся в секундах с начала эпохи (1 января 1970 года 00:00:00 GMT).\nЗначение указывается в выражении после MD5-хэша\nи отделяется от него запятой.\nВремя действия ссылки, переданное в запросе, делается доступным\nв переменной <code>$secure_link_expires</code> для использования\nв директиве <a href=\"#secure_link_md5\">secure_link_md5</a>.\nЕсли время действия ссылки не задано, ссылка имеет неограниченный\nсрок действия.\n</p>"},{"directive":"scgi_temp_path","defaultValue":"scgi_temp_path scgi_temp;","syntax":"scgi_temp_path     путь    [уровень1    [уровень2    [уровень3]]];","context":"http, server, location","description":"<p>\nЗадаёт имя каталога для хранения временных файлов с данными,\nполученными от SCGI-серверов.\nВ каталоге может использоваться иерархия подкаталогов до трёх уровней.\nНапример, при такой конфигурации\n</p> <blockquote class=\"example\"><pre>\nscgi_temp_path /spool/nginx/scgi_temp 1 2;\n</pre></blockquote><p> \nвременный файл будет следующего вида:\n</p> <blockquote class=\"example\"><pre>\n/spool/nginx/scgi_temp/<strong>7</strong>/<strong>45</strong>/00000123<strong>457</strong>\n</pre></blockquote><p> \n</p><p>\nСм. также параметр <code>use_temp_path</code> директивы\n<a href=\"#scgi_cache_path\">scgi_cache_path</a>.\n</p>"},{"directive":"scgi_temp_file_write_size","defaultValue":"scgi_temp_file_write_size 8k|16k;","syntax":"scgi_temp_file_write_size размер;","context":"http, server, location","description":"<p>\nОграничивает <code><i>размер</i></code> данных, сбрасываемых во временный файл\nза один раз, при включённой буферизации ответов SCGI-сервера\nво временные файлы.\nПо умолчанию <code><i>размер</i></code> ограничен двумя буферами, заданными\nдирективами <a href=\"#scgi_buffer_size\">scgi_buffer_size</a> и <a href=\"#scgi_buffers\">scgi_buffers</a>.\nМаксимальный размер временного файла задаётся директивой\n<a href=\"#scgi_max_temp_file_size\">scgi_max_temp_file_size</a>.\n</p>"},{"directive":"scgi_store_access","defaultValue":"scgi_store_access user:rw;","syntax":"scgi_store_access пользователи:права ...;","context":"http, server, location","description":"<p>\nЗадаёт права доступа для создаваемых файлов и каталогов, например,\n</p> <blockquote class=\"example\"><pre>\nscgi_store_access user:rw group:rw all:r;\n</pre></blockquote><p> \n</p><p>\nЕсли заданы какие-либо права для <code>group</code> или\n<code>all</code>, то права для <code>user</code>\nуказывать необязательно:\n</p> <blockquote class=\"example\"><pre>\nscgi_store_access group:rw all:r;\n</pre></blockquote><p> \n</p>"},{"directive":"scgi_store","defaultValue":"scgi_store off;","syntax":"scgi_store     on |    off |    строка;","context":"http, server, location","description":"<p>\nРазрешает сохранение на диск файлов.\nПараметр <code>on</code> сохраняет файлы в соответствии с путями,\nуказанными в директивах\n<a href=\"ngx_http_core_module.html#alias\">alias</a> или\n<a href=\"ngx_http_core_module.html#root\">root</a>.\nПараметр <code>off</code> запрещает сохранение файлов.\nКроме того, имя файла можно задать явно с помощью строки с переменными:\n</p> <blockquote class=\"example\"><pre>\nscgi_store /data/www$original_uri;\n</pre></blockquote><p> \n</p><p>\nВремя изменения файлов выставляется согласно полученному полю\n“Last-Modified” в заголовке ответа.\nОтвет сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временный файл и постоянное место хранения ответа\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если сохраняемые файлы будут находиться на той же файловой\nсистеме, что и каталог с временными файлами, задаваемый директивой\n<a href=\"#scgi_temp_path\">scgi_temp_path</a> для данного location.\n</p><p>\nДирективу можно использовать для создания локальных копий статических\nнеизменяемых файлов, например, так:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    root              /data/www;\n    error_page        404 = /fetch$uri;\n}\n\nlocation /fetch/ {\n    internal;\n\n    scgi_pass         backend:9000;\n    ...\n\n    scgi_store        on;\n    scgi_store_access user:rw group:rw all:r;\n    scgi_temp_path    /data/temp;\n\n    alias             /data/www/;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"scgi_send_timeout","defaultValue":"scgi_send_timeout 60s;","syntax":"scgi_send_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при передаче запроса SCGI-серверу.\nТаймаут устанавливается не на всю передачу запроса,\nа только между двумя операциями записи.\nЕсли по истечении этого времени SCGI-сервер не примет новых данных,\nсоединение закрывается.\n</p>"},{"directive":"scgi_request_buffering","defaultValue":"scgi_request_buffering on;","syntax":"scgi_request_buffering on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nРазрешает или запрещает использовать буферизацию тела запроса клиента.\n</p>"},{"directive":"scgi_read_timeout","defaultValue":"scgi_read_timeout 60s;","syntax":"scgi_read_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при чтении ответа SCGI-сервера.\nТаймаут устанавливается не на всю передачу ответа,\nа только между двумя операциями чтения.\nЕсли по истечении этого времени SCGI-сервер ничего не передаст,\nсоединение закрывается.\n</p>"},{"directive":"scgi_pass_request_headers","defaultValue":"scgi_pass_request_headers on;","syntax":"scgi_pass_request_headers on | off;","context":"http, server, location","description":null},{"directive":"scgi_pass_request_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"scgi_pass_header","defaultValue":"—","syntax":"scgi_pass_header поле;","context":"http, server, location","description":"<p>\nРазрешает передавать от SCGI-сервера клиенту\n<a href=\"#scgi_hide_header\">запрещённые для передачи</a> поля заголовка.\n</p>"},{"directive":"scgi_pass","defaultValue":"—","syntax":"scgi_pass адрес;","context":"location, if в location","description":"<p>\nЗадаёт адрес SCGI-сервера.\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи порта:\n</p> <blockquote class=\"example\"><pre>\nscgi_pass localhost:9000;\n</pre></blockquote><p> \nили в виде пути UNIX-сокета:\n</p> <blockquote class=\"example\"><pre>\nscgi_pass unix:/tmp/scgi.socket;\n</pre></blockquote><p> \n</p><p>\nЕсли доменному имени соответствует несколько адресов, то все они будут\nиспользоваться по очереди (round-robin).\nИ, кроме того, адрес может быть\n<a href=\"ngx_http_upstream_module.html\">группой серверов</a>.\n</p><p>\nВ значении параметра можно использовать переменные.\nВ этом случае, если адрес указан в виде доменного имени,\nимя ищется среди описанных\n<a href=\"ngx_http_upstream_module.html\">групп серверов</a>\nи если не найдено, то определяется с помощью\n<a href=\"ngx_http_core_module.html#resolver\">resolver</a>’а.\n</p>"},{"directive":"scgi_param","defaultValue":"—","syntax":"scgi_param     параметр значение    [if_not_empty];","context":"http, server, location","description":"<p>\nЗадаёт <code><i>параметр</i></code>, который будет передаваться SCGI-серверу.\nВ качестве значения можно использовать текст, переменные и их комбинации.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <code>scgi_param</code>.\n</p><p>\nСтандартные\n<a href=\"https://tools.ietf.org/html/rfc3875#section-4.1\">переменные\nокружения CGI</a>\nдолжны передаваться как заголовки SCGI, см. файл <code>scgi_params</code>\nиз дистрибутива:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    include scgi_params;\n    ...\n}\n</pre></blockquote><p> \n</p><p>\nЕсли директива указана с <code>if_not_empty</code> (1.1.11),\nто такой параметр с пустым значением передаваться на сервер не будет:\n</p> <blockquote class=\"example\"><pre>\nscgi_param HTTPS $https if_not_empty;\n</pre></blockquote><p> \n</p>"},{"directive":"scgi_no_cache","defaultValue":"—","syntax":"scgi_no_cache строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет сохраняться в кэш.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не будет сохранён:\n</p> <blockquote class=\"example\"><pre>\nscgi_no_cache $cookie_nocache $arg_nocache$arg_comment;\nscgi_no_cache $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#scgi_cache_bypass\">scgi_cache_bypass</a>.\n</p>"},{"directive":"scgi_next_upstream_tries","defaultValue":"scgi_next_upstream_tries 0;","syntax":"scgi_next_upstream_tries число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает число допустимых попыток для передачи запроса\n<a href=\"#scgi_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"scgi_next_upstream_timeout","defaultValue":"scgi_next_upstream_timeout 0;","syntax":"scgi_next_upstream_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает время, в течение которого возможна передача запроса\n<a href=\"#scgi_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"scgi_next_upstream","defaultValue":"scgi_next_upstream error timeout;","syntax":"scgi_next_upstream     error |    timeout |    invalid_header |    http_500 |    http_503 |    http_403 |    http_404 |    http_429 |    non_idempotent |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях запрос будет передан следующему серверу:\n</p> <dl class=\"compact\">\n\n<dt><code>error</code></dt>\n<dd>произошла ошибка соединения с сервером, передачи ему запроса или\nчтения заголовка ответа сервера;</dd>\n\n<dt><code>timeout</code></dt>\n<dd>произошёл таймаут во время соединения с сервером,\nпередачи ему запроса или чтения заголовка ответа сервера;</dd>\n\n<dt><code>invalid_header</code></dt>\n<dd>сервер вернул пустой или неверный ответ;</dd>\n\n<dt><code>http_500</code></dt>\n<dd>сервер вернул ответ с кодом 500;</dd>\n\n<dt><code>http_503</code></dt>\n<dd>сервер вернул ответ с кодом 503;</dd>\n\n<dt><code>http_403</code></dt>\n<dd>сервер вернул ответ с кодом 403;</dd>\n\n<dt><code>http_404</code></dt>\n<dd>сервер вернул ответ с кодом 404;</dd>\n\n<dt><code>http_429</code></dt>\n<dd>сервер вернул ответ с кодом 429 (1.11.13);</dd>\n\n<dt id=\"non_idempotent\"><code>non_idempotent</code></dt>\n<dd>обычно запросы с\n<a href=\"https://tools.ietf.org/html/rfc7231#section-4.2.2\">неидемпотентным</a>\nметодом\n(<code>POST</code>, <code>LOCK</code>, <code>PATCH</code>)\nне передаются на другой сервер,\nесли запрос серверу группы уже был отправлен (1.9.13);\nвключение параметра явно разрешает повторять подобные запросы;\n</dd>\n\n\n<dt><code>off</code></dt>\n<dd>запрещает передачу запроса следующему серверу.</dd>\n\n</dl><p> \n</p><p>\nНеобходимо понимать, что передача запроса следующему серверу возможна\nтолько при условии, что клиенту ещё ничего не передавалось.\nТо есть, если ошибка или таймаут возникли в середине передачи ответа,\nто исправить это уже невозможно.\n</p><p>\nДиректива также определяет, что считается\n<a href=\"ngx_http_upstream_module.html#max_fails\">неудачной\nпопыткой</a> работы с сервером.\nСлучаи <code>error</code>, <code>timeout</code> и\n<code>invalid_header</code>\nвсегда считаются неудачными попытками, даже если они не указаны в директиве.\nСлучаи <code>http_500</code>, <code>http_503</code>\nи <code>http_429</code>\nсчитаются неудачными попытками, только если они указаны в директиве.\nСлучаи <code>http_403</code> и <code>http_404</code>\nникогда не считаются неудачными попытками.\n</p><p>\nПередача запроса следующему серверу может быть ограничена по\n<a href=\"#scgi_next_upstream_tries\">количеству попыток</a>\nи по <a href=\"#scgi_next_upstream_timeout\">времени</a>.\n</p>"},{"directive":"scgi_max_temp_file_size","defaultValue":"scgi_max_temp_file_size 1024m;","syntax":"scgi_max_temp_file_size размер;","context":"http, server, location","description":"<p>\nЕсли включена <a href=\"#scgi_buffering\">буферизация</a> ответов\nSCGI-сервера, и ответ не вмещается целиком в буферы,\nзаданные директивами <a href=\"#scgi_buffer_size\">scgi_buffer_size</a> и\n<a href=\"#scgi_buffers\">scgi_buffers</a>, часть ответа может быть записана во временный файл.\nЭта директива задаёт максимальный <code><i>размер</i></code> временного файла.\nРазмер данных, сбрасываемых во временный файл за один раз, задаётся\nдирективой <a href=\"#scgi_temp_file_write_size\">scgi_temp_file_write_size</a>.\n</p><p>\nЗначение 0 отключает возможность буферизации ответов во временные файлы.\n</p><p>\n</p> <blockquote class=\"note\">\nДанное ограничение не распространяется на ответы,\nкоторые будут <a href=\"#scgi_cache\">закэшированы</a>\nили <a href=\"#scgi_store\">сохранены</a> на диске.\n</blockquote><p> \n</p>"},{"directive":"scgi_limit_rate","defaultValue":"scgi_limit_rate 0;","syntax":"scgi_limit_rate скорость;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nОграничивает скорость чтения ответа от SCGI-сервера.\n<code><i>Скорость</i></code> задаётся в байтах в секунду.\nЗначение 0 отключает ограничение скорости.\nОграничение устанавливается на запрос,\nпоэтому, если nginx одновременно\nоткроет два соединения к SCGI-серверу,\nсуммарная скорость будет вдвое выше заданного ограничения.\nОграничение работает только в случае, если включена\n<a href=\"#scgi_buffering\">буферизация</a> ответов SCGI-сервера.\n</p>"},{"directive":"scgi_intercept_errors","defaultValue":"scgi_intercept_errors off;","syntax":"scgi_intercept_errors on | off;","context":"http, server, location","description":"<p>\nОпределяет, передавать ли клиенту ответы SCGI-сервера с кодом\nбольше либо равным 300,\nили же перехватывать их и перенаправлять на обработку nginx’у с помощью\nдирективы <a href=\"ngx_http_core_module.html#error_page\">error_page</a>.\n</p>"},{"directive":"scgi_ignore_headers","defaultValue":"—","syntax":"scgi_ignore_headers поле ...;","context":"http, server, location","description":"<p>\nЗапрещает обработку некоторых полей заголовка из ответа SCGI-сервера.\nВ директиве можно указать поля “X-Accel-Redirect”,\n“X-Accel-Expires”, “X-Accel-Limit-Rate” (1.1.6),\n“X-Accel-Buffering” (1.1.6),\n“X-Accel-Charset” (1.1.6), “Expires”,\n“Cache-Control”, “Set-Cookie” (0.8.44)\nи “Vary” (1.7.7).\n</p><p>\nЕсли не запрещено, обработка этих полей заголовка заключается в следующем:\n</p> <ul>\n\n<li>\n“X-Accel-Expires”, “Expires”,\n“Cache-Control”, “Set-Cookie”\nи “Vary”\nзадают параметры <a href=\"#scgi_cache_valid\">кэширования</a> ответа;\n</li>\n\n<li>\n“X-Accel-Redirect” производит\n<a href=\"ngx_http_core_module.html#internal\">внутреннее\nперенаправление</a> на указанный URI;\n</li>\n\n<li>\n“X-Accel-Limit-Rate” задаёт\n<a href=\"ngx_http_core_module.html#limit_rate\">ограничение\nскорости</a> передачи ответа клиенту;\n</li>\n\n<li>\n“X-Accel-Buffering” включает или выключает\n<a href=\"#scgi_buffering\">буферизацию</a> ответа;\n</li>\n\n<li>\n“X-Accel-Charset” задаёт желаемую\n<a href=\"ngx_http_charset_module.html#charset\">кодировку</a>\nответа.\n</li>\n\n</ul><p> \n</p>"},{"directive":"scgi_ignore_client_abort","defaultValue":"scgi_ignore_client_abort off;","syntax":"scgi_ignore_client_abort on | off;","context":"http, server, location","description":"<p>\nОпределяет, закрывать ли соединение с SCGI-сервером\nв случае, если клиент закрыл соединение, не дождавшись ответа.\n</p>"},{"directive":"scgi_hide_header","defaultValue":"—","syntax":"scgi_hide_header поле;","context":"http, server, location","description":"<p>\nПо умолчанию\nnginx не передаёт клиенту поля заголовка “Status” и\n“X-Accel-...” из ответа SCGI-сервера.\nДиректива <code>scgi_hide_header</code> задаёт дополнительные поля,\nкоторые не будут передаваться.\nЕсли же передачу полей нужно разрешить, можно воспользоваться\nдирективой <a href=\"#scgi_pass_header\">scgi_pass_header</a>.\n</p>"},{"directive":"scgi_force_ranges","defaultValue":"scgi_force_ranges off;","syntax":"scgi_force_ranges on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nВключает поддержку диапазонов запрашиваемых байт (byte-range)\nдля кэшированных и некэшированных ответов SCGI-сервера\nвне зависимости от наличия поля “Accept-Ranges”\nв заголовках этих ответов.\n</p>"},{"directive":"scgi_connect_timeout","defaultValue":"scgi_connect_timeout 60s;","syntax":"scgi_connect_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут для установления соединения с SCGI-сервером.\nНеобходимо иметь в виду, что этот таймаут обычно не может превышать 75 секунд.\n</p>"},{"directive":"scgi_cache_valid","defaultValue":"—","syntax":"scgi_cache_valid [код ...] время;","context":"http, server, location","description":"<p>\nЗадаёт время кэширования для разных кодов ответа.\nНапример, директивы\n</p> <blockquote class=\"example\"><pre>\nscgi_cache_valid 200 302 10m;\nscgi_cache_valid 404      1m;\n</pre></blockquote><p> \nзадают время кэширования 10 минут для ответов с кодами 200 и 302\nи 1 минуту для ответов с кодом 404.\n</p><p>\nЕсли указано только <code><i>время</i></code> кэширования,\n</p> <blockquote class=\"example\"><pre>\nscgi_cache_valid 5m;\n</pre></blockquote><p> \nто кэшируются только ответы 200, 301 и 302.\n</p><p>\nКроме того, можно кэшировать любые ответы с помощью параметра\n<code>any</code>:\n</p> <blockquote class=\"example\"><pre>\nscgi_cache_valid 200 302 10m;\nscgi_cache_valid 301      1h;\nscgi_cache_valid any      1m;\n</pre></blockquote><p> \n</p><p>\nПараметры кэширования могут также быть заданы непосредственно\nв заголовке ответа.\nТакой способ приоритетнее, чем задание времени кэширования с помощью директивы.\n</p> <ul>\n\n<li>\nПоле заголовка “X-Accel-Expires” задаёт время кэширования\nответа в секундах.\nЗначение 0 запрещает кэшировать ответ.\nЕсли значение начинается с префикса <code>@</code>, оно задаёт абсолютное\nвремя в секундах с начала эпохи, до которого ответ может быть закэширован.\n</li>\n\n<li>\nЕсли в заголовке нет поля “X-Accel-Expires”,\nпараметры кэширования определяются по полям заголовка\n“Expires” или “Cache-Control”.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Set-Cookie”,\nне будет кэшироваться.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Vary”\nсо специальным значением “<code>*</code>”,\nне будет кэшироваться (1.7.7).\nОтвет, в заголовке которого есть поле “Vary”\nс другим значением, будет закэширован\nс учётом соответствующих полей заголовка запроса (1.7.7).\n</li>\n\n</ul><p> \nОбработка одного или более из этих полей заголовка может быть отключена\nпри помощи директивы <a href=\"#scgi_ignore_headers\">scgi_ignore_headers</a>.\n</p>"},{"directive":"scgi_cache_use_stale","defaultValue":"scgi_cache_use_stale off;","syntax":"scgi_cache_use_stale     error |    timeout |    invalid_header |    updating |    http_500 |    http_503 |    http_403 |    http_404 |    http_429 |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях можно использовать устаревший закэшированный ответ.\nПараметры директивы совпадают с параметрами\nдирективы <a href=\"#scgi_next_upstream\">scgi_next_upstream</a>.\n</p><p>\nПараметр <code>error</code> также позволяет использовать\nустаревший закэшированный ответ при невозможности выбора\nSCGI-сервера для обработки запроса.\n</p>"},{"directive":"scgi_cache_revalidate","defaultValue":"scgi_cache_revalidate off;","syntax":"scgi_cache_revalidate on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nРазрешает ревалидацию просроченных элементов кэша при помощи\nусловных запросов с полями заголовка\n“If-Modified-Since” и “If-None-Match”.\n</p>"},{"directive":"scgi_cache_purge","defaultValue":"—","syntax":"scgi_cache_purge строка ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nЗадаёт условия, при которых запрос будет считаться запросом\nна очистку кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто запись в кэше с соответствующим\n<a href=\"#scgi_cache_key\">ключом кэширования</a> удаляется.\nВ результате успешной операции возвращается ответ с кодом\n204 (No Content).\n</p><p>\nЕсли <a href=\"#scgi_cache_key\">ключ кэширования</a>\nзапроса на очистку заканчивается\nзвёздочкой (“<code>*</code>”), то все записи в кэше, соответствующие\nэтой маске, будут удалены из кэша.\nТем не менее, эти записи будут оставаться на диске или до момента удаления\nиз-за <a href=\"#scgi_cache_path\">отсутствия обращения к данным</a>,\nили до обработки их процессом “<a href=\"#purger\">cache purger</a>” (1.7.12),\nили до попытки клиента получить к ним доступ.\n</p><p>\nПример конфигурации:\n</p> <blockquote class=\"example\"><pre>\nscgi_cache_path /data/nginx/cache keys_zone=cache_zone:10m;\n\nmap $request_method $purge_method {\n    PURGE   1;\n    default 0;\n}\n\nserver {\n    ...\n    location / {\n        scgi_pass        http://backend;\n        scgi_cache       cache_zone;\n        scgi_cache_key   $uri;\n        scgi_cache_purge $purge_method;\n    }\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nФункциональность доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"scgi_cache_path","defaultValue":"—","syntax":"scgi_cache_path     путь    [levels=уровни]    [use_temp_path=on|off]    keys_zone=имя:размер    [inactive=время]    [max_size=размер]    [manager_files=число]    [manager_sleep=время]    [manager_threshold=время]    [loader_files=число]    [loader_sleep=время]    [loader_threshold=время]    [purger=on|off]    [purger_files=число]    [purger_sleep=время]    [purger_threshold=время];","context":"http","description":"<p>\nЗадаёт путь и другие параметры кэша.\nДанные кэша хранятся в файлах.\nИменем файла в кэше является результат функции MD5\nот <a href=\"#scgi_cache_key\">ключа кэширования</a>.\nПараметр <code>levels</code> задаёт уровни иерархии кэша:\nможно задать от 1 до 3 уровней, на каждом уровне допускаются значения 1 или 2.\nНапример, при использовании\n</p> <blockquote class=\"example\"><pre>\nscgi_cache_path /data/nginx/cache levels=1:2 keys_zone=one:10m;\n</pre></blockquote><p> \nимена файлов в кэше будут такого вида:\n</p> <blockquote class=\"example\"><pre>\n/data/nginx/cache/<strong>c</strong>/<strong>29</strong>/b7f54b2df7773722d382f4809d650<strong>29c</strong>\n</pre></blockquote><p> \n</p><p>\nКэшируемый ответ сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временные файлы и кэш\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если кэш будет находиться на той же файловой\nсистеме, что и каталог с временными файлами.\nКакой из каталогов будет использоваться для временных файлов\nопределяется параметром <code>use_temp_path</code> (1.7.10).\nЕсли параметр не задан или установлен в значение “<code>on</code>”,\nто будет использоваться каталог, задаваемый директивой\n<a href=\"#scgi_temp_path\">scgi_temp_path</a> для данного location.\nЕсли параметр установлен в значение “<code>off</code>”,\nто временные файлы будут располагаться непосредственно в каталоге кэша.\n</p><p>\nКроме того, все активные ключи и информация о данных хранятся в зоне\nразделяемой памяти, <code><i>имя</i></code> и <code><i>размер</i></code> которой\nзадаются параметром <code>keys_zone</code>.\nЗоны размером в 1 мегабайт достаточно для хранения около 8 тысяч ключей.\n</p><p>\nЕсли к данным кэша не обращаются в течение времени, заданного параметром\n<code>inactive</code>, то данные удаляются, независимо от их свежести.\nПо умолчанию <code>inactive</code> равен 10 минутам.\n</p><p>\nСпециальный процесс “cache manager” следит за максимальным размером кэша,\nзаданным параметром <code>max_size</code>, и при превышении\nего размеров удаляет наименее востребованные данные.\nУдаление данных происходит итерациями, настраиваемыми параметрами (1.11.5)\n<code>manager_files</code>,\n<code>manager_threshold</code> и\n<code>manager_sleep</code>.\nЗа одну итерацию загружается не более <code>manager_files</code>\nэлементов (по умолчанию 100).\nВремя работы одной итерации ограничено параметром\n<code>manager_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>manager_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nЧерез минуту после старта активируется специальный процесс “cache loader”,\nкоторый загружает в зону кэша информацию о ранее закэшированных данных,\nхранящихся на файловой системе.\nЗагрузка также происходит итерациями.\nЗа одну итерацию загружается не более <code>loader_files</code>\nэлементов (по умолчанию 100).\nКроме того, время работы одной итерации ограничено параметром\n<code>loader_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>loader_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nКроме того,\nследующие параметры доступны как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>:\n</p><p>\n</p> <dl class=\"compact\">\n\n<dt id=\"purger\">\n<code>purger</code>=<code>on</code>|<code>off</code>\n</dt>\n<dd>\nУказывает, будут ли записи в кэше, соответствующие\n<a href=\"#scgi_cache_purge\">маске</a>,\nудалены с диска при помощи процесса “cache purger” (1.7.12).\nУстановка параметра в значение <code>on</code>\n(по умолчанию <code>off</code>)\nактивирует процесс “cache purger”, который\nпроходит по всем записям в кэше\nи удаляет записи, соответствующие этой маске.\n</dd>\n\n<dt id=\"purger_files\">\n<code>purger_files</code>=<code><i>число</i></code>\n</dt>\n<dd>\nЗадаёт число элементов, которые будут сканироваться за одну итерацию (1.7.12).\nПо умолчанию <code>purger_files</code> равен 10.\n</dd>\n\n<dt id=\"purger_threshold\">\n<code>purger_threshold</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт продолжительность одной итерации (1.7.12).\nПо умолчанию <code>purger_threshold</code> равен 50 миллисекундам.\n</dd>\n\n<dt id=\"purger_sleep\">\n<code>purger_sleep</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт паузу между итерациями (1.7.12).\nПо умолчанию <code>purger_sleep</code> равен 50 миллисекундам.\n</dd>\n\n</dl><p> \n</p><p>\n</p> <blockquote class=\"note\">\nВ версиях 1.7.3, 1.7.7 и 1.11.10 формат заголовка кэша был изменён.\nПри обновлении на более новую версию nginx\nранее закэшированные ответы будут считаться недействительными.\n</blockquote><p> \n</p>"},{"directive":"scgi_cache_min_uses","defaultValue":"scgi_cache_min_uses 1;","syntax":"scgi_cache_min_uses число;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> запросов, после которого ответ будет закэширован.\n</p>"},{"directive":"scgi_cache_methods","defaultValue":"scgi_cache_methods GET HEAD;","syntax":"scgi_cache_methods     GET |    HEAD |    POST    ...;","context":"http, server, location","description":"<p>\nЕсли метод запроса клиента указан в этой директиве,\nто ответ будет закэширован.\nМетоды “<code>GET</code>” и “<code>HEAD</code>” всегда добавляются\nв список, но тем не менее рекомендуется перечислять их явно.\nСм. также директиву <a href=\"#scgi_no_cache\">scgi_no_cache</a>.\n</p>"},{"directive":"scgi_cache_max_range_offset","defaultValue":"—","syntax":"scgi_cache_max_range_offset число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.6.\n            </p></div><p>\nЗадаёт смещение в байтах для запросов с указанием диапазона запрашиваемых байт\n(byte-range requests).\nЕсли диапазон находится за указанным смещением,\nrange-запрос будет передан на SCGI-сервер\nи ответ не будет закэширован.\n</p>"},{"directive":"scgi_cache_lock_timeout","defaultValue":"scgi_cache_lock_timeout 5s;","syntax":"scgi_cache_lock_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЗадаёт таймаут для <a href=\"#scgi_cache_lock\">scgi_cache_lock</a>.\nПо истечении указанного <code><i>времени</i></code>\nзапрос будет передан на SCGI-сервер,\nоднако ответ не будет закэширован.\n</p> <blockquote class=\"note\">\nДо версии 1.7.8 такой ответ мог быть закэширован.\n</blockquote><p> \n</p>"},{"directive":"scgi_cache_lock_age","defaultValue":"scgi_cache_lock_age 5s;","syntax":"scgi_cache_lock_age время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЕсли последний запрос, переданный на SCGI-сервер\nдля заполнения нового элемента кэша,\nне завершился за указанное <code><i>время</i></code>,\nна SCGI-сервер может быть передан ещё один запрос.\n</p>"},{"directive":"scgi_cache_lock","defaultValue":"scgi_cache_lock off;","syntax":"scgi_cache_lock on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЕсли включено, одновременно только одному запросу будет позволено\nзаполнить новый элемент кэша, идентифицируемый согласно директиве\n<a href=\"#scgi_cache_key\">scgi_cache_key</a>, передав запрос на SCGI-сервер.\nОстальные запросы этого же элемента будут либо ожидать\nпоявления ответа в кэше, либо освобождения блокировки\nэтого элемента, в течение времени, заданного директивой\n<a href=\"#scgi_cache_lock_timeout\">scgi_cache_lock_timeout</a>.\n</p>"},{"directive":"scgi_cache_key","defaultValue":"—","syntax":"scgi_cache_key строка;","context":"http, server, location","description":"<p>\nЗадаёт ключ для кэширования, например,\n</p> <blockquote class=\"example\"><pre>\nscgi_cache_key localhost:9000$request_uri;\n</pre></blockquote><p> \n</p>"},{"directive":"scgi_cache_bypass","defaultValue":"—","syntax":"scgi_cache_bypass строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет браться из кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не берётся из кэша:\n</p> <blockquote class=\"example\"><pre>\nscgi_cache_bypass $cookie_nocache $arg_nocache$arg_comment;\nscgi_cache_bypass $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#scgi_no_cache\">scgi_no_cache</a>.\n</p>"},{"directive":"scgi_cache_background_update","defaultValue":"scgi_cache_background_update off;","syntax":"scgi_cache_background_update on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.10.\n            </p></div><p>\nПозволяет запустить фоновый подзапрос\nдля обновления просроченного элемента кэша,\nв то время как клиенту возвращается устаревший закэшированный ответ.\nИспользование устаревшего закэшированного ответа в момент его обновления\nдолжно быть\n<a href=\"#scgi_cache_use_stale_updating\">разрешено</a>.\n</p>"},{"directive":"scgi_cache","defaultValue":"scgi_cache off;","syntax":"scgi_cache зона | off;","context":"http, server, location","description":"<p>\nЗадаёт зону разделяемой памяти, используемой для кэширования.\nОдна и та же зона может использоваться в нескольких местах.\nВ значении параметра можно использовать переменные (1.7.9).\nПараметр <code>off</code> запрещает кэширование, унаследованное\nс предыдущего уровня конфигурации.\n</p>"},{"directive":"scgi_busy_buffers_size","defaultValue":"scgi_busy_buffers_size 8k|16k;","syntax":"scgi_busy_buffers_size размер;","context":"http, server, location","description":"<p>\nПри включённой <a href=\"#scgi_buffering\">буферизации</a> ответов\nSCGI-сервера, ограничивает суммарный <code><i>размер</i></code>\nбуферов, которые могут быть заняты для отправки ответа клиенту, пока\nответ ещё не прочитан целиком.\nОставшиеся буферы тем временем могут использоваться для чтения ответа\nи, при необходимости, буферизации части ответа во временный файл.\nПо умолчанию <code><i>размер</i></code> ограничен двумя буферами, заданными\nдирективами <a href=\"#scgi_buffer_size\">scgi_buffer_size</a> и <a href=\"#scgi_buffers\">scgi_buffers</a>.\n</p>"},{"directive":"scgi_buffers","defaultValue":"scgi_buffers 8 4k|8k;","syntax":"scgi_buffers число размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> и <code><i>размер</i></code> буферов\nдля одного соединения,\nв которые будет читаться ответ, получаемый от SCGI-сервера.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p>"},{"directive":"scgi_buffering","defaultValue":"scgi_buffering on;","syntax":"scgi_buffering on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает использовать буферизацию ответов SCGI-сервера.\n</p><p>\nЕсли буферизация включена, то nginx принимает ответ SCGI-сервера\nкак можно быстрее, сохраняя его в буферы, заданные директивами\n<a href=\"#scgi_buffer_size\">scgi_buffer_size</a> и <a href=\"#scgi_buffers\">scgi_buffers</a>.\nЕсли ответ не вмещается целиком в память, то его часть может быть записана\nна диск во <a href=\"#scgi_temp_path\">временный файл</a>.\nЗапись во временные файлы контролируется директивами\n<a href=\"#scgi_max_temp_file_size\">scgi_max_temp_file_size</a> и\n<a href=\"#scgi_temp_file_write_size\">scgi_temp_file_write_size</a>.\n</p><p>\nЕсли буферизация выключена, то ответ синхронно передаётся клиенту сразу же\nпо мере его поступления.\nnginx не пытается считать весь ответ SCGI-сервера.\nМаксимальный размер данных, который nginx может принять от сервера\nза один раз, задаётся директивой <a href=\"#scgi_buffer_size\">scgi_buffer_size</a>.\n</p><p>\nБуферизация может быть также включена или выключена путём передачи\nзначения “<code>yes</code>” или “<code>no</code>” в поле\n“X-Accel-Buffering” заголовка ответа.\nЭту возможность можно запретить с помощью директивы\n<a href=\"#scgi_ignore_headers\">scgi_ignore_headers</a>.\n</p>"},{"directive":"scgi_buffer_size","defaultValue":"scgi_buffer_size 4k|8k;","syntax":"scgi_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> буфера, в который будет читаться\nпервая часть ответа, получаемого от SCGI-сервера.\nВ этой части ответа находится, как правило, небольшой заголовок ответа.\nПо умолчанию размер одного буфера равен размеру страницы памяти.\nВ зависимости от платформы это или 4K, или 8K,\nоднако его можно сделать меньше.\n</p>"},{"directive":"scgi_bind","defaultValue":"—","syntax":"scgi_bind     адрес    [transparent] |    off;","context":"http, server, location","description":"<p>\nЗадаёт локальный IP-адрес с необязательным портом (1.11.2),\nкоторый будет использоваться в исходящих соединениях с SCGI-сервером.\nВ значении параметра допустимо использование переменных (1.3.12).\nСпециальное значение <code>off</code> (1.3.12) отменяет действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>scgi_bind</code>, позволяя системе\nсамостоятельно выбирать локальный IP-адрес и порт.\n</p>"},{"directive":"satisfy","defaultValue":"satisfy all;","syntax":"satisfy all | any;","context":"http, server, location","description":"<p>\nРазрешает доступ, если все (<code>all</code>)\nили хотя бы один (<code>any</code>) из модулей\n<a href=\"ngx_http_access_module.html\">ngx_http_access_module</a>,\n<a href=\"ngx_http_auth_basic_module.html\">ngx_http_auth_basic_module</a>,\n<a href=\"ngx_http_auth_request_module.html\">ngx_http_auth_request_module</a>\nили\n<a href=\"ngx_http_auth_jwt_module.html\">ngx_http_auth_jwt_module</a>\nразрешают доступ.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    satisfy any;\n\n    allow 192.168.1.0/32;\n    deny  all;\n\n    auth_basic           \"closed site\";\n    auth_basic_user_file conf/htpasswd;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"root","defaultValue":"root html;","syntax":"root путь;","context":"http, server, location, if в location","description":"<p>\nЗадаёт корневой каталог для запросов.\nНапример, при такой конфигурации\n</p> <blockquote class=\"example\"><pre>\nlocation /i/ {\n    root /data/w3;\n}\n</pre></blockquote><p> \nв ответ на запрос “<code>/i/top.gif</code>” будет отдан файл\n<code>/data/w3/i/top.gif</code>.\n</p><p>\nВ значении параметра <code><i>путь</i></code> можно использовать переменные,\nкроме <code>$document_root</code> и <code>$realpath_root</code>.\n</p><p>\nПуть к файлу формируется путём простого добавления URI к значению директивы\n<code>root</code>.\nЕсли же URI необходимо поменять, следует воспользоваться директивой\n<a href=\"#alias\">alias</a>.\n</p>"},{"directive":"rewrite_log","defaultValue":"rewrite_log off;","syntax":"rewrite_log on | off;","context":"http, server, location, if","description":"<p>\nРазрешает или запрещает записывать в\n<a href=\"../ngx_core_module.html#error_log\">error_log</a>\nна уровне <code>notice</code>\nрезультаты обработки директив модуля <code>ngx_http_rewrite_module</code>.\n</p>"},{"directive":"rewrite","defaultValue":"—","syntax":"rewrite     regex    замена    [флаг];","context":"server, location, if","description":"<p>\nЕсли указанное регулярное выражение соответствует URI запроса, URI изменяется\nв соответствии со строкой замены.\nДирективы <code>rewrite</code> выполняются последовательно,\nв порядке их следования в конфигурационном файле.\nС помощью флагов можно прекратить дальнейшую обработку директив.\nЕсли строка замены начинается с “<code>http://</code>”,\n“<code>https://</code>” или “<code>$scheme</code>”,\nто обработка завершается и клиенту возвращается перенаправление.\n</p><p>\nНеобязательный параметр <code><i>флаг</i></code> может быть одним из:\n</p> <dl class=\"compact\">\n\n<dt><code>last</code></dt>\n<dd>\nзавершает обработку текущего набора директив модуля\n<code>ngx_http_rewrite_module</code>,\nпосле чего ищется новый location, соответствующий изменённому URI;\n</dd>\n\n<dt><code>break</code></dt>\n<dd>\nзавершает обработку текущего набора директив модуля\n<code>ngx_http_rewrite_module</code>\nаналогично директиве <a href=\"#break\">break</a>;\n</dd>\n\n<dt><code>redirect</code></dt>\n<dd>\nвозвращает временное перенаправление с кодом 302;\nиспользуется, если заменяющая строка не начинается с\n“<code>http://</code>”, “<code>https://</code>”\nили “<code>$scheme</code>”;\n</dd>\n\n<dt><code>permanent</code></dt>\n<dd>\nвозвращает постоянное перенаправление с кодом 301.\n</dd>\n\n</dl><p> \nПолный URL перенаправлений формируется согласно\nсхеме запроса (<code>$scheme</code>) и директив\n<a href=\"ngx_http_core_module.html#server_name_in_redirect\">server_name_in_redirect</a> и\n<a href=\"ngx_http_core_module.html#port_in_redirect\">port_in_redirect</a>.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nserver {\n    ...\n    rewrite ^(/download/.*)/media/(.*)\\..*$ $1/mp3/$2.mp3 last;\n    rewrite ^(/download/.*)/audio/(.*)\\..*$ $1/mp3/$2.ra  last;\n    return  403;\n    ...\n}\n</pre></blockquote><p> \n</p><p>\nЕсли же эти директивы поместить в location “<code>/download/</code>”,\nто нужно заменить флаг <code>last</code> на <code>break</code>,\nиначе nginx сделает 10 циклов и вернёт ошибку 500:\n</p> <blockquote class=\"example\"><pre>\nlocation /download/ {\n    rewrite ^(/download/.*)/media/(.*)\\..*$ $1/mp3/$2.mp3 break;\n    rewrite ^(/download/.*)/audio/(.*)\\..*$ $1/mp3/$2.ra  break;\n    return  403;\n}\n</pre></blockquote><p> \n</p><p>\nЕсли в строке замены указаны новые аргументы запроса, то предыдущие\nаргументы запроса добавляются после них.\nЕсли такое поведение нежелательно, можно отказаться от этого добавления,\nуказав в конце строки замены знак вопроса, например:\n</p> <blockquote class=\"example\"><pre>\nrewrite ^/users/(.*)$ /show?user=$1? last;\n</pre></blockquote><p> \n</p><p>\nЕсли в регулярном выражении встречаются символы “<code>}</code>”\nили “<code>;</code>”, то всё выражение следует заключить в одинарные\nили двойные кавычки.\n</p>"},{"directive":"return","defaultValue":"—","syntax":"return значение;","context":"server","description":"<p>\nЗадаёт <code><i>значение</i></code>, отправляемое клиенту.\nВ качестве значения можно использовать текст, переменные и их комбинации.\n</p>"},{"directive":"return","defaultValue":"—","syntax":"return код [текст];return код URL;return URL;","context":"server, location, if","description":"<p>\nЗавершает обработку и возвращает клиенту указанный <code><i>код</i></code>.\nНестандартный код 444 закрывает соединение без передачи\nзаголовка ответа.\n</p><p>\nНачиная с версии 0.8.42 можно задать\nлибо URL перенаправления (для кодов 301, 302, 303, 307 и 308)\nлибо <code><i>текст</i></code> тела ответа (для остальных кодов).\nВ тексте тела ответа и URL перенаправления можно использовать переменные.\nКак частный случай, URL перенаправления может быть задан как URI,\nлокальный для данного сервера, при этом полный URL перенаправления\nформируется согласно схеме запроса (<code>$scheme</code>) и директивам\n<a href=\"ngx_http_core_module.html#server_name_in_redirect\">server_name_in_redirect</a> и\n<a href=\"ngx_http_core_module.html#port_in_redirect\">port_in_redirect</a>.\n</p><p>\nКроме того, в качестве единственного параметра можно указать\n<code><i>URL</i></code> для временного перенаправления с кодом 302.\nТакой параметр должен начинаться со строк “<code>http://</code>”,\n“<code>https://</code>” или “<code>$scheme</code>”.\nВ <code><i>URL</i></code> можно использовать переменные.\n</p><p>\n</p> <blockquote class=\"note\">\nДо версии 0.7.51 можно было возвращать только следующие коды:\n204, 400, 402 — 406, 408, 410, 411, 413, 416 и 500 — 504.\n</blockquote><p> \n\n</p> <blockquote class=\"note\">\nДо версий 1.1.16 и 1.0.13 код 307 не обрабатывался как перенаправление.\n</blockquote><p> \n\n</p> <blockquote class=\"note\">\nДо версии 1.13.0 код 308 не обрабатывался как перенаправление.\n</blockquote><p> \n</p><p>\nСм. также директиву <a href=\"ngx_http_core_module.html#error_page\">error_page</a>.\n</p>"},{"directive":"resolver_timeout","defaultValue":"resolver_timeout 30s;","syntax":"resolver_timeout время;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.3.\n            </p></div><p>\nЗадаёт таймаут для преобразования имени в адрес, например:\n</p> <blockquote class=\"example\"><pre>\nresolver_timeout 5s;\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nДо версии 1.11.3 эта директива была доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"resolver_timeout","defaultValue":"resolver_timeout 30s;","syntax":"resolver_timeout время;","context":"mail, server","description":"<p>\nЗадаёт таймаут для операций DNS, например:\n</p> <blockquote class=\"example\"><pre>\nresolver_timeout 5s;\n</pre></blockquote><p> \n</p>"},{"directive":"resolver_timeout","defaultValue":"resolver_timeout 30s;","syntax":"resolver_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут для преобразования имени в адрес, например:\n</p> <blockquote class=\"example\"><pre>\nresolver_timeout 5s;\n</pre></blockquote><p> \n</p>"},{"directive":"resolver","defaultValue":"—","syntax":"resolver     адрес ...    [valid=время]    [ipv6=on|off];","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.3.\n            </p></div><p>\nЗадаёт серверы DNS, используемые для преобразования имён вышестоящих серверов\nв адреса, например:\n</p> <blockquote class=\"example\"><pre>\nresolver 127.0.0.1 [::1]:5353;\n</pre></blockquote><p> \nАдрес может быть указан в виде доменного имени или IP-адреса,\nи необязательного порта.\nЕсли порт не указан, используется порт 53.\nСерверы DNS опрашиваются циклически.\n</p><p>\nПо умолчанию nginx будет искать как IPv4-, так и IPv6-адреса\nпри преобразовании имён в адреса.\nЕсли поиск IPv6-адресов нежелателен,\nможно указать параметр <code>ipv6=off</code>.\n</p><p>\nПо умолчанию nginx кэширует ответы, используя значение TTL из ответа.\nНеобязательный параметр <code>valid</code> позволяет это\nпереопределить:\n</p> <blockquote class=\"example\"><pre>\nresolver 127.0.0.1 [::1]:5353 valid=30s;\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nДо версии 1.11.3 эта директива была доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"resolver","defaultValue":"resolver off;","syntax":"resolver адрес ...[valid=время];resolver off;","context":"mail, server","description":"<p>\nЗадаёт серверы DNS, используемые для определения имени хоста клиента\nдля передачи его на\n<a href=\"ngx_mail_auth_http_module.html\">сервер аутентификации</a>\nи в команде\n<a href=\"ngx_mail_proxy_module.html#xclient\">XCLIENT</a>\nпри проксировании SMTP.\nНапример:\n</p> <blockquote class=\"example\"><pre>\nresolver 127.0.0.1 [::1]:5353;\n</pre></blockquote><p> \nАдрес может быть указан в виде доменного имени или IP-адреса,\nи необязательного порта (1.3.1, 1.2.2).\nЕсли порт не указан, используется порт 53.\nСерверы DNS опрашиваются циклически.\n</p> <blockquote class=\"note\">\nДо версии 1.1.7 можно было задать лишь один DNS-сервер.\nЗадание DNS-серверов с помощью IPv6-адресов поддерживается\nначиная с версий 1.3.1 и 1.2.2.\n</blockquote><p> \nПо умолчанию nginx кэширует ответы, используя значение TTL из ответа.\nНеобязательный параметр <code>valid</code> позволяет это\nпереопределить:\n</p> <blockquote class=\"example\"><pre>\nresolver 127.0.0.1 [::1]:5353 valid=30s;\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nДо версии 1.1.9 настройка времени кэширования была невозможна\nи nginx всегда кэшировал ответы на срок в 5 минут.\n</blockquote><p> \n</p><p>\nСпециальное значение <code>off</code> запрещает использование DNS.\n</p>"},{"directive":"resolver","defaultValue":"—","syntax":"resolver     адрес ...    [valid=время]    [ipv6=on|off];","context":"http, server, location","description":"<p>\nЗадаёт серверы DNS, используемые для преобразования имён вышестоящих серверов\nв адреса, например:\n</p> <blockquote class=\"example\"><pre>\nresolver 127.0.0.1 [::1]:5353;\n</pre></blockquote><p> \nАдрес может быть указан в виде доменного имени или IP-адреса,\nи необязательного порта (1.3.1, 1.2.2).\nЕсли порт не указан, используется порт 53.\nСерверы DNS опрашиваются циклически.\n</p> <blockquote class=\"note\">\nДо версии 1.1.7 можно было задать лишь один DNS-сервер.\nЗадание DNS-серверов с помощью IPv6-адресов поддерживается\nначиная с версий 1.3.1 и 1.2.2.\n</blockquote><p> \nПо умолчанию nginx будет искать как IPv4-, так и IPv6-адреса\nпри преобразовании имён в адреса.\nЕсли поиск IPv6-адресов нежелателен,\nможно указать параметр <code>ipv6=off</code>.\n</p> <blockquote class=\"note\">\nПреобразование имён в IPv6-адреса поддерживается\nначиная с версии 1.5.8.\n</blockquote><p> \nПо умолчанию nginx кэширует ответы, используя значение TTL из ответа.\nНеобязательный параметр <code>valid</code> позволяет это\nпереопределить:\n</p> <blockquote class=\"example\"><pre>\nresolver 127.0.0.1 [::1]:5353 valid=30s;\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nДо версии 1.1.9 настройка времени кэширования была невозможна\nи nginx всегда кэшировал ответы на срок в 5 минут.\n</blockquote><p> \n</p> <blockquote class=\"note\">\nДля предотвращения DNS-спуфинга рекомендуется\nиспользовать DNS-серверы в защищённой доверенной локальной сети.\n</blockquote><p> \n</p>"},{"directive":"reset_timedout_connection","defaultValue":"reset_timedout_connection off;","syntax":"reset_timedout_connection on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает сброс соединений по таймауту.\nСброс делается следующим образом.\nПеред закрытием сокета для него задаётся параметр\n<code>SO_LINGER</code>\nс таймаутом 0.\nПосле этого при закрытии сокета клиенту отсылается TCP RST, а вся память,\nсвязанная с этим сокетом, освобождается.\nЭто позволяет избежать длительного нахождения уже закрытого сокета в\nсостоянии FIN_WAIT1 с заполненными буферами.\n</p><p>\nНеобходимо отметить, что keep-alive соединения по истечении таймаута\nзакрываются обычным образом.\n</p>"},{"directive":"request_pool_size","defaultValue":"request_pool_size 4k;","syntax":"request_pool_size размер;","context":"http, server","description":"<p>\nПозволяет производить точную настройку выделений памяти\nпод конкретные запросы.\nЭта директива не оказывает существенного влияния на\nпроизводительность, и её не следует использовать.\n</p>"},{"directive":"referer_hash_max_size","defaultValue":"referer_hash_max_size 2048;","syntax":"referer_hash_max_size размер;","context":"server, location","description":"<p>Эта директива появилась в версии 1.0.5.\n            </p></div><p>\nЗадаёт максимальный <code><i>размер</i></code> хэш-таблиц со значениями\n“Referer”.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"referer_hash_bucket_size","defaultValue":"referer_hash_bucket_size 64;","syntax":"referer_hash_bucket_size размер;","context":"server, location","description":"<p>Эта директива появилась в версии 1.0.5.\n            </p></div><p>\nЗадаёт размер корзины хэш-таблиц со значениями “Referer”.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"recursive_error_pages","defaultValue":"recursive_error_pages off;","syntax":"recursive_error_pages on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает делать несколько перенаправлений через директиву\n<a href=\"#error_page\">error_page</a>.\nЧисло таких перенаправлений <a href=\"#internal\">ограничено</a>.\n</p>"},{"directive":"real_ip_recursive","defaultValue":"real_ip_recursive off;","syntax":"real_ip_recursive on | off;","context":"http, server, location","description":"<p>\n                    Эта директива появилась в версиях 1.3.0 и 1.2.1.\n                    \n                        </p>\n                    </div><p>\nПри выключенном рекурсивном поиске исходный адрес клиента,\nсовпадающий с одним из доверенных адресов, заменяется на последний\nадрес, переданный в поле заголовка запроса, заданного\nдирективой <a href=\"#real_ip_header\">real_ip_header</a>.\nПри включённом рекурсивном поиске исходный адрес клиента,\nсовпадающий с одним из доверенных адресов, заменяется на последний\nне доверенный адрес, переданный в заданном поле заголовка запроса.\n</p>"},{"directive":"real_ip_header","defaultValue":"real_ip_header X-Real-IP;","syntax":"real_ip_header     поле |    X-Real-IP |    X-Forwarded-For |    proxy_protocol;","context":"http, server, location","description":"<p>\nЗадаёт поле заголовка запроса,\nзначение которого будет использоваться для замены адреса клиента.\n</p><p>\nЗначение поля заголовка запроса, содержащее необязательный порт,\nтакже используется для замены порта клиента (1.11.0).\nАдрес и порт должны быть указаны согласно\n<a href=\"https://tools.ietf.org/html/rfc3986\">RFC 3986</a>.\n</p><p>\nПараметр <code>proxy_protocol</code> (1.5.12) меняет\nадрес клиента на указанный в заголовке PROXY-протокола.\nПротокол PROXY должен быть предварительно включён при помощи установки\nпараметра <code>proxy_protocol</code> в директиве\n<a href=\"ngx_http_core_module.html#listen\">listen</a>.\n</p>"},{"directive":"read_ahead","defaultValue":"read_ahead 0;","syntax":"read_ahead размер;","context":"http, server, location","description":"<p>\nЗадаёт ядру размер предчтения при работе с файлами.\n</p><p>\nНа Linux используется системный вызов\n<code>posix_fadvise(0, 0, 0, POSIX_FADV_SEQUENTIAL)</code>,\nпоэтому параметр <code><i>размер</i></code> там игнорируется.\n</p><p>\nНа FreeBSD используется системный вызов\n<code>fcntl(O_READAHEAD,\n</code><code><i>размер</i></code><code>)</code>,\nпоявившийся во FreeBSD 9.0-CURRENT.\nДля FreeBSD 7 необходимо установить\n<a href=\"http://sysoev.ru/freebsd/patch.readahead.txt\">патч</a>.\n</p>"},{"directive":"random_index","defaultValue":"random_index off;","syntax":"random_index on | off;","context":"location","description":"<p>\nРазрешает или запрещает в содержащем location обработку этим модулем.\n</p>"},{"directive":"queue","defaultValue":"—","syntax":"queue число[timeout=время];","context":"upstream","description":"<p>Эта директива появилась в версии 1.5.12.\n            </p></div><p>\nЕсли при обработке запроса невозможно сразу выбрать сервер группы, то\nзапрос будет помещён в очередь.\nДиректива задаёт максимальное число запросов, которые могут одновременно\nнаходиться в очереди.\nЕсли очередь переполнена\nили за время, задаваемое параметром <code>timeout</code>,\nтак и не удастся выбрать сервер для передачи ему запроса,\nклиенту будет возвращена ошибка\n502 (Bad Gateway).\n</p><p>\nПо умолчанию параметр <code>timeout</code> равен 60 секундам.\n</p><p>\n</p> <blockquote class=\"note\">\nПри использовании методов балансировки нагрузки, отличных\nот стандартного round-robin, следует активировать их до\nдирективы <code>queue</code>.\n</blockquote><p> \n\n</p> <blockquote class=\"note\">\nЭта директива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"proxy_upload_rate","defaultValue":"proxy_upload_rate 0;","syntax":"proxy_upload_rate скорость;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.9.3.\n            </p></div><p>\nОграничивает скорость чтения данных от клиента.\n<code><i>Скорость</i></code> задаётся в байтах в секунду.\nЗначение 0 отключает ограничение скорости.\nОграничение устанавливается на соединение,\nпоэтому, если клиент одновременно\nоткроет два соединения,\nсуммарная скорость будет вдвое выше заданного ограничения.\n</p>"},{"directive":"proxy_timeout","defaultValue":"proxy_timeout 10m;","syntax":"proxy_timeout время;","context":"stream, server","description":"<p>\nЗадаёт <code><i>таймаут</i></code> между двумя идущими подряд\nоперациями чтения или записи\nна клиентском соединении или соединении с проксируемым сервером.\nЕсли по истечении этого времени данные не передавались,\nсоединение закрывается.\n</p>"},{"directive":"proxy_timeout","defaultValue":"proxy_timeout 24h;","syntax":"proxy_timeout время;","context":"mail, server","description":"<p>\nЗадаёт <code><i>таймаут</i></code> между двумя идущими подряд\nоперациями чтения или записи\nна клиентском соединении или соединении с проксируемым сервером.\nЕсли по истечении этого времени данные не передавались,\nсоединение закрывается.\n</p>"},{"directive":"proxy_temp_path","defaultValue":"proxy_temp_path proxy_temp;","syntax":"proxy_temp_path     путь    [уровень1    [уровень2    [уровень3]]];","context":"http, server, location","description":"<p>\nЗадаёт имя каталога для хранения временных файлов с данными,\nполученными от проксируемых серверов.\nВ каталоге может использоваться иерархия подкаталогов до трёх уровней.\nНапример, при такой конфигурации\n</p> <blockquote class=\"example\"><pre>\nproxy_temp_path /spool/nginx/proxy_temp 1 2;\n</pre></blockquote><p> \nвременный файл будет следующего вида:\n</p> <blockquote class=\"example\"><pre>\n/spool/nginx/proxy_temp/<strong>7</strong>/<strong>45</strong>/00000123<strong>457</strong>\n</pre></blockquote><p> \n</p><p>\nСм. также параметр <code>use_temp_path</code> директивы\n<a href=\"#proxy_cache_path\">proxy_cache_path</a>.\n</p>"},{"directive":"proxy_temp_file_write_size","defaultValue":"proxy_temp_file_write_size 8k|16k;","syntax":"proxy_temp_file_write_size размер;","context":"http, server, location","description":"<p>\nОграничивает <code><i>размер</i></code> данных, сбрасываемых во временный файл\nза один раз, при включённой буферизации ответов проксируемого сервера\nво временные файлы.\nПо умолчанию <code><i>размер</i></code> ограничен двумя буферами, заданными\nдирективами <a href=\"#proxy_buffer_size\">proxy_buffer_size</a> и <a href=\"#proxy_buffers\">proxy_buffers</a>.\nМаксимальный размер временного файла задаётся директивой\n<a href=\"#proxy_max_temp_file_size\">proxy_max_temp_file_size</a>.\n</p>"},{"directive":"proxy_store_access","defaultValue":"proxy_store_access user:rw;","syntax":"proxy_store_access пользователи:права ...;","context":"http, server, location","description":"<p>\nЗадаёт права доступа для создаваемых файлов и каталогов, например,\n</p> <blockquote class=\"example\"><pre>\nproxy_store_access user:rw group:rw all:r;\n</pre></blockquote><p> \n</p><p>\nЕсли заданы какие-либо права для <code>group</code> или\n<code>all</code>, то права для <code>user</code>\nуказывать необязательно:\n</p> <blockquote class=\"example\"><pre>\nproxy_store_access group:rw all:r;\n</pre></blockquote><p> \n</p>"},{"directive":"proxy_store","defaultValue":"proxy_store off;","syntax":"proxy_store     on |    off |    строка;","context":"http, server, location","description":"<p>\nРазрешает сохранение на диск файлов.\nПараметр <code>on</code> сохраняет файлы в соответствии с путями,\nуказанными в директивах\n<a href=\"ngx_http_core_module.html#alias\">alias</a> или\n<a href=\"ngx_http_core_module.html#root\">root</a>.\nПараметр <code>off</code> запрещает сохранение файлов.\nКроме того, имя файла можно задать явно с помощью строки с переменными:\n</p> <blockquote class=\"example\"><pre>\nproxy_store /data/www$original_uri;\n</pre></blockquote><p> \n</p><p>\nВремя изменения файлов выставляется согласно полученному полю\n“Last-Modified” в заголовке ответа.\nОтвет сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временный файл и постоянное место хранения ответа\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если сохраняемые файлы будут находиться на той же файловой\nсистеме, что и каталог с временными файлами, задаваемый директивой\n<a href=\"#proxy_temp_path\">proxy_temp_path</a> для данного location.\n</p><p>\nДирективу можно использовать для создания локальных копий статических\nнеизменяемых файлов, например, так:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    root               /data/www;\n    error_page         404 = /fetch$uri;\n}\n\nlocation /fetch/ {\n    internal;\n\n    proxy_pass         http://backend/;\n    proxy_store        on;\n    proxy_store_access user:rw group:rw all:r;\n    proxy_temp_path    /data/temp;\n\n    alias              /data/www/;\n}\n</pre></blockquote><p> \n</p><p>\nили так:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    root               /data/www;\n    error_page         404 = @fetch;\n}\n\nlocation @fetch {\n    internal;\n\n    proxy_pass         http://backend;\n    proxy_store        on;\n    proxy_store_access user:rw group:rw all:r;\n    proxy_temp_path    /data/temp;\n\n    root               /data/www;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"proxy_ssl_verify_depth","defaultValue":"proxy_ssl_verify_depth 1;","syntax":"proxy_ssl_verify_depth число;","context":"stream, server","description":"<p>\nУстанавливает глубину проверки в цепочке сертификатов проксируемого сервера.\n</p>"},{"directive":"proxy_ssl_verify_depth","defaultValue":"proxy_ssl_verify_depth 1;","syntax":"proxy_ssl_verify_depth число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nУстанавливает глубину проверки в цепочке сертификатов\nпроксируемого HTTPS-сервера.\n</p>"},{"directive":"proxy_ssl_verify","defaultValue":"proxy_ssl_verify off;","syntax":"proxy_ssl_verify on | off;","context":"stream, server","description":"<p>\nРазрешает или запрещает проверку сертификата проксируемого сервера.\n</p>"},{"directive":"proxy_ssl_verify","defaultValue":"proxy_ssl_verify off;","syntax":"proxy_ssl_verify on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nРазрешает или запрещает проверку сертификата проксируемого HTTPS-сервера.\n</p>"},{"directive":"proxy_ssl_trusted_certificate","defaultValue":"—","syntax":"proxy_ssl_trusted_certificate файл;","context":"stream, server","description":"<p>\nЗадаёт <code><i>файл</i></code> с доверенными сертификатами CA в формате PEM,\nиспользуемыми при <a href=\"#proxy_ssl_verify\">проверке</a>\nсертификата проксируемого сервера.\n</p>"},{"directive":"proxy_ssl_trusted_certificate","defaultValue":"—","syntax":"proxy_ssl_trusted_certificate файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с доверенными сертификатами CA в формате PEM,\nиспользуемыми при <a href=\"#proxy_ssl_verify\">проверке</a>\nсертификата проксируемого HTTPS-сервера.\n</p>"},{"directive":"proxy_ssl_session_reuse","defaultValue":"proxy_ssl_session_reuse on;","syntax":"proxy_ssl_session_reuse on | off;","context":"stream, server","description":"<p>\nОпределяет, использовать ли повторно SSL-сессии при\nработе с проксируемым сервером.\nЕсли в логах появляются ошибки\n“<code>SSL3_GET_FINISHED:digest check failed</code>”,\nто можно попробовать выключить\nповторное использование сессий.\n</p>"},{"directive":"proxy_ssl_session_reuse","defaultValue":"proxy_ssl_session_reuse on;","syntax":"proxy_ssl_session_reuse on | off;","context":"http, server, location","description":"<p>\nОпределяет, использовать ли повторно SSL-сессии при\nработе с проксированным сервером.\nЕсли в логах появляются ошибки\n“<code>SSL3_GET_FINISHED:digest check failed</code>”,\nто можно попробовать выключить\nповторное использование сессий.\n</p>"},{"directive":"proxy_ssl_server_name","defaultValue":"proxy_ssl_server_name off;","syntax":"proxy_ssl_server_name on | off;","context":"stream, server","description":"<p>\nРазрешает или запрещает передачу имени сервера через\n<a href=\"http://en.wikipedia.org/wiki/Server_Name_Indication\">расширение\nServer Name Indication протокола TLS</a> (SNI, RFC 6066)\nпри установлении соединения с проксируемым сервером.\n</p>"},{"directive":"proxy_ssl_server_name","defaultValue":"proxy_ssl_server_name off;","syntax":"proxy_ssl_server_name on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nРазрешает или запрещает передачу имени сервера через\n<a href=\"http://en.wikipedia.org/wiki/Server_Name_Indication\">расширение\nServer Name Indication протокола TLS</a> (SNI, RFC 6066)\nпри установлении соединения с проксируемым HTTPS-сервером.\n</p>"},{"directive":"proxy_ssl_protocols","defaultValue":"proxy_ssl_protocols TLSv1 TLSv1.1 TLSv1.2;","syntax":"proxy_ssl_protocols     [SSLv2]    [SSLv3]    [TLSv1]    [TLSv1.1]    [TLSv1.2]    [TLSv1.3];","context":"stream, server","description":"<p>\nРазрешает указанные протоколы для соединений с проксируемым сервером.\n</p>"},{"directive":"proxy_ssl_protocols","defaultValue":"proxy_ssl_protocols TLSv1 TLSv1.1 TLSv1.2;","syntax":"proxy_ssl_protocols     [SSLv2]    [SSLv3]    [TLSv1]    [TLSv1.1]    [TLSv1.2]    [TLSv1.3];","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.6.\n            </p></div><p>\nРазрешает указанные протоколы для запросов к проксируемому HTTPS-серверу.\n</p>"},{"directive":"proxy_ssl_password_file","defaultValue":"—","syntax":"proxy_ssl_password_file файл;","context":"stream, server","description":"<p>\nЗадаёт <code><i>файл</i></code> с паролями от\n<a href=\"#proxy_ssl_certificate_key\">секретных ключей</a>,\nгде каждый пароль указан на отдельной строке.\nПароли применяются по очереди в момент загрузки ключа.\n</p>"},{"directive":"proxy_ssl_password_file","defaultValue":"—","syntax":"proxy_ssl_password_file файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с паролями от\n<a href=\"#proxy_ssl_certificate_key\">секретных ключей</a>,\nгде каждый пароль указан на отдельной строке.\nПароли применяются по очереди в момент загрузки ключа.\n</p>"},{"directive":"proxy_ssl_name","defaultValue":"proxy_ssl_name хост из proxy_pass;","syntax":"proxy_ssl_name имя;","context":"stream, server","description":"<p>\nПозволяет переопределить имя сервера, используемое при\n<a href=\"#proxy_ssl_verify\">проверке</a>\nсертификата проксируемого сервера, а также для\n<a href=\"#proxy_ssl_server_name\">передачи его через SNI</a>\nпри установлении соединения с проксируемым сервером.\nИмя сервера можно также задать с помощью переменных (1.11.3).\n</p><p>\nПо умолчанию используется имя хоста из адреса, заданного\nдирективой <a href=\"#proxy_pass\">proxy_pass</a>.\n</p>"},{"directive":"proxy_ssl_name","defaultValue":"proxy_ssl_name $proxy_host;","syntax":"proxy_ssl_name имя;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nПозволяет переопределить имя сервера, используемое при\n<a href=\"#proxy_ssl_verify\">проверке</a>\nсертификата проксируемого HTTPS-сервера, а также для\n<a href=\"#proxy_ssl_server_name\">передачи его через SNI</a>\nпри установлении соединения с проксируемым HTTPS-сервером.\n</p><p>\nПо умолчанию используется имя хоста из URL’а, заданного\nдирективой <a href=\"#proxy_pass\">proxy_pass</a>.\n</p>"},{"directive":"proxy_ssl_crl","defaultValue":"—","syntax":"proxy_ssl_crl файл;","context":"stream, server","description":"<p>\nУказывает <code><i>файл</i></code> с отозванными сертификатами (CRL)\nв формате PEM, используемыми при <a href=\"#proxy_ssl_verify\">проверке</a>\nсертификата проксируемого сервера.\n</p>"},{"directive":"proxy_ssl_crl","defaultValue":"—","syntax":"proxy_ssl_crl файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.0.\n            </p></div><p>\nУказывает <code><i>файл</i></code> с отозванными сертификатами (CRL)\nв формате PEM, используемыми при <a href=\"#proxy_ssl_verify\">проверке</a>\nсертификата проксируемого HTTPS-сервера.\n</p>"},{"directive":"proxy_ssl_ciphers","defaultValue":"proxy_ssl_ciphers DEFAULT;","syntax":"proxy_ssl_ciphers шифры;","context":"stream, server","description":"<p>\nОписывает разрешённые шифры для соединений с проксируемым сервером.\nШифры задаются в формате, поддерживаемом библиотекой OpenSSL.\n</p><p>\nПолный список можно посмотреть с помощью команды\n“<code>openssl ciphers</code>”.\n</p>"},{"directive":"proxy_ssl_ciphers","defaultValue":"proxy_ssl_ciphers DEFAULT;","syntax":"proxy_ssl_ciphers шифры;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.6.\n            </p></div><p>\nОписывает разрешённые шифры для запросов к проксируемому HTTPS-серверу.\nШифры задаются в формате, поддерживаемом библиотекой OpenSSL.\n</p><p>\nПолный список можно посмотреть с помощью команды\n“<code>openssl ciphers</code>”.\n</p>"},{"directive":"proxy_ssl_certificate_key","defaultValue":"—","syntax":"proxy_ssl_certificate_key файл;","context":"stream, server","description":"<p>\nЗадаёт <code><i>файл</i></code> с секретным ключом в формате PEM\nдля аутентификации на проксируемом сервере.\n</p>"},{"directive":"proxy_ssl_certificate_key","defaultValue":"—","syntax":"proxy_ssl_certificate_key файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с секретным ключом в формате PEM\nдля аутентификации на проксируемом HTTPS-сервере.\n</p><p>\nВместо <code><i>файла</i></code> можно указать значение\n<code>engine</code>:<code><i>имя</i></code>:<code><i>id</i></code> (1.7.9),\nкоторое загружает ключ с указанным <code><i>id</i></code>\nиз OpenSSL engine с заданным <code><i>именем</i></code>.\n</p>"},{"directive":"proxy_ssl_certificate","defaultValue":"—","syntax":"proxy_ssl_certificate файл;","context":"stream, server","description":"<p>\nЗадаёт <code><i>файл</i></code> с сертификатом в формате PEM\nдля аутентификации на проксируемом сервере.\n</p>"},{"directive":"proxy_ssl_certificate","defaultValue":"—","syntax":"proxy_ssl_certificate файл;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЗадаёт <code><i>файл</i></code> с сертификатом в формате PEM\nдля аутентификации на проксируемом HTTPS-сервере.\n</p>"},{"directive":"proxy_ssl","defaultValue":"proxy_ssl off;","syntax":"proxy_ssl on | off;","context":"stream, server","description":"<p>\nВключает протоколы SSL/TLS для соединений с проксируемым сервером.\n</p>"},{"directive":"proxy_set_header","defaultValue":"proxy_set_header Host $proxy_host;proxy_set_header Connection close;","syntax":"proxy_set_header поле значение;","context":"http, server, location","description":"<p>\nПозволяет переопределять или добавлять поля заголовка запроса,\n<a href=\"#proxy_pass_request_headers\">передаваемые</a> проксируемому серверу.\nВ качестве значения можно использовать текст, переменные и их комбинации.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <code>proxy_set_header</code>.\nПо умолчанию переопределяются только два поля:\n</p> <blockquote class=\"example\"><pre>\nproxy_set_header Host       $proxy_host;\nproxy_set_header Connection close;\n</pre></blockquote><p> \nЕсли включено кэширование, поля заголовка\n“If-Modified-Since”,\n“If-Unmodified-Since”,\n“If-None-Match”,\n“If-Match”,\n“Range”\nи\n“If-Range”\nисходного запроса не передаются на проксируемый сервер.\n</p><p>\nНеизменённое поле заголовка запроса “Host” можно передать так:\n</p> <blockquote class=\"example\"><pre>\nproxy_set_header Host       $http_host;\n</pre></blockquote><p> \n</p><p>\nОднако, если это поле отсутствует в заголовке запроса клиента, то ничего\nпередаваться не будет.\nВ этом случае лучше воспользоваться переменной <code>$host</code> - её\nзначение равно имени сервера в поле “Host”\nзаголовка запроса, или же основному имени сервера, если поля нет:\n</p> <blockquote class=\"example\"><pre>\nproxy_set_header Host       $host;\n</pre></blockquote><p> \n</p><p>\nКроме того, можно передать имя сервера вместе с портом проксируемого сервера:\n</p> <blockquote class=\"example\"><pre>\nproxy_set_header Host       $host:$proxy_port;\n</pre></blockquote><p> \n</p><p>\nЕсли значение поля заголовка — пустая строка, то поле вообще\nне будет передаваться проксируемому серверу:\n</p> <blockquote class=\"example\"><pre>\nproxy_set_header Accept-Encoding \"\";\n</pre></blockquote><p> \n</p>"},{"directive":"proxy_set_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"proxy_send_timeout","defaultValue":"proxy_send_timeout 60s;","syntax":"proxy_send_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при передаче запроса проксированному серверу.\nТаймаут устанавливается не на всю передачу запроса,\nа только между двумя операциями записи.\nЕсли по истечении этого времени проксируемый сервер не примет новых данных,\nсоединение закрывается.\n</p>"},{"directive":"proxy_send_lowat","defaultValue":"proxy_send_lowat 0;","syntax":"proxy_send_lowat размер;","context":"http, server, location","description":"<p>\nПри установке директивы в ненулевое значение nginx будет пытаться минимизировать\nчисло операций отправки на исходящих соединениях с проксируемым сервером либо\nпри помощи флага <code>NOTE_LOWAT</code> метода\n<a href=\"../events.html#kqueue\">kqueue</a>,\nлибо при помощи параметра сокета <code>SO_SNDLOWAT</code>,\nс указанным <code><i>размером</i></code>.\n</p><p>\nЭта директива игнорируется на Linux, Solaris и Windows.\n</p>"},{"directive":"proxy_responses","defaultValue":"—","syntax":"proxy_responses число;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.9.13.\n            </p></div><p>\nЗадаёт количество датаграмм, ожидаемых от проксируемого сервера\nв ответ на запрос клиента\nв случае, если используется протокол\n<a href=\"ngx_stream_core_module.html#udp\">UDP</a>.\nПо умолчанию количество датаграмм не ограничено:\nответные датаграммы будут отправляться\nдо истечения значения <a href=\"#proxy_timeout\">proxy_timeout</a>.\n</p>"},{"directive":"proxy_request_buffering","defaultValue":"proxy_request_buffering on;","syntax":"proxy_request_buffering on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nРазрешает или запрещает использовать буферизацию тела запроса клиента.\n</p>"},{"directive":"proxy_redirect","defaultValue":"proxy_redirect default;","syntax":"proxy_redirect default;proxy_redirect off;proxy_redirect перенаправление замена;","context":"http, server, location","description":"<p>\nЗадаёт текст, который нужно изменить в полях заголовка\n“Location” и “Refresh” в ответе\nпроксируемого сервера.\nПредположим, проксируемый сервер вернул поле заголовка\n“<code>Location: http://localhost:8000/two/some/uri/</code>”.\nДиректива\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect http://localhost:8000/two/ http://frontend/one/;\n</pre></blockquote><p> \nперепишет эту строку в виде\n“<code>Location: http://frontend/one/some/uri/</code>”.\n</p><p>\nВ заменяемой строке можно не указывать имя сервера:\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect http://localhost:8000/two/ /;\n</pre></blockquote><p> \nтогда будут подставлены основное имя сервера и порт, если он отличен от 80.\n</p><p>\nСтандартная замена, задаваемая параметром <code>default</code>,\nиспользует параметры директив\n<a href=\"ngx_http_core_module.html#location\">location</a> и\n<a href=\"#proxy_pass\">proxy_pass</a>.\nПоэтому две нижеприведённые конфигурации одинаковы:\n</p> <blockquote class=\"example\"><pre>\nlocation /one/ {\n    proxy_pass     http://upstream:port/two/;\n    proxy_redirect default;\n</pre></blockquote><p> \n\n</p> <blockquote class=\"example\"><pre>\nlocation /one/ {\n    proxy_pass     http://upstream:port/two/;\n    proxy_redirect http://upstream:port/two/ /one/;\n</pre></blockquote><p> \nПараметр <code>default</code> недопустим, если в <a href=\"#proxy_pass\">proxy_pass</a>\nиспользуются переменные.\n</p><p>\nВ строке <code><i>замена</i></code> можно использовать переменные:\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect http://localhost:8000/ http://$host:$server_port/;\n</pre></blockquote><p> \n</p><p>\nВ строке <code><i>перенаправление</i></code> тоже можно использовать (1.1.11)\nпеременные:\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect http://$proxy_host:8000/ /;\n</pre></blockquote><p> \n</p><p>\nДирективу также можно задать (1.1.11) при помощи регулярных выражений.\nПри этом <code><i>перенаправление</i></code> должно начинаться либо с символа\n“<code>~</code>”, если при сравнении следует учитывать регистр символов,\nлибо с символов “<code>~*</code>”, если регистр символов учитывать\nне нужно.\nРегулярное выражение может содержать именованные и позиционные выделения,\nа <code><i>замена</i></code> ссылаться на них:\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect ~^(http://[^:]+):\\d+(/.+)$ $1$2;\nproxy_redirect ~*/user/([^/]+)/(.+)$      http://$1.example.com/$2;\n</pre></blockquote><p> \n</p><p>\nДиректив <code>proxy_redirect</code> может быть несколько:\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect default;\nproxy_redirect http://localhost:8000/  /;\nproxy_redirect http://www.example.com/ /;\n</pre></blockquote><p> \n</p><p>\nПараметр <code>off</code> запрещает все директивы\n<code>proxy_redirect</code>\nна данном уровне:\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect off;\nproxy_redirect default;\nproxy_redirect http://localhost:8000/  /;\nproxy_redirect http://www.example.com/ /;\n</pre></blockquote><p> \n</p><p>\nС помощью этой директивы можно также добавлять имя хоста к относительным\nперенаправлениям, выдаваемым проксируемым сервером:\n</p> <blockquote class=\"example\"><pre>\nproxy_redirect / /;\n</pre></blockquote><p> \n</p>"},{"directive":"proxy_read_timeout","defaultValue":"proxy_read_timeout 60s;","syntax":"proxy_read_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при чтении ответа проксированного сервера.\nТаймаут устанавливается не на всю передачу ответа,\nа только между двумя операциями чтения.\nЕсли по истечении этого времени проксируемый сервер ничего не передаст,\nсоединение закрывается.\n</p>"},{"directive":"proxy_protocol_timeout","defaultValue":"proxy_protocol_timeout 30s;","syntax":"proxy_protocol_timeout время;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.4.\n            </p></div><p>\nЗадаёт <code><i>время</i></code> для\nзавершения операции чтения заголовка протокола PROXY.\nЕсли по истечении этого времени заголовок полностью не получен,\nсоединение закрывается.\n</p>"},{"directive":"proxy_protocol","defaultValue":"proxy_protocol off;","syntax":"proxy_protocol on | off;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.9.2.\n            </p></div><p>\nВключает\n<a href=\"http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt\">протокол\nPROXY</a> для соединений с проксируемым сервером.\n</p>"},{"directive":"proxy_pass_request_headers","defaultValue":"proxy_pass_request_headers on;","syntax":"proxy_pass_request_headers on | off;","context":"http, server, location","description":"<p>\nПозволяет запретить передачу полей заголовка исходного запроса на\nпроксируемый сервер.\n</p>"},{"directive":"proxy_pass_request_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"proxy_pass_header","defaultValue":"—","syntax":"proxy_pass_header поле;","context":"http, server, location","description":"<p>\nРазрешает передавать от проксируемого сервера клиенту\n<a href=\"#proxy_hide_header\">запрещённые для передачи</a> поля заголовка.\n</p>"},{"directive":"proxy_pass_error_message","defaultValue":"proxy_pass_error_message off;","syntax":"proxy_pass_error_message on | off;","context":"mail, server","description":"<p>\nОпределяет, передавать ли клиенту сообщение об ошибке,\nполученное при аутентификации на бэкенде.\n</p><p>\nОбычно, если аутентификация в nginx прошла успешно,\nбэкенд не может вернуть ошибку.\nЕсли же он всё-таки возвращает ошибку,\nэто значит, что произошла ошибка внутри системы.\nВ таких случаях сообщение бэкенда может содержать информацию,\nкоторую нельзя показывать клиенту.\nОднако для некоторых POP3-серверов ошибка в ответ на правильный пароль\nявляется штатным поведением.\nНапример, CommuniGatePro извещает пользователя о\n<a href=\"http://www.stalker.com/CommuniGatePro/Alerts.html#Quota\">переполнении\nящика</a> или других событиях, периодически выдавая\n<a href=\"http://www.stalker.com/CommuniGatePro/POP.html#Alerts\">ошибку\nаутентификации</a>.\nВ этом случае директиву стоит включить.\n</p>"},{"directive":"proxy_pass","defaultValue":"—","syntax":"proxy_pass адрес;","context":"server","description":"<p>\nЗадаёт адрес проксируемого сервера.\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи порта:\n</p> <blockquote class=\"example\"><pre>\nproxy_pass localhost:12345;\n</pre></blockquote><p> \nили в виде пути UNIX-сокета:\n</p> <blockquote class=\"example\"><pre>\nproxy_pass unix:/tmp/stream.socket;\n</pre></blockquote><p> \n</p><p>\nЕсли доменному имени соответствует несколько адресов, то все они будут\nиспользоваться по очереди (round-robin).\nКроме того, в качестве адреса можно указать\n<a href=\"ngx_stream_upstream_module.html\">группу серверов</a>.\n</p><p>\nАдрес можно также задать с помощью переменных (1.11.3):\n</p> <blockquote class=\"example\"><pre>\nproxy_pass $upstream;\n</pre></blockquote><p> \nВ этом случае имя сервера ищется среди описанных\n<a href=\"ngx_stream_upstream_module.html\">групп серверов</a>\nи если не найдено, то определяется с помощью\n<a href=\"ngx_stream_core_module.html#resolver\">resolver</a>’а.\n</p>"},{"directive":"proxy_pass","defaultValue":"—","syntax":"proxy_pass URL;","context":"location, if в location, limit_except","description":"<p>\nЗадаёт протокол и адрес проксируемого сервера, а также необязательный URI,\nна который должен отображаться location.\nВ качестве протокола можно указать\n“<code>http</code>” или “<code>https</code>”.\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи необязательного порта:\n</p> <blockquote class=\"example\"><pre>\nproxy_pass http://localhost:8000/uri/;\n</pre></blockquote><p> \nили в виде пути UNIX-сокета, который указывается после слова\n“<code>unix</code>” и заключается в двоеточия:\n</p> <blockquote class=\"example\"><pre>\nproxy_pass http://unix:/tmp/backend.socket:/uri/;\n</pre></blockquote><p> \n</p><p>\nЕсли доменному имени соответствует несколько адресов, то все они будут\nиспользоваться по очереди (round-robin).\nКроме того, в качестве адреса можно указать\n<a href=\"ngx_http_upstream_module.html\">группу серверов</a>.\n</p><p>\nВ значении параметра можно использовать переменные.\nВ этом случае, если адрес указан в виде доменного имени,\nимя ищется среди описанных групп серверов\nи если не найдено, то определяется с помощью\n<a href=\"ngx_http_core_module.html#resolver\">resolver</a>’а.\n</p><p>\nURI запроса передаётся на сервер так:\n</p> <ul>\n\n<li>\nЕсли директива <code>proxy_pass</code> указана с URI,\nто при передаче запроса серверу часть\n<a href=\"ngx_http_core_module.html#location\">нормализованного</a>\nURI запроса, соответствующая location, заменяется на URI,\nуказанный в директиве:\n<blockquote class=\"example\"><pre>\nlocation /name/ {\n    proxy_pass http://127.0.0.1/remote/;\n}\n</pre></blockquote>\n</li>\n\n<li>\nЕсли директива <code>proxy_pass</code> указана без URI,\nто при обработке первоначального запроса на сервер передаётся\nURI запроса в том же виде, в каком его прислал клиент,\nа при обработке изменённого URI - \nнормализованный URI запроса целиком:\n<blockquote class=\"example\"><pre>\nlocation /some/path/ {\n    proxy_pass http://127.0.0.1;\n}\n</pre></blockquote>\n<blockquote class=\"note\">\nДо версии 1.1.12,\nесли <code>proxy_pass</code> указана без URI,\nв ряде случаев при изменении URI на сервер мог передаваться\nURI первоначального запроса вместо изменённого URI.\n</blockquote>\n</li>\n</ul><p> \n</p><p>\nВ ряде случаев часть URI запроса, подлежащую замене, выделить невозможно:\n</p> <ul>\n\n<li>\nЕсли location задан регулярным выражением,\nа также в именованных location’ах.\n<p>\nВ этих случаях\n<code>proxy_pass</code> следует указывать без URI.\n</p>\n</li>\n\n<li>\nЕсли внутри проксируемого location с помощью директивы\n<a href=\"ngx_http_rewrite_module.html#rewrite\">rewrite</a> изменяется\nURI, и именно с этой конфигурацией будет обрабатываться запрос\n(<code>break</code>):\n<blockquote class=\"example\"><pre>\nlocation /name/ {\n    rewrite    /name/([^/]+) /users?name=$1 break;\n    proxy_pass http://127.0.0.1;\n}\n</pre></blockquote>\n<p>\nВ этом случае URI, указанный в директиве, игнорируется, и на сервер\nпередаётся изменённый URI запроса целиком.\n</p>\n</li>\n\n<li>\nПри использовании переменных в <code>proxy_pass</code>:\n<blockquote class=\"example\"><pre>\nlocation /name/ {\n    proxy_pass http://127.0.0.1$request_uri;\n}\n</pre></blockquote>\nВ этом случае если в директиве указан URI,\nон передаётся на сервер как есть,\nзаменяя URI первоначального запроса.\n</li>\n</ul><p> \n</p><p>\nПроксирование <a href=\"websocket.html\">WebSocket</a> требует особой\nнастройки и поддерживается начиная с версии 1.3.13.\n</p>"},{"directive":"proxy_no_cache","defaultValue":"—","syntax":"proxy_no_cache строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет сохраняться в кэш.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не будет сохранён:\n</p> <blockquote class=\"example\"><pre>\nproxy_no_cache $cookie_nocache $arg_nocache$arg_comment;\nproxy_no_cache $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#proxy_cache_bypass\">proxy_cache_bypass</a>.\n</p>"},{"directive":"proxy_next_upstream_tries","defaultValue":"proxy_next_upstream_tries 0;","syntax":"proxy_next_upstream_tries число;","context":"stream, server","description":"<p>\nОграничивает число допустимых попыток для передачи соединения\n<a href=\"#proxy_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"proxy_next_upstream_tries","defaultValue":"proxy_next_upstream_tries 0;","syntax":"proxy_next_upstream_tries число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает число допустимых попыток для передачи запроса\n<a href=\"#proxy_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"proxy_next_upstream_timeout","defaultValue":"proxy_next_upstream_timeout 0;","syntax":"proxy_next_upstream_timeout время;","context":"stream, server","description":"<p>\nОграничивает время, в течение которого возможна передача соединения\n<a href=\"#proxy_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"proxy_next_upstream_timeout","defaultValue":"proxy_next_upstream_timeout 0;","syntax":"proxy_next_upstream_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает время, в течение которого возможна передача запроса\n<a href=\"#proxy_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"proxy_next_upstream","defaultValue":"proxy_next_upstream on;","syntax":"proxy_next_upstream on | off;","context":"stream, server","description":"<p>\nПри невозможности установить соединение с проксируемым сервером определяет,\nбудет ли клиентское соединение передано следующему серверу.\n</p><p>\nПередача соединения следующему серверу может быть ограничена по\n<a href=\"#proxy_next_upstream_tries\">количеству попыток</a>\nи по <a href=\"#proxy_next_upstream_timeout\">времени</a>.\n</p>"},{"directive":"proxy_next_upstream","defaultValue":"proxy_next_upstream error timeout;","syntax":"proxy_next_upstream     error |    timeout |    invalid_header |    http_500 |    http_502 |    http_503 |    http_504 |    http_403 |    http_404 |    http_429 |    non_idempotent |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях запрос будет передан следующему серверу:\n</p> <dl class=\"compact\">\n\n<dt><code>error</code></dt>\n<dd>произошла ошибка соединения с сервером, передачи ему запроса или\nчтения заголовка ответа сервера;</dd>\n\n<dt><code>timeout</code></dt>\n<dd>произошёл таймаут во время соединения с сервером,\nпередачи ему запроса или чтения заголовка ответа сервера;</dd>\n\n<dt><code>invalid_header</code></dt>\n<dd>сервер вернул пустой или неверный ответ;</dd>\n\n<dt><code>http_500</code></dt>\n<dd>сервер вернул ответ с кодом 500;</dd>\n\n<dt><code>http_502</code></dt>\n<dd>сервер вернул ответ с кодом 502;</dd>\n\n<dt><code>http_503</code></dt>\n<dd>сервер вернул ответ с кодом 503;</dd>\n\n<dt><code>http_504</code></dt>\n<dd>сервер вернул ответ с кодом 504;</dd>\n\n<dt><code>http_403</code></dt>\n<dd>сервер вернул ответ с кодом 403;</dd>\n\n<dt><code>http_404</code></dt>\n<dd>сервер вернул ответ с кодом 404;</dd>\n\n<dt><code>http_429</code></dt>\n<dd>сервер вернул ответ с кодом 429 (1.11.13);</dd>\n\n<dt id=\"non_idempotent\"><code>non_idempotent</code></dt>\n<dd>обычно запросы с\n<a href=\"https://tools.ietf.org/html/rfc7231#section-4.2.2\">неидемпотентным</a>\nметодом\n(<code>POST</code>, <code>LOCK</code>, <code>PATCH</code>)\nне передаются на другой сервер,\nесли запрос серверу группы уже был отправлен (1.9.13);\nвключение параметра явно разрешает повторять подобные запросы;\n</dd>\n\n\n<dt><code>off</code></dt>\n<dd>запрещает передачу запроса следующему серверу.</dd>\n\n</dl><p> \n</p><p>\nНеобходимо понимать, что передача запроса следующему серверу возможна\nтолько при условии, что клиенту ещё ничего не передавалось.\nТо есть, если ошибка или таймаут возникли в середине передачи ответа\nклиенту, то исправить это уже невозможно.\n</p><p>\nДиректива также определяет, что считается\n<a href=\"ngx_http_upstream_module.html#max_fails\">неудачной\nпопыткой</a> работы с сервером.\nСлучаи <code>error</code>, <code>timeout</code> и\n<code>invalid_header</code>\nвсегда считаются неудачными попытками, даже если они не указаны в директиве.\nСлучаи <code>http_500</code>, <code>http_502</code>,\n<code>http_503</code>, <code>http_504</code>\nи <code>http_429</code>\nсчитаются неудачными попытками, только если они указаны в директиве.\nСлучаи <code>http_403</code> и <code>http_404</code>\nникогда не считаются неудачными попытками.\n</p><p>\nПередача запроса следующему серверу может быть ограничена по\n<a href=\"#proxy_next_upstream_tries\">количеству попыток</a>\nи по <a href=\"#proxy_next_upstream_timeout\">времени</a>.\n</p>"},{"directive":"proxy_method","defaultValue":"—","syntax":"proxy_method метод;","context":"http, server, location","description":"<p>\nЗадаёт HTTP-<code><i>метод</i></code>, который будет использоваться\nв передаваемых на проксируемый сервер запросах вместо метода\nиз клиентского запроса.\nВ значении параметра допустимо использование переменных (1.11.6).\n</p>"},{"directive":"proxy_max_temp_file_size","defaultValue":"proxy_max_temp_file_size 1024m;","syntax":"proxy_max_temp_file_size размер;","context":"http, server, location","description":"<p>\nЕсли включена <a href=\"#proxy_buffering\">буферизация</a> ответов\nпроксируемого сервера, и ответ не вмещается целиком в буферы,\nзаданные директивами <a href=\"#proxy_buffer_size\">proxy_buffer_size</a> и\n<a href=\"#proxy_buffers\">proxy_buffers</a>, часть ответа может быть записана во временный файл.\nЭта директива задаёт максимальный <code><i>размер</i></code> временного файла.\nРазмер данных, сбрасываемых во временный файл за один раз, задаётся\nдирективой <a href=\"#proxy_temp_file_write_size\">proxy_temp_file_write_size</a>.\n</p><p>\nЗначение 0 отключает возможность буферизации ответов во временные файлы.\n</p><p>\n</p> <blockquote class=\"note\">\nДанное ограничение не распространяется на ответы,\nкоторые будут <a href=\"#proxy_cache\">закэшированы</a>\nили <a href=\"#proxy_store\">сохранены</a> на диске.\n</blockquote><p> \n</p>"},{"directive":"proxy_limit_rate","defaultValue":"proxy_limit_rate 0;","syntax":"proxy_limit_rate скорость;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nОграничивает скорость чтения ответа от проксируемого сервера.\n<code><i>Скорость</i></code> задаётся в байтах в секунду.\nЗначение 0 отключает ограничение скорости.\nОграничение устанавливается на запрос,\nпоэтому, если nginx одновременно\nоткроет два соединения к проксируемому серверу,\nсуммарная скорость будет вдвое выше заданного ограничения.\nОграничение работает только в случае, если включена\n<a href=\"#proxy_buffering\">буферизация</a> ответов проксируемого сервера.\n</p>"},{"directive":"proxy_intercept_errors","defaultValue":"proxy_intercept_errors off;","syntax":"proxy_intercept_errors on | off;","context":"http, server, location","description":"<p>\nОпределяет, передавать ли клиенту проксированные ответы с кодом\nбольше либо равным 300,\nили же перехватывать их и перенаправлять на обработку nginx’у с помощью\nдирективы <a href=\"ngx_http_core_module.html#error_page\">error_page</a>.\n</p>"},{"directive":"proxy_ignore_headers","defaultValue":"—","syntax":"proxy_ignore_headers поле ...;","context":"http, server, location","description":"<p>\nЗапрещает обработку некоторых полей заголовка из ответа проксированного сервера.\nВ директиве можно указать поля “X-Accel-Redirect”,\n“X-Accel-Expires”, “X-Accel-Limit-Rate” (1.1.6),\n“X-Accel-Buffering” (1.1.6),\n“X-Accel-Charset” (1.1.6), “Expires”,\n“Cache-Control”, “Set-Cookie” (0.8.44)\nи “Vary” (1.7.7).\n</p><p>\nЕсли не запрещено, обработка этих полей заголовка заключается в следующем:\n</p> <ul>\n\n<li>\n“X-Accel-Expires”, “Expires”,\n“Cache-Control”, “Set-Cookie”\nи “Vary”\nзадают параметры <a href=\"#proxy_cache_valid\">кэширования</a> ответа;\n</li>\n\n<li>\n“X-Accel-Redirect” производит\n<a href=\"ngx_http_core_module.html#internal\">внутреннее\nперенаправление</a> на указанный URI;\n</li>\n\n<li>\n“X-Accel-Limit-Rate” задаёт\n<a href=\"ngx_http_core_module.html#limit_rate\">ограничение\nскорости</a> передачи ответа клиенту;\n</li>\n\n<li>\n“X-Accel-Buffering” включает или выключает\n<a href=\"#proxy_buffering\">буферизацию</a> ответа;\n</li>\n\n<li>\n“X-Accel-Charset” задаёт желаемую\n<a href=\"ngx_http_charset_module.html#charset\">кодировку</a>\nответа.\n</li>\n\n</ul><p> \n</p>"},{"directive":"proxy_ignore_client_abort","defaultValue":"proxy_ignore_client_abort off;","syntax":"proxy_ignore_client_abort on | off;","context":"http, server, location","description":"<p>\nОпределяет, закрывать ли соединение с проксированным сервером\nв случае, если клиент закрыл соединение, не дождавшись ответа.\n</p>"},{"directive":"proxy_http_version","defaultValue":"proxy_http_version 1.0;","syntax":"proxy_http_version 1.0 | 1.1;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.4.\n            </p></div><p>\nЗадаёт версию протокола HTTP для проксирования.\nПо умолчанию используется версия 1.0.\nДля работы\n<a href=\"ngx_http_upstream_module.html#keepalive\">постоянных\nсоединений</a> и\n<a href=\"ngx_http_upstream_module.html#ntlm\">проверки подлинности\nNTLM</a> рекомендуется версия 1.1.\n</p>"},{"directive":"proxy_hide_header","defaultValue":"—","syntax":"proxy_hide_header поле;","context":"http, server, location","description":"<p>\nПо умолчанию\nnginx не передаёт клиенту поля заголовка “Date”,\n“Server”, “X-Pad” и\n“X-Accel-...” из ответа проксированного сервера.\nДиректива <code>proxy_hide_header</code> задаёт дополнительные поля,\nкоторые не будут передаваться.\nЕсли же передачу полей нужно разрешить, можно воспользоваться\nдирективой <a href=\"#proxy_pass_header\">proxy_pass_header</a>.\n</p>"},{"directive":"proxy_headers_hash_max_size","defaultValue":"proxy_headers_hash_max_size 512;","syntax":"proxy_headers_hash_max_size размер;","context":"http, server, location","description":"<p>\nЗадаёт максимальный <code><i>размер</i></code> хэш-таблиц,\nиспользуемых директивами <a href=\"#proxy_hide_header\">proxy_hide_header</a> и\n<a href=\"#proxy_set_header\">proxy_set_header</a>.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"proxy_headers_hash_bucket_size","defaultValue":"proxy_headers_hash_bucket_size 64;","syntax":"proxy_headers_hash_bucket_size размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> корзины для хэш-таблиц,\nиспользуемых директивами <a href=\"#proxy_hide_header\">proxy_hide_header</a>\nи <a href=\"#proxy_set_header\">proxy_set_header</a>.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"proxy_force_ranges","defaultValue":"proxy_force_ranges off;","syntax":"proxy_force_ranges on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nВключает поддержку диапазонов запрашиваемых байт (byte-range)\nдля кэшированных и некэшированных ответов проксируемого сервера\nвне зависимости от наличия поля “Accept-Ranges”\nв заголовках этих ответов.\n</p>"},{"directive":"proxy_download_rate","defaultValue":"proxy_download_rate 0;","syntax":"proxy_download_rate скорость;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.9.3.\n            </p></div><p>\nОграничивает скорость чтения данных от проксируемого сервера.\n<code><i>Скорость</i></code> задаётся в байтах в секунду.\nЗначение 0 отключает ограничение скорости.\nОграничение устанавливается на соединение,\nпоэтому, если nginx одновременно\nоткроет два соединения к проксируемому серверу,\nсуммарная скорость будет вдвое выше заданного ограничения.\n</p>"},{"directive":"proxy_cookie_path","defaultValue":"proxy_cookie_path off;","syntax":"proxy_cookie_path off;proxy_cookie_path путь замена;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.15.\n            </p></div><p>\nЗадаёт текст, который нужно изменить в атрибуте <code>path</code>\nполей “Set-Cookie” заголовка ответа проксируемого сервера.\nПредположим, проксируемый сервер вернул поле заголовка\n“Set-Cookie” с атрибутом\n“<code>path=/two/some/uri/</code>”.\nДиректива\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_path /two/ /;\n</pre></blockquote><p> \nперепишет данный атрибут в виде\n“<code>path=/some/uri/</code>”.\n</p><p>\nВ строках <code><i>путь</i></code> и <code><i>замена</i></code> можно использовать\nпеременные:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_path $uri /some$uri;\n</pre></blockquote><p> \n</p><p>\nДирективу также можно задать при помощи регулярных выражений.\nПри этом <code><i>путь</i></code> должен начинаться либо с символа\n“<code>~</code>”, если при сравнении следует учитывать регистр символов,\nлибо с символов “<code>~*</code>”, если регистр символов учитывать\nне нужно.\nРегулярное выражение может содержать именованные и позиционные выделения,\nа <code><i>замена</i></code> ссылаться на них:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_path ~*^/user/([^/]+) /u/$1;\n</pre></blockquote><p> \n</p><p>\nДиректив <code>proxy_cookie_path</code> может быть несколько:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_path /one/ /;\nproxy_cookie_path / /two/;\n</pre></blockquote><p> \n</p><p>\nПараметр <code>off</code> отменяет действие всех директив\n<code>proxy_cookie_path</code>\nна данном уровне:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_path off;\nproxy_cookie_path /two/ /;\nproxy_cookie_path ~*^/user/([^/]+) /u/$1;\n</pre></blockquote><p> \n</p>"},{"directive":"proxy_cookie_domain","defaultValue":"proxy_cookie_domain off;","syntax":"proxy_cookie_domain off;proxy_cookie_domain домен замена;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.15.\n            </p></div><p>\nЗадаёт текст, который нужно изменить в атрибуте <code>domain</code>\nполей “Set-Cookie” заголовка ответа проксируемого сервера.\nПредположим, проксируемый сервер вернул поле заголовка\n“Set-Cookie” с атрибутом\n“<code>domain=localhost</code>”.\nДиректива\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_domain localhost example.org;\n</pre></blockquote><p> \nперепишет данный атрибут в виде\n“<code>domain=example.org</code>”.\n</p><p>\nТочка в начале строк <code><i>домен</i></code> и <code><i>замена</i></code>,\nа равно как и в атрибуте <code>domain</code> игнорируется.\nРегистр значения не имеет.\n</p><p>\nВ строках <code><i>домен</i></code> и <code><i>замена</i></code> можно использовать\nпеременные:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_domain www.$host $host;\n</pre></blockquote><p> \n</p><p>\nДирективу также можно задать при помощи регулярных выражений.\nПри этом <code><i>домен</i></code> должен начинаться с символа\n“<code>~</code>”.\nРегулярное выражение может содержать именованные и позиционные выделения,\nа <code><i>замена</i></code> ссылаться на них:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_domain ~\\.(?P&lt;sl_domain&gt;[-0-9a-z]+\\.[a-z]+)$ $sl_domain;\n</pre></blockquote><p> \n</p><p>\nДиректив <code>proxy_cookie_domain</code> может быть несколько:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_domain localhost example.org;\nproxy_cookie_domain ~\\.([a-z]+\\.[a-z]+)$ $1;\n</pre></blockquote><p> \n</p><p>\nПараметр <code>off</code> отменяет действие всех директив\n<code>proxy_cookie_domain</code>\nна данном уровне:\n</p> <blockquote class=\"example\"><pre>\nproxy_cookie_domain off;\nproxy_cookie_domain localhost example.org;\nproxy_cookie_domain www.example.org example.org;\n</pre></blockquote><p> \n</p>"},{"directive":"proxy_connect_timeout","defaultValue":"proxy_connect_timeout 60s;","syntax":"proxy_connect_timeout время;","context":"stream, server","description":"<p>\nЗадаёт таймаут для установления соединения с проксированным сервером.\n</p>"},{"directive":"proxy_connect_timeout","defaultValue":"proxy_connect_timeout 60s;","syntax":"proxy_connect_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут для установления соединения с проксированным сервером.\nНеобходимо иметь в виду, что этот таймаут обычно не может превышать 75 секунд.\n</p>"},{"directive":"proxy_cache_valid","defaultValue":"—","syntax":"proxy_cache_valid [код ...] время;","context":"http, server, location","description":"<p>\nЗадаёт время кэширования для разных кодов ответа.\nНапример, директивы\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_valid 200 302 10m;\nproxy_cache_valid 404      1m;\n</pre></blockquote><p> \nзадают время кэширования 10 минут для ответов с кодами 200 и 302\nи 1 минуту для ответов с кодом 404.\n</p><p>\nЕсли указано только <code><i>время</i></code> кэширования,\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_valid 5m;\n</pre></blockquote><p> \nто кэшируются только ответы 200, 301 и 302.\n</p><p>\nКроме того, можно кэшировать любые ответы с помощью параметра\n<code>any</code>:\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_valid 200 302 10m;\nproxy_cache_valid 301      1h;\nproxy_cache_valid any      1m;\n</pre></blockquote><p> \n</p><p>\nПараметры кэширования могут также быть заданы непосредственно\nв заголовке ответа.\nТакой способ приоритетнее, чем задание времени кэширования с помощью директивы.\n</p> <ul>\n\n<li>\nПоле заголовка “X-Accel-Expires” задаёт время кэширования\nответа в секундах.\nЗначение 0 запрещает кэшировать ответ.\nЕсли значение начинается с префикса <code>@</code>, оно задаёт абсолютное\nвремя в секундах с начала эпохи, до которого ответ может быть закэширован.\n</li>\n\n<li>\nЕсли в заголовке нет поля “X-Accel-Expires”,\nпараметры кэширования определяются по полям заголовка\n“Expires” или “Cache-Control”.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Set-Cookie”,\nне будет кэшироваться.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Vary”\nсо специальным значением “<code>*</code>”,\nне будет кэшироваться (1.7.7).\nОтвет, в заголовке которого есть поле “Vary”\nс другим значением, будет закэширован\nс учётом соответствующих полей заголовка запроса (1.7.7).\n</li>\n\n</ul><p> \nОбработка одного или более из этих полей заголовка может быть отключена\nпри помощи директивы <a href=\"#proxy_ignore_headers\">proxy_ignore_headers</a>.\n</p>"},{"directive":"proxy_cache_use_stale","defaultValue":"proxy_cache_use_stale off;","syntax":"proxy_cache_use_stale     error |    timeout |    invalid_header |    updating |    http_500 |    http_502 |    http_503 |    http_504 |    http_403 |    http_404 |    http_429 |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях можно использовать\nустаревший закэшированный ответ.\nПараметры директивы совпадают с параметрами\nдирективы <a href=\"#proxy_next_upstream\">proxy_next_upstream</a>.\n</p><p>\nПараметр <code>error</code> также позволяет использовать\nустаревший закэшированный ответ при невозможности выбора\nпроксированного сервера для обработки запроса.\n</p>"},{"directive":"proxy_cache_revalidate","defaultValue":"proxy_cache_revalidate off;","syntax":"proxy_cache_revalidate on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nРазрешает ревалидацию просроченных элементов кэша при помощи\nусловных запросов с полями заголовка\n“If-Modified-Since” и “If-None-Match”.\n</p>"},{"directive":"proxy_cache_purge","defaultValue":"—","syntax":"proxy_cache_purge строка ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nЗадаёт условия, при которых запрос будет считаться запросом\nна очистку кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто запись в кэше с соответствующим\n<a href=\"#proxy_cache_key\">ключом кэширования</a> удаляется.\nВ результате успешной операции возвращается ответ с кодом\n204 (No Content).\n</p><p>\nЕсли <a href=\"#proxy_cache_key\">ключ кэширования</a>\nзапроса на очистку заканчивается\nзвёздочкой (“<code>*</code>”), то все записи в кэше, соответствующие\nэтой маске, будут удалены из кэша.\nТем не менее, эти записи будут оставаться на диске или до момента удаления\nиз-за <a href=\"#proxy_cache_path\">отсутствия обращения к данным</a>,\nили до обработки их процессом “<a href=\"#purger\">cache purger</a>” (1.7.12),\nили до попытки клиента получить к ним доступ.\n</p><p>\nПример конфигурации:\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_path /data/nginx/cache keys_zone=cache_zone:10m;\n\nmap $request_method $purge_method {\n    PURGE   1;\n    default 0;\n}\n\nserver {\n    ...\n    location / {\n        proxy_pass http://backend;\n        proxy_cache cache_zone;\n        proxy_cache_key $uri;\n        proxy_cache_purge $purge_method;\n    }\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nФункциональность доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"proxy_cache_path","defaultValue":"—","syntax":"proxy_cache_path     путь    [levels=уровни]    [use_temp_path=on|off]    keys_zone=имя:размер    [inactive=время]    [max_size=размер]    [manager_files=число]    [manager_sleep=время]    [manager_threshold=время]    [loader_files=число]    [loader_sleep=время]    [loader_threshold=время]    [purger=on|off]    [purger_files=число]    [purger_sleep=время]    [purger_threshold=время];","context":"http","description":"<p>\nЗадаёт путь и другие параметры кэша.\nДанные кэша хранятся в файлах.\nИменем файла в кэше является результат функции MD5\nот <a href=\"#proxy_cache_key\">ключа кэширования</a>.\nПараметр <code>levels</code> задаёт уровни иерархии кэша:\nможно задать от 1 до 3 уровней, на каждом уровне допускаются значения 1 или 2.\nНапример, при использовании\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_path /data/nginx/cache levels=1:2 keys_zone=one:10m;\n</pre></blockquote><p> \nимена файлов в кэше будут такого вида:\n</p> <blockquote class=\"example\"><pre>\n/data/nginx/cache/<strong>c</strong>/<strong>29</strong>/b7f54b2df7773722d382f4809d650<strong>29c</strong>\n</pre></blockquote><p> \n</p><p>\nКэшируемый ответ сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временные файлы и кэш\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если кэш будет находиться на той же файловой\nсистеме, что и каталог с временными файлами.\nКакой из каталогов будет использоваться для временных файлов\nопределяется параметром <code>use_temp_path</code> (1.7.10).\nЕсли параметр не задан или установлен в значение “<code>on</code>”,\nто будет использоваться каталог, задаваемый директивой\n<a href=\"#proxy_temp_path\">proxy_temp_path</a> для данного location.\nЕсли параметр установлен в значение “<code>off</code>”,\nто временные файлы будут располагаться непосредственно в каталоге кэша.\n</p><p>\nКроме того, все активные ключи и информация о данных хранятся в зоне\nразделяемой памяти, <code><i>имя</i></code> и <code><i>размер</i></code> которой\nзадаются параметром <code>keys_zone</code>.\nЗоны размером в 1 мегабайт достаточно для хранения около 8 тысяч ключей.\n</p><p>\nЕсли к данным кэша не обращаются в течение времени, заданного параметром\n<code>inactive</code>, то данные удаляются, независимо от их свежести.\nПо умолчанию <code>inactive</code> равен 10 минутам.\n</p><p>\nСпециальный процесс “cache manager” следит за максимальным размером кэша,\nзаданным параметром <code>max_size</code>, и при превышении\nего размеров удаляет наименее востребованные данные.\nУдаление данных происходит итерациями, настраиваемыми параметрами (1.11.5)\n<code>manager_files</code>,\n<code>manager_threshold</code> и\n<code>manager_sleep</code>.\nЗа одну итерацию загружается не более <code>manager_files</code>\nэлементов (по умолчанию 100).\nВремя работы одной итерации ограничено параметром\n<code>manager_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>manager_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nЧерез минуту после старта активируется специальный процесс “cache loader”,\nкоторый загружает в зону кэша информацию о ранее закэшированных данных,\nхранящихся на файловой системе.\nЗагрузка также происходит итерациями.\nЗа одну итерацию загружается не более <code>loader_files</code>\nэлементов (по умолчанию 100).\nКроме того, время работы одной итерации ограничено параметром\n<code>loader_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>loader_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nКроме того,\nследующие параметры доступны как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>:\n</p><p>\n</p> <dl class=\"compact\">\n\n<dt id=\"purger\">\n<code>purger</code>=<code>on</code>|<code>off</code>\n</dt>\n<dd>\nУказывает, будут ли записи в кэше, соответствующие\n<a href=\"#proxy_cache_purge\">маске</a>,\nудалены с диска при помощи процесса “cache purger” (1.7.12).\nУстановка параметра в значение <code>on</code>\n(по умолчанию <code>off</code>)\nактивирует процесс “cache purger”, который\nпроходит по всем записям в кэше\nи удаляет записи, соответствующие этой маске.\n</dd>\n\n<dt id=\"purger_files\">\n<code>purger_files</code>=<code><i>число</i></code>\n</dt>\n<dd>\nЗадаёт число элементов, которые будут сканироваться за одну итерацию (1.7.12).\nПо умолчанию <code>purger_files</code> равен 10.\n</dd>\n\n<dt id=\"purger_threshold\">\n<code>purger_threshold</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт продолжительность одной итерации (1.7.12).\nПо умолчанию <code>purger_threshold</code> равен 50 миллисекундам.\n</dd>\n\n<dt id=\"purger_sleep\">\n<code>purger_sleep</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт паузу между итерациями (1.7.12).\nПо умолчанию <code>purger_sleep</code> равен 50 миллисекундам.\n</dd>\n\n</dl><p> \n</p><p>\n</p> <blockquote class=\"note\">\nВ версиях 1.7.3, 1.7.7 и 1.11.10 формат заголовка кэша был изменён.\nПри обновлении на более новую версию nginx\nранее закэшированные ответы будут считаться недействительными.\n</blockquote><p> \n</p>"},{"directive":"proxy_cache_min_uses","defaultValue":"proxy_cache_min_uses 1;","syntax":"proxy_cache_min_uses число;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> запросов, после которого ответ будет закэширован.\n</p>"},{"directive":"proxy_cache_methods","defaultValue":"proxy_cache_methods GET HEAD;","syntax":"proxy_cache_methods     GET |    HEAD |    POST    ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.7.59.\n            </p></div><p>\nЕсли метод запроса клиента указан в этой директиве,\nто ответ будет закэширован.\nМетоды “<code>GET</code>” и “<code>HEAD</code>” всегда добавляются\nв список, но тем не менее рекомендуется перечислять их явно.\nСм. также директиву <a href=\"#proxy_no_cache\">proxy_no_cache</a>.\n</p>"},{"directive":"proxy_cache_max_range_offset","defaultValue":"—","syntax":"proxy_cache_max_range_offset число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.6.\n            </p></div><p>\nЗадаёт смещение в байтах для запросов с указанием диапазона запрашиваемых байт\n(byte-range requests).\nЕсли диапазон находится за указанным смещением,\nrange-запрос будет передан на проксируемый сервер\nи ответ не будет закэширован.\n</p>"},{"directive":"proxy_cache_lock_timeout","defaultValue":"proxy_cache_lock_timeout 5s;","syntax":"proxy_cache_lock_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЗадаёт таймаут для <a href=\"#proxy_cache_lock\">proxy_cache_lock</a>.\nПо истечении указанного <code><i>времени</i></code>\nзапрос будет передан на проксируемый сервер,\nоднако ответ не будет закэширован.\n</p> <blockquote class=\"note\">\nДо версии 1.7.8 такой ответ мог быть закэширован.\n</blockquote><p> \n</p>"},{"directive":"proxy_cache_lock_age","defaultValue":"proxy_cache_lock_age 5s;","syntax":"proxy_cache_lock_age время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЕсли последний запрос, переданный на проксируемый сервер\nдля заполнения нового элемента кэша,\nне завершился за указанное <code><i>время</i></code>,\nна проксируемый сервер может быть передан ещё один запрос.\n</p>"},{"directive":"proxy_cache_lock","defaultValue":"proxy_cache_lock off;","syntax":"proxy_cache_lock on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЕсли включено, одновременно только одному запросу будет позволено\nзаполнить новый элемент кэша, идентифицируемый согласно директиве\n<a href=\"#proxy_cache_key\">proxy_cache_key</a>, передав запрос на проксируемый сервер.\nОстальные запросы этого же элемента будут либо ожидать\nпоявления ответа в кэше, либо освобождения блокировки\nэтого элемента, в течение времени, заданного директивой\n<a href=\"#proxy_cache_lock_timeout\">proxy_cache_lock_timeout</a>.\n</p>"},{"directive":"proxy_cache_key","defaultValue":"proxy_cache_key $scheme$proxy_host$request_uri;","syntax":"proxy_cache_key строка;","context":"http, server, location","description":"<p>\nЗадаёт ключ для кэширования, например,\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_key \"$host$request_uri $cookie_user\";\n</pre></blockquote><p> \nПо умолчанию значение директивы близко к строке\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_key $scheme$proxy_host$uri$is_args$args;\n</pre></blockquote><p> \n</p>"},{"directive":"proxy_cache_convert_head","defaultValue":"proxy_cache_convert_head on;","syntax":"proxy_cache_convert_head on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.9.7.\n            </p></div><p>\nРазрешает или запрещает преобразование метода “<code>HEAD</code>”\nв “<code>GET</code>” для кэширования.\nЕсли преобразование выключено, то\nнеобходимо, чтобы <a href=\"#proxy_cache_key\">ключ кэширования</a>\nвключал в себя <code>$request_method</code>.\n</p>"},{"directive":"proxy_cache_bypass","defaultValue":"—","syntax":"proxy_cache_bypass строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет браться из кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не берётся из кэша:\n</p> <blockquote class=\"example\"><pre>\nproxy_cache_bypass $cookie_nocache $arg_nocache$arg_comment;\nproxy_cache_bypass $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#proxy_no_cache\">proxy_no_cache</a>.\n</p>"},{"directive":"proxy_cache_background_update","defaultValue":"proxy_cache_background_update off;","syntax":"proxy_cache_background_update on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.10.\n            </p></div><p>\nПозволяет запустить фоновый подзапрос\nдля обновления просроченного элемента кэша,\nв то время как клиенту возвращается устаревший закэшированный ответ.\nИспользование устаревшего закэшированного ответа в момент его обновления\nдолжно быть\n<a href=\"#proxy_cache_use_stale_updating\">разрешено</a>.\n</p>"},{"directive":"proxy_cache","defaultValue":"proxy_cache off;","syntax":"proxy_cache зона | off;","context":"http, server, location","description":"<p>\nЗадаёт зону разделяемой памяти, используемой для кэширования.\nОдна и та же зона может использоваться в нескольких местах.\nВ значении параметра можно использовать переменные (1.7.9).\nПараметр <code>off</code> запрещает кэширование, унаследованное\nс предыдущего уровня конфигурации.\n</p>"},{"directive":"proxy_busy_buffers_size","defaultValue":"proxy_busy_buffers_size 8k|16k;","syntax":"proxy_busy_buffers_size размер;","context":"http, server, location","description":"<p>\nПри включённой <a href=\"#proxy_buffering\">буферизации</a> ответов\nпроксируемого сервера, ограничивает суммарный <code><i>размер</i></code>\nбуферов, которые могут быть заняты для отправки ответа клиенту, пока\nответ ещё не прочитан целиком.\nОставшиеся буферы тем временем могут использоваться для чтения ответа\nи, при необходимости, буферизации части ответа во временный файл.\nПо умолчанию <code><i>размер</i></code> ограничен величиной двух буферов, заданных\nдирективами <a href=\"#proxy_buffer_size\">proxy_buffer_size</a> и <a href=\"#proxy_buffers\">proxy_buffers</a>.\n</p>"},{"directive":"proxy_buffers","defaultValue":"proxy_buffers 8 4k|8k;","syntax":"proxy_buffers число размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> и <code><i>размер</i></code> буферов\nдля одного соединения,\nв которые будет читаться ответ, получаемый от проксируемого сервера.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p>"},{"directive":"proxy_buffering","defaultValue":"proxy_buffering on;","syntax":"proxy_buffering on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает использовать буферизацию ответов проксируемого сервера.\n</p><p>\nЕсли буферизация включена, то nginx принимает ответ проксируемого сервера\nкак можно быстрее, сохраняя его в буферы, заданные директивами\n<a href=\"#proxy_buffer_size\">proxy_buffer_size</a> и <a href=\"#proxy_buffers\">proxy_buffers</a>.\nЕсли ответ не вмещается целиком в память, то его часть может быть записана\nна диск во <a href=\"#proxy_temp_path\">временный файл</a>.\nЗапись во временные файлы контролируется директивами\n<a href=\"#proxy_max_temp_file_size\">proxy_max_temp_file_size</a> и\n<a href=\"#proxy_temp_file_write_size\">proxy_temp_file_write_size</a>.\n</p><p>\nЕсли буферизация выключена, то ответ синхронно передаётся клиенту сразу же\nпо мере его поступления.\nnginx не пытается считать весь ответ проксируемого сервера.\nМаксимальный размер данных, который nginx может принять от сервера\nза один раз, задаётся директивой <a href=\"#proxy_buffer_size\">proxy_buffer_size</a>.\n</p><p>\nБуферизация может быть также включена или выключена путём передачи\nзначения “<code>yes</code>” или “<code>no</code>” в поле\n“X-Accel-Buffering” заголовка ответа.\nЭту возможность можно запретить с помощью директивы\n<a href=\"#proxy_ignore_headers\">proxy_ignore_headers</a>.\n</p>"},{"directive":"proxy_buffer_size","defaultValue":"proxy_buffer_size 16k;","syntax":"proxy_buffer_size размер;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.9.4.\n            </p></div><p>\nЗадаёт <code><i>размер</i></code> буфера, в который будут читаться данные,\nполучаемые от проксируемого сервера.\nТакже задаёт <code><i>размер</i></code> буфера, в который будут читаться данные,\nполучаемые от клиента.\n</p>"},{"directive":"proxy_buffer_size","defaultValue":"proxy_buffer_size 4k|8k;","syntax":"proxy_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> буфера, в который будет читаться\nпервая часть ответа, получаемого от проксируемого сервера.\nВ этой части ответа находится, как правило, небольшой заголовок ответа.\nПо умолчанию размер одного буфера равен размеру страницы памяти.\nВ зависимости от платформы это или 4K, или 8K,\nоднако его можно сделать меньше.\n</p>"},{"directive":"proxy_buffer","defaultValue":"proxy_buffer 4k|8k;","syntax":"proxy_buffer размер;","context":"mail, server","description":"<p>\nЗадаёт размер буфера, используемого при проксировании.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p>"},{"directive":"proxy_bind","defaultValue":"—","syntax":"proxy_bind     address    [transparent] |    off;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.9.2.\n            </p></div><p>\nЗадаёт локальный IP-<code><i>адрес</i></code>, который будет использоваться в\nисходящих соединениях с проксируемым сервером.\nВ значении параметра допустимо использование переменных (1.11.2).\nСпециальное значение <code>off</code> отменяет действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>proxy_bind</code>, позволяя системе\nсамостоятельно выбирать локальный IP-адрес.\n</p>"},{"directive":"proxy_bind","defaultValue":"—","syntax":"proxy_bind     адрес    [transparent] |    off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.22.\n            </p></div><p>\nЗадаёт локальный IP-адрес с необязательным портом (1.11.2),\nкоторый будет использоваться в исходящих соединениях с проксируемым сервером.\nВ значении параметра допустимо использование переменных (1.3.12).\nСпециальное значение <code>off</code> (1.3.12) отменяет действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>proxy_bind</code>, позволяя системе\nсамостоятельно выбирать локальный IP-адрес и порт.\n</p>"},{"directive":"protocol","defaultValue":"—","syntax":"protocol   imap |  pop3 |  smtp;","context":"server","description":"<p>\nЗадаёт протокол проксируемого сервера.\nПоддерживаются протоколы\n<a href=\"ngx_mail_imap_module.html\">IMAP</a>,\n<a href=\"ngx_mail_pop3_module.html\">POP3</a> и\n<a href=\"ngx_mail_smtp_module.html\">SMTP</a>.\n</p><p>\nЕсли директива не указана, то протокол может быть определён автоматически\nпо общеизвестному порту, указанному в директиве <a href=\"#listen\">listen</a>:\n</p> <ul class=\"compact\">\n\n<li>\n<code>imap</code>: 143, 993\n</li>\n\n<li>\n<code>pop3</code>: 110, 995\n</li>\n\n<li>\n<code>smtp</code>: 25, 587, 465\n</li>\n\n</ul><p> \n</p><p>\nПоддержку ненужных протоколов можно отключить с помощью\n<a href=\"../configure.html\">конфигурационных</a>\nпараметров <code>--without-mail_imap_module</code>,\n<code>--without-mail_pop3_module</code> и\n<code>--without-mail_smtp_module</code>.\n</p>"},{"directive":"preread_timeout","defaultValue":"preread_timeout 30s;","syntax":"preread_timeout время;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.5.\n            </p></div><p>\nЗадаёт <code><i>время</i></code> фазы\n<a href=\"stream_processing.html#preread_phase\">предварительного чтения</a>.\n</p>"},{"directive":"preread_buffer_size","defaultValue":"preread_buffer_size 16k;","syntax":"preread_buffer_size размер;","context":"stream, server","description":"<p>Эта директива появилась в версии 1.11.5.\n            </p></div><p>\nЗадаёт <code><i>размер</i></code> буфера\n<a href=\"stream_processing.html#preread_phase\">предварительного чтения</a>.\n</p>"},{"directive":"postpone_output","defaultValue":"postpone_output 1460;","syntax":"postpone_output размер;","context":"http, server, location","description":"<p>\nЕсли это возможно, то отправка данных клиенту будет отложена пока nginx не\nнакопит по крайней мере указанное количество байт для отправки.\nЗначение 0 запрещает отложенную отправку данных.\n</p>"},{"directive":"port_in_redirect","defaultValue":"port_in_redirect on;","syntax":"port_in_redirect on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает указывать порт в\n<a href=\"#absolute_redirect\">абсолютных</a>\nперенаправлениях, выдаваемых nginx’ом.\n</p><p>\nИспользование в перенаправлениях основного имени сервера управляется\nдирективой <a href=\"#server_name_in_redirect\">server_name_in_redirect</a>.\n</p>"},{"directive":"pop3_capabilities","defaultValue":"pop3_capabilities TOP USER UIDL;","syntax":"pop3_capabilities расширение ...;","context":"mail, server","description":"<p>\nПозволяет указать список расширений\n<a href=\"https://tools.ietf.org/html/rfc2449\">протокола POP3</a>,\nвыдаваемый клиенту по команде\n<code>CAPA</code>.\nВ зависимости от значения директивы\n<a href=\"ngx_mail_ssl_module.html#starttls\">starttls</a>\nк этому списку автоматически добавляются\nметоды аутентификации, указанные в директиве <a href=\"#pop3_auth\">pop3_auth</a>\n(расширение <a href=\"https://tools.ietf.org/html/rfc2449\">SASL</a>), и\n<a href=\"https://tools.ietf.org/html/rfc2595\">STLS</a>.\n</p><p>\nВ данной директиве имеет смысл указать расширения,\nподдерживаемые POP3-бэкендами,\nна которые проксируются клиенты (если эти расширения относятся к командам,\nиспользуемым после аутентификации, когда nginx прозрачно проксирует подключение\nклиента на бэкенд).\n</p><p>\nТекущий список стандартизованных расширений опубликован на\n<a href=\"http://www.iana.org/assignments/pop3-extension-mechanism\">www.iana.org</a>.\n</p>"},{"directive":"pop3_auth","defaultValue":"pop3_auth plain;","syntax":"pop3_auth метод ...;","context":"mail, server","description":"<p>\nЗадаёт разрешённые методы аутентификации POP3-клиентов.\nПоддерживаемые методы:\n</p> <dl class=\"compact\">\n\n<dt><code>plain</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc1939\">USER/PASS</a>,\n<a href=\"https://tools.ietf.org/html/rfc4616\">AUTH PLAIN</a>,\n<a href=\"https://tools.ietf.org/html/draft-murchison-sasl-login-00\">AUTH LOGIN</a>.\nДанные методы отключить нельзя.\n</dd>\n\n<dt><code>apop</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc1939\">APOP</a>.\nДля работы этого метода пароль должен храниться в незашифрованном виде.\n</dd>\n\n<dt><code>cram-md5</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc2195\">AUTH CRAM-MD5</a>.\nДля работы этого метода пароль должен храниться в незашифрованном виде.\n</dd>\n\n<dt><code>external</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc4422\">AUTH EXTERNAL</a> (1.11.6).\n</dd>\n\n</dl><p> \n</p>"},{"directive":"pid","defaultValue":"pid nginx.pid;","syntax":"pid файл;","context":"main","description":"<p>\nЗадаёт <code><i>файл</i></code>, в котором будет храниться номер (PID) главного процесса.\n</p>"},{"directive":"perl_set","defaultValue":"—","syntax":"perl_set     $переменная    модуль::функция|'sub { ... }';","context":"http","description":"<p>\nУстанавливает обработчик Perl для указанной переменной.\n</p>"},{"directive":"perl_require","defaultValue":"—","syntax":"perl_require модуль;","context":"http","description":"<p>\nЗадаёт имя модуля, который будет подгружаться при каждой\nпереконфигурации.\nДиректив <code>perl_require</code> может быть несколько.\n</p>"},{"directive":"perl_modules","defaultValue":"—","syntax":"perl_modules путь;","context":"http","description":"<p>\nЗадаёт дополнительный путь для модулей Perl.\n</p>"},{"directive":"perl","defaultValue":"—","syntax":"perl модуль::функция|'sub { ... }';","context":"location, limit_except","description":"<p>\nУстанавливает обработчик Perl для данного location.\n</p>"},{"directive":"pcre_jit","defaultValue":"pcre_jit off;","syntax":"pcre_jit on | off;","context":"main","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nРазрешает или запрещает использование JIT-компиляции (PCRE JIT)\nдля регулярных выражений, известных на момент парсинга конфигурации.\n</p><p>\nИспользование PCRE JIT способно существенно ускорить обработку\nрегулярных выражений.\n</p> <blockquote class=\"note\">\nДля работы JIT необходима библиотека PCRE версии 8.20 или выше,\nсобранная с параметром конфигурации <code>--enable-jit</code>.\nПри сборке библиотеки PCRE вместе с nginx (<code>--with-pcre=</code>),\nдля включения поддержки JIT необходимо использовать параметр\nконфигурации <code>--with-pcre-jit</code>.\n</blockquote><p> \n</p>"},{"directive":"override_charset","defaultValue":"override_charset off;","syntax":"override_charset on | off;","context":"http, server, location, if в location","description":"<p>\nОпределяет, выполнять ли перекодирование для ответов,\nполученных от проксированного сервера или от FastCGI/uwsgi/SCGI-сервера,\nесли в ответах уже указана кодировка в поле “Content-Type”\nзаголовка ответа.\nЕсли перекодирование разрешено, то в качестве исходной кодировки\nиспользуется кодировка, указанная в полученном ответе.\n</p> <blockquote class=\"note\">\nНеобходимо отметить, что если ответ был получен в подзапросе,\nто, независимо от значения директивы <code>override_charset</code>,\nвсегда выполняется перекодирование из кодировки ответа в кодировку\nосновного запроса.\n</blockquote><p> \n</p>"},{"directive":"output_buffers","defaultValue":"output_buffers 2 32k;","syntax":"output_buffers number size;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> и <code><i>размер</i></code> буферов,\nиспользуемых при чтении ответа с диска.\n</p> <blockquote class=\"note\">\nДо версии 1.9.5 по умолчанию использовалось значение 1 32k.\n</blockquote><p> \n</p>"},{"directive":"open_log_file_cache","defaultValue":"open_log_file_cache off;","syntax":"open_log_file_cache max=N[inactive=время][min_uses=N][valid=время];open_log_file_cache off;","context":"stream, server","description":"<p>\nЗадаёт кэш, в котором хранятся дескрипторы файлов часто используемых\nлогов, имена которых заданы с использованием переменных.\nПараметры директивы:\n</p> <dl class=\"compact\">\n\n<dt><code>max</code></dt>\n<dd>\nзадаёт максимальное число дескрипторов в кэше;\nпри переполнении кэша наименее востребованные (LRU)\nдескрипторы закрываются\n</dd>\n\n<dt><code>inactive</code></dt>\n<dd>\nзадаёт время, после которого закэшированный дескриптор закрывается,\nесли к нему не было обращений в течение этого времени;\nпо умолчанию 10 секунд\n</dd>\n\n<dt><code>min_uses</code></dt>\n<dd>\nзадаёт минимальное число использований файла в течение\nвремени, заданного параметром <code>inactive</code>,\nпосле которого дескриптор файла будет оставаться открытым в кэше;\nпо умолчанию 1\n</dd>\n\n<dt><code>valid</code></dt>\n<dd>\nзадаёт, через какое время нужно проверять, что файл ещё\nсуществует под тем же именем;\nпо умолчанию 60 секунд\n</dd>\n\n<dt><code>off</code></dt>\n<dd>\nзапрещает кэш\n</dd>\n\n</dl><p> \n</p><p>\nПример использования:\n</p> <blockquote class=\"example\"><pre>\nopen_log_file_cache max=1000 inactive=20s valid=1m min_uses=2;\n</pre></blockquote><p> \n</p>"},{"directive":"open_log_file_cache","defaultValue":"open_log_file_cache off;","syntax":"open_log_file_cache max=N[inactive=время][min_uses=N][valid=время];open_log_file_cache off;","context":"http, server, location","description":"<p>\nЗадаёт кэш, в котором хранятся дескрипторы файлов часто используемых\nлогов, имена которых заданы с использованием переменных.\nПараметры директивы:\n</p> <dl class=\"compact\">\n\n<dt><code>max</code></dt>\n<dd>\nзадаёт максимальное число дескрипторов в кэше;\nпри переполнении кэша наименее востребованные (LRU)\nдескрипторы закрываются\n</dd>\n\n<dt><code>inactive</code></dt>\n<dd>\nзадаёт время, после которого закэшированный дескриптор закрывается,\nесли к нему не было обращений в течение этого времени;\nпо умолчанию 10 секунд\n</dd>\n\n<dt><code>min_uses</code></dt>\n<dd>\nзадаёт минимальное число использований файла в течение\nвремени, заданного параметром <code>inactive</code>,\nпосле которого дескриптор файла будет оставаться открытым в кэше;\nпо умолчанию 1\n</dd>\n\n<dt><code>valid</code></dt>\n<dd>\nзадаёт, через какое время нужно проверять, что файл ещё\nсуществует под тем же именем;\nпо умолчанию 60 секунд\n</dd>\n\n<dt><code>off</code></dt>\n<dd>\nзапрещает кэш\n</dd>\n\n</dl><p> \n</p><p>\nПример использования:\n</p> <blockquote class=\"example\"><pre>\nopen_log_file_cache max=1000 inactive=20s valid=1m min_uses=2;\n</pre></blockquote><p> \n</p>"},{"directive":"open_file_cache_valid","defaultValue":"open_file_cache_valid 60s;","syntax":"open_file_cache_valid время;","context":"http, server, location","description":"<p>\nОпределяет время, через которое следует проверять актуальность информации\nоб элементе в\n<a href=\"#open_file_cache\">open_file_cache</a>.\n\n</p>"},{"directive":"open_file_cache_min_uses","defaultValue":"open_file_cache_min_uses 1;","syntax":"open_file_cache_min_uses число;","context":"http, server, location","description":"<p>\nЗадаёт минимальное <code><i>число</i></code> обращений к файлу\nв течение времени, заданного параметром <code>inactive</code>\nдирективы <a href=\"#open_file_cache\">open_file_cache</a>, необходимых для того, чтобы дескриптор\nфайла оставался открытым в кэше.\n</p>"},{"directive":"open_file_cache_errors","defaultValue":"open_file_cache_errors off;","syntax":"open_file_cache_errors on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает кэширование ошибок поиска файлов в\n<a href=\"#open_file_cache\">open_file_cache</a>.\n</p>"},{"directive":"open_file_cache","defaultValue":"open_file_cache off;","syntax":"open_file_cache off;open_file_cache max=N[inactive=время];","context":"http, server, location","description":"<p>\nЗадаёт кэш, в котором могут храниться:\n</p> <ul class=\"compact\">\n\n<li>\nдескрипторы открытых файлов, информация об их размерах и времени модификации;\n</li>\n\n<li>\nинформация о существовании каталогов;\n</li>\n\n<li>\nинформация об ошибках поиска файла — “нет файла”, “нет прав на чтение”\nи тому подобное.\n<blockquote class=\"note\">\nКэширование ошибок нужно разрешить отдельно директивой\n<a href=\"#open_file_cache_errors\">open_file_cache_errors</a>.\n</blockquote>\n</li>\n\n</ul><p> \n</p><p>\nУ директивы есть следующие параметры:\n</p> <dl class=\"compact\">\n\n<dt>\n<code>max</code>\n</dt>\n<dd>\nзадаёт максимальное число элементов в кэше;\nпри переполнении кэша удаляются наименее востребованные элементы (LRU);\n</dd>\n\n<dt>\n<code>inactive</code>\n</dt>\n<dd>\nзадаёт время, после которого элемент кэша удаляется, если к нему\nне было обращений в течение этого времени; по умолчанию 60 секунд;\n</dd>\n\n<dt>\n<code>off</code>\n</dt>\n<dd>\nзапрещает кэш.\n</dd>\n\n</dl><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nopen_file_cache          max=1000 inactive=20s;\nopen_file_cache_valid    30s;\nopen_file_cache_min_uses 2;\nopen_file_cache_errors   on;\n\n</pre></blockquote><p> \n</p>"},{"directive":"ntlm","defaultValue":"—","syntax":"ntlm;","context":"upstream","description":"<p>Эта директива появилась в версии 1.9.2.\n            </p></div><p>\nПозволяет проксировать запросы с\n<a href=\"https://en.wikipedia.org/wiki/Integrated_Windows_Authentication\">проверкой\nподлинности NTLM</a>.\nСоединение с сервером группы привязывается к клиентскому соединению\nкак только клиент отправляет запрос, в заголовке которого есть поле\n“Authorization” со значением,\nначинающимся с “<code>Negotiate</code>” или “<code>NTLM</code>”.\nПоследующие запросы клиента будут проксироваться через это же соединение\nс сервером группы,\nсохраняя контекст аутентификации.\n</p><p>\nДля работы проверки подлинности NTLM\nнеобходимо разрешить постоянные соединения с серверами группы.\nДирективу <a href=\"ngx_http_proxy_module.html#proxy_http_version\">proxy_http_version</a>\nследует установить в “<code>1.1</code>”,\nа поле заголовка “Connection” — очистить:\n</p> <blockquote class=\"example\"><pre>\nupstream http_backend {\n    server 127.0.0.1:8080;\n\n    ntlm;\n}\n\nserver {\n    ...\n\n    location /http/ {\n        proxy_pass http://http_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Connection \"\";\n        ...\n    }\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nПри использовании методов балансировки нагрузки, отличных\nот стандартного round-robin, следует активировать их до\nдирективы <code>ntlm</code>.\n</blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЭта директива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"multi_accept","defaultValue":"multi_accept off;","syntax":"multi_accept on | off;","context":"events","description":"<p>\nЕсли <code>multi_accept</code> выключен, рабочий процесс\nза один раз будет принимать только одно новое соединение.\nВ противном случае рабочий процесс\nза один раз будет принимать сразу все новые соединения.\n</p> <blockquote class=\"note\">\nДиректива игнорируется в случае использования метода обработки соединений\n<a href=\"events.html#kqueue\">kqueue</a>, т.к. данный метод сам сообщает\nчисло новых соединений, ожидающих приёма.\n</blockquote><p> \n</p>"},{"directive":"msie_refresh","defaultValue":"msie_refresh off;","syntax":"msie_refresh on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает выдавать для MSIE клиентов refresh’ы вместо\nперенаправлений.\n</p>"},{"directive":"msie_padding","defaultValue":"msie_padding on;","syntax":"msie_padding on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает добавлять в ответы для MSIE со статусом больше 400\nкомментарий для увеличения размера ответа до 512 байт.\n</p>"},{"directive":"mp4_max_buffer_size","defaultValue":"mp4_max_buffer_size 10M;","syntax":"mp4_max_buffer_size размер;","context":"http, server, location","description":"<p>\nВ ходе обработки метаданных может понадобиться буфер большего размера.\nЕго размер не может превышать указанного,\nиначе nginx вернёт серверную ошибку\n500 (Internal Server Error)\nи запишет в лог следующее сообщение:\n</p> <blockquote class=\"example\"><pre>\n\"/some/movie/file.mp4\" mp4 moov atom is too large:\n12583268, you may want to increase mp4_max_buffer_size\n</pre></blockquote><p> \n</p>"},{"directive":"mp4_limit_rate_after","defaultValue":"mp4_limit_rate_after 60s;","syntax":"mp4_limit_rate_after время;","context":"http, server, location","description":"<p>\nЗадаёт начальный объём медиаданных (измеряется как время воспроизведения),\nпосле отправки которого начинает ограничиваться\nскорость передачи ответа клиенту.\n</p><p>\n</p> <blockquote class=\"note\">\nДиректива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"mp4_limit_rate","defaultValue":"mp4_limit_rate off;","syntax":"mp4_limit_rate     on |    off |    множитель;","context":"http, server, location","description":"<p>\nОграничивает скорость передачи ответа клиенту.\nОграничение основывается на значении усреднённого битрейта запрашиваемого\nMP4-файла.\nСкорость вычисляется умножением битрейта на задаваемый\n<code><i>множитель</i></code>.\nСпециальное значение “<code>on</code>” соответствует множителю 1.1.\nСпециальное значение “<code>off</code>” отключает ограничение скорости.\nОграничение устанавливается на запрос, поэтому, если клиент одновременно\nоткроет два соединения, суммарная скорость будет вдвое выше\nзаданного ограничения.\n</p><p>\n</p> <blockquote class=\"note\">\nДиректива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"mp4_buffer_size","defaultValue":"mp4_buffer_size 512K;","syntax":"mp4_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт начальный размер буфера, используемого при обработке MP4-файлов.\n</p>"},{"directive":"mp4","defaultValue":"—","syntax":"mp4;","context":"location","description":"<p>\nВключает в содержащем location обработку этим модулем.\n</p>"},{"directive":"modern_browser_value","defaultValue":"modern_browser_value 1;","syntax":"modern_browser_value строка;","context":"http, server, location","description":"<p>\nЗадаёт значение для переменных <code>$modern_browser</code>.\n</p>"},{"directive":"modern_browser","defaultValue":"—","syntax":"modern_browser браузер версия;modern_browser unlisted;","context":"http, server, location","description":"<p>\nЗадаёт версию браузера, начиная с которой он считается современным.\nВ качестве браузера можно задать <code>msie</code>,\n<code>gecko</code> (браузеры, созданные на основе Mozilla),\n<code>opera</code>, <code>safari</code>\nили <code>konqueror</code>.\n</p><p>\nВерсии можно задать в форматах X, X.X, X.X.X или X.X.X.X.\nМаксимальные значения для каждого из форматов соответственно —\n4000, 4000.99, 4000.99.99 и 4000.99.99.99.\n</p><p>\nСпециальное значение <code>unlisted</code> указывает считать\nсовременным браузер, не описанный директивами <code>modern_browser</code>\nи <a href=\"#ancient_browser\">ancient_browser</a>.\nВ противном случае неперечисленный браузер будет считаться устаревшим.\nЕсли в заголовке запроса нет поля “User-Agent”, то браузер\nсчитается неперечисленным.\n</p>"},{"directive":"mirror_request_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"mirror","defaultValue":"mirror off;","syntax":"mirror uri | off;","context":"http, server, location","description":"<p>\nЗадаёт URI, на который будет зеркалироваться исходный запрос.\nНа одном уровне может быть задано несколько зеркал.\n</p>"},{"directive":"min_delete_depth","defaultValue":"min_delete_depth 0;","syntax":"min_delete_depth число;","context":"http, server, location","description":"<p>\nРазрешает методу DELETE удалять файлы\nпри условии, что число элементов в пути запроса не меньше заданного.\nНапример, директива\n</p> <blockquote class=\"example\"><pre>\nmin_delete_depth 4;\n</pre></blockquote><p> \nразрешает удалять файлы по запросам\n</p> <blockquote class=\"example\"><pre>\n/users/00/00/name\n/users/00/00/name/pic.jpg\n/users/00/00/page.html\n</pre></blockquote><p> \nи запрещает удаление\n</p> <blockquote class=\"example\"><pre>\n/users/00/00\n</pre></blockquote><p> \n</p>"},{"directive":"merge_slashes","defaultValue":"merge_slashes on;","syntax":"merge_slashes on | off;","context":"http, server","description":"<p>\nРазрешает или запрещает преобразование URI путём замены двух и более подряд\nидущих слэшей (“<code>/</code>”) на один.\n</p><p>\nНеобходимо иметь в виду, что это преобразование необходимо для корректной\nпроверки префиксных строк и регулярных выражений.\nЕсли его не делать, то запрос “<code>//scripts/one.php</code>”\nне попадёт в\n</p> <blockquote class=\"example\"><pre>\nlocation /scripts/ {\n    ...\n}\n</pre></blockquote><p> \nи может быть обслужен как статический файл.\nПоэтому он преобразуется к виду “<code>/scripts/one.php</code>”.\n</p><p>\nЗапрет преобразования может понадобиться, если в URI используются имена,\nзакодированные методом base64, в котором задействован символ\n“<code>/</code>”.\nОднако из соображений безопасности лучше избегать отключения преобразования.\n</p><p>\nЕсли директива указана на уровне <a href=\"#server\">server</a>,\nеё значение используется только в том случае,\nесли сервер является сервером по умолчанию.\nУказанное значение распространяется на все виртуальные серверы,\nслушающие на том же адресе и порту.\n</p>"},{"directive":"memcached_send_timeout","defaultValue":"memcached_send_timeout 60s;","syntax":"memcached_send_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при передаче запроса серверу memcached.\nТаймаут устанавливается не на всю передачу запроса,\nа только между двумя операциями записи.\nЕсли по истечении этого времени сервер memcached не примет новых данных,\nсоединение закрывается.\n</p>"},{"directive":"memcached_read_timeout","defaultValue":"memcached_read_timeout 60s;","syntax":"memcached_read_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при чтении ответа сервера memcached.\nТаймаут устанавливается не на всю передачу ответа,\nа только между двумя операциями чтения.\nЕсли по истечении этого времени сервер memcached ничего не передаст,\nсоединение закрывается.\n</p>"},{"directive":"memcached_pass","defaultValue":"—","syntax":"memcached_pass адрес;","context":"location, if в location","description":"<p>\nЗадаёт адрес сервера memcached.\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи порта:\n</p> <blockquote class=\"example\"><pre>\nmemcached_pass localhost:11211;\n</pre></blockquote><p> \nили в виде пути UNIX-сокета:\n</p> <blockquote class=\"example\"><pre>\nmemcached_pass unix:/tmp/memcached.socket;\n</pre></blockquote><p> \n</p><p>\nЕсли доменному имени соответствует несколько адресов, то все они будут\nиспользоваться по очереди (round-robin).\nИ, кроме того, адрес может быть\n<a href=\"ngx_http_upstream_module.html\">группой серверов</a>.\n</p>"},{"directive":"memcached_next_upstream_tries","defaultValue":"memcached_next_upstream_tries 0;","syntax":"memcached_next_upstream_tries число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает число допустимых попыток для передачи запроса\n<a href=\"#memcached_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"memcached_next_upstream_timeout","defaultValue":"memcached_next_upstream_timeout 0;","syntax":"memcached_next_upstream_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает время, в течение которого возможна передача запроса\n<a href=\"#memcached_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"memcached_next_upstream","defaultValue":"memcached_next_upstream error timeout;","syntax":"memcached_next_upstream     error |    timeout |    invalid_response |    not_found |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях запрос будет передан следующему серверу:\n</p> <dl class=\"compact\">\n\n<dt><code>error</code></dt>\n<dd>произошла ошибка соединения с сервером, передачи ему запроса или\nчтения заголовка ответа сервера;</dd>\n\n<dt><code>timeout</code></dt>\n<dd>произошёл таймаут во время соединения с сервером,\nпередачи ему запроса или чтения заголовка ответа сервера;</dd>\n\n<dt><code>invalid_response</code></dt>\n<dd>сервер вернул пустой или неверный ответ;</dd>\n\n<dt><code>not_found</code></dt>\n<dd>сервер не нашёл ответ;</dd>\n\n<dt><code>off</code></dt>\n<dd>запрещает передачу запроса следующему серверу.</dd>\n\n</dl><p> \n</p><p>\nНеобходимо понимать, что передача запроса следующему серверу возможна\nтолько при условии, что клиенту ещё ничего не передавалось.\nТо есть, если ошибка или таймаут возникли в середине передачи ответа,\nто исправить это уже невозможно.\n</p><p>\nДиректива также определяет, что считается\n<a href=\"ngx_http_upstream_module.html#max_fails\">неудачной\nпопыткой</a> работы с сервером.\nСлучаи <code>error</code>, <code>timeout</code> и\n<code>invalid_response</code>\nвсегда считаются неудачными попытками, даже если они не указаны в директиве.\nСлучай <code>not_found</code>\nникогда не считается неудачной попыткой.\n</p><p>\nПередача запроса следующему серверу может быть ограничена по\n<a href=\"#memcached_next_upstream_tries\">количеству попыток</a>\nи по <a href=\"#memcached_next_upstream_timeout\">времени</a>.\n</p>"},{"directive":"memcached_gzip_flag","defaultValue":"—","syntax":"memcached_gzip_flag флаг;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.3.6.\n            </p></div><p>\nВключает проверку указанного <code><i>флага</i></code> в ответе\nсервера memcached и установку поля “<code>Content-Encoding</code>”\nзаголовка ответа в “<code>gzip</code>”, если этот флаг установлен.\n</p>"},{"directive":"memcached_force_ranges","defaultValue":"memcached_force_ranges off;","syntax":"memcached_force_ranges on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nВключает поддержку диапазонов запрашиваемых байт (byte-range)\nдля кэшированных и некэшированных ответов сервера memcached\nвне зависимости от наличия поля “Accept-Ranges”\nв заголовках этих ответов.\n</p>"},{"directive":"memcached_connect_timeout","defaultValue":"memcached_connect_timeout 60s;","syntax":"memcached_connect_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут для установления соединения с сервером memcached.\nНеобходимо иметь в виду, что этот таймаут обычно не может превышать 75 секунд.\n</p>"},{"directive":"memcached_buffer_size","defaultValue":"memcached_buffer_size 4k|8k;","syntax":"memcached_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> буфера, в который будет читаться ответ,\nполучаемый от сервера memcached.\nОтвет синхронно передаётся клиенту сразу же по мере его поступления.\n</p>"},{"directive":"memcached_bind","defaultValue":"—","syntax":"memcached_bind     адрес    [ transparent ] |    off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.22.\n            </p></div><p>\nЗадаёт локальный IP-адрес с необязательным портом (1.11.2),\nкоторый будет использоваться в исходящих соединениях с сервером memcached.\nВ значении параметра допустимо использование переменных (1.3.12).\nСпециальное значение <code>off</code> (1.3.12) отменяет действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>memcached_bind</code>, позволяя системе\nсамостоятельно выбирать локальный IP-адрес и порт.\n</p>"},{"directive":"max_ranges","defaultValue":"—","syntax":"max_ranges число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.2.\n            </p></div><p>\nОграничивает максимальное допустимое число диапазонов в запросах с\nуказанием диапазона запрашиваемых байт (byte-range requests).\nЗапросы, превышающие указанное ограничение, обрабатываются как\nесли бы они не содержали указания диапазонов.\nПо умолчанию число диапазонов не ограничено.\nЗначение 0 полностью запрещает поддержку диапазонов.\n</p>"},{"directive":"match","defaultValue":"—","syntax":"match имя  { ... }","context":"stream","description":"<p>\nЗадаёт именованный набор тестов для для анализа ответов сервера\nна запросы проверки работоспособности.\n</p><p>\nМогут быть заданы следующие параметры:\n</p> <dl class=\"compact\">\n\n<dt id=\"match_send\">\n<code>send</code> <code><i>строка</i></code>;\n</dt>\n<dd>\nотправляет <code><i>строку</i></code> на сервер;\n</dd>\n\n<dt id=\"match_expect\">\n<code>expect</code> <code><i>стока</i></code> |\n<code>~</code> <code><i>regex</i></code>;\n</dt>\n<dd>\nтекстовая строка (1.9.12) или регулярное выражение,\nкоторым должны соответствовать данные, полученные с сервера.\nРегулярное выражение задаётся либо с модификатором\n“<code>~*</code>” (для поиска совпадения без учёта регистра символов),\nлибо с модификатором “<code>~</code>” (с учётом регистра).\n</dd>\n\n</dl><p> \nПараметры <code>send</code> и <code>expect</code>\nмогут содержать строки в шестнадцатеричном виде\nс префиксом “<code>\\x</code>”\nи последующими двумя шестнадцатеричными цифрами,\nнапример “<code>\\x80</code>” (1.9.12).\n</p><p>\nПроверка работоспособности считается успешной, если\n</p> <ul class=\"compact\">\n<li>\nTCP-соединение успешно установлено;\n</li>\n\n<li>\n<code><i>строка</i></code> из параметра <code>send</code>\nбыла отправлена (если была задана);\n</li>\n\n<li>\nданные, полученные от сервера, совпали со строкой или регулярным выражением\nиз параметра <code>expect</code> (если был задан);\n</li>\n\n<li>\nистёкшее время не превышает значение, указанное\nв директиве <a href=\"#health_check_timeout\">health_check_timeout</a>.\n</li>\n\n</ul><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nupstream backend {\n    zone     upstream_backend 10m;\n    server   127.0.0.1:12345;\n}\n\nmatch http {\n    send     \"GET / HTTP/1.0\\r\\nHost: localhost\\r\\n\\r\\n\";\n    expect ~ \"200 OK\";\n}\n\nserver {\n    listen       12346;\n    proxy_pass   backend;\n    health_check match=http;\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nПроверяются лишь первые байты данных\n<a href=\"ngx_stream_proxy_module.html#proxy_buffer_size\">proxy_buffer_size</a>,\nполученные от сервера.\n</blockquote><p> \n</p>"},{"directive":"match","defaultValue":"—","syntax":"match имя { ... }","context":"http","description":"<p>\nЗадаёт именованный набор тестов для анализа ответов\nна запросы проверки работоспособности.\n</p><p>\nВ ответе могут быть протестированы следующие объекты:\n</p> <dl class=\"compact\">\n\n<dt><code>status 200;</code></dt>\n<dd>код ответа равен 200</dd>\n\n<dt><code>status ! 500;</code></dt>\n<dd>код ответа не равен 500</dd>\n\n<dt><code>status 200 204;</code></dt>\n<dd>код ответа равен 200 или 204</dd>\n\n<dt><code>status ! 301 302;</code></dt>\n<dd>код ответа не равен ни 301, ни 302</dd>\n\n<dt><code>status 200-399;</code></dt>\n<dd>код ответа находится в диапазоне от 200 до 399</dd>\n\n<dt><code>status ! 400-599;</code></dt>\n<dd>код ответа находится вне диапазона от 400 до 599</dd>\n\n<dt><code>status 301-303 307;</code></dt>\n<dd>код ответа равен 301, 302, 303 или 307</dd>\n\n</dl><p> \n\n</p> <dl class=\"compact\">\n\n<dt><code>header Content-Type = text/html;</code></dt>\n<dd>\nзаголовок содержит “Content-Type”\nсо значением <code>text/html</code>\n</dd>\n\n<dt><code>header Content-Type != text/html;</code></dt>\n<dd>\nзаголовок содержит “Content-Type”\nсо значением, отличным от <code>text/html</code>\n</dd>\n\n<dt><code>header Connection ~ close;</code></dt>\n<dd>\nзаголовок содержит “Connection”\nсо значением, совпадающим с регулярным выражением <code>close</code>\n</dd>\n\n<dt><code>header Connection !~ close;</code></dt>\n<dd>\nзаголовок содержит “Connection”\nсо значением, не совпадающим с регулярным выражением <code>close</code>\n</dd>\n\n<dt><code>header Host;</code></dt>\n<dd>заголовок содержит “Host”</dd>\n\n<dt><code>header ! X-Accel-Redirect;</code></dt>\n<dd>заголовок не содержит “X-Accel-Redirect”</dd>\n\n</dl><p> \n\n</p>"},{"directive":"master_process","defaultValue":"master_process on;","syntax":"master_process on | off;","context":"main","description":"<p>\nОпределяет, будут ли запускаться рабочие процессы.\nЭта директива предназначена для разработчиков nginx.\n</p>"},{"directive":"map_hash_max_size","defaultValue":"map_hash_max_size 2048;","syntax":"map_hash_max_size размер;","context":"stream","description":"<p>\nЗадаёт максимальный размер хэш-таблиц для переменных <a href=\"#map\">map</a>.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"map_hash_max_size","defaultValue":"map_hash_max_size 2048;","syntax":"map_hash_max_size размер;","context":"http","description":"<p>\nЗадаёт максимальный размер хэш-таблиц для переменных <a href=\"#map\">map</a>.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"map_hash_bucket_size","defaultValue":"map_hash_bucket_size 32|64|128;","syntax":"map_hash_bucket_size размер;","context":"stream","description":"<p>\nЗадаёт размер корзины в хэш-таблицах для переменных <a href=\"#map\">map</a>.\nЗначение по умолчанию зависит от размера строки кэша процессора.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"map_hash_bucket_size","defaultValue":"map_hash_bucket_size 32|64|128;","syntax":"map_hash_bucket_size размер;","context":"http","description":"<p>\nЗадаёт размер корзины в хэш-таблицах для переменных <a href=\"#map\">map</a>.\nЗначение по умолчанию зависит от размера строки кэша процессора.\nПодробнее настройка хэш-таблиц обсуждается в отдельном\n<a href=\"../hash.html\">документе</a>.\n</p>"},{"directive":"map","defaultValue":"—","syntax":"map     строка    $переменная { ... }","context":"stream","description":"<p>\nСоздаёт новую переменную, значение которой\nзависит от значений одной или более исходных переменных,\nуказанных в первом параметре.\n</p><p>\n</p> <blockquote class=\"note\">\nПоскольку переменные вычисляются только в момент использования,\nсамо по себе наличие даже большого числа объявлений переменных\n“<code>map</code>” не влечёт за собой никаких дополнительных\nрасходов на обработку соединений.\n</blockquote><p> \n</p><p>\nПараметры внутри блока <code>map</code> задают соответствие\nмежду исходными и результирующими значениями.\n</p><p>\nИсходные значения задаются строками или регулярными выражениями.\n</p><p>\nСтроки проверяются без учёта регистра.\n</p><p>\nПеред регулярным выражением ставится символ “<code>~</code>”,\nесли при сравнении следует учитывать регистр символов, либо символы\n“<code>~*</code>”, если регистр символов учитывать не нужно.\nРегулярное выражение может содержать именованные и позиционные выделения,\nкоторые могут затем использоваться в других директивах совместно с\nрезультирующей переменной.\n</p><p>\nЕсли исходное значение совпадает с именем одного из специальных параметров,\nописанных ниже, перед ним следует поставить символ “<code>\\</code>”.\n</p><p>\nВ качестве результирующего значения можно указать текст,\nпеременную и их комбинации.\n</p><p>\nТакже поддерживаются следующие специальные параметры:\n</p> <dl class=\"compact\">\n<dt><code>default</code> <code><i>значение</i></code></dt>\n<dd>\nзадаёт результирующее значение, если исходное значение не\nсовпадает ни с одним из перечисленных.\nЕсли параметр <code>default</code> не указан, результирующим значением\nпо умолчанию будет пустая строка.\n</dd>\n\n<dt><code>hostnames</code></dt>\n<dd>\nуказывает, что в качестве исходных значений можно\nиспользовать маску для первой или последней части имени хоста, например,\n<blockquote class=\"example\"><pre>\n*.example.com 1;\nexample.*     1;\n</pre></blockquote>\nВместо двух записей\n<blockquote class=\"example\"><pre>\nexample.com   1;\n*.example.com 1;\n</pre></blockquote>\nможно использовать одну:\n<blockquote class=\"example\"><pre>\n.example.com  1;\n</pre></blockquote>\nЭтот параметр следует указывать перед списком значений.\n</dd>\n\n<dt><code>include</code> <code><i>файл</i></code></dt>\n<dd>\nвключает файл со значениями.\nВключений может быть несколько.\n</dd>\n\n<dt id=\"volatile\"><code>volatile</code></dt>\n<dd>\nуказывает, что переменная не кэшируется (1.11.7).\n</dd>\n\n</dl><p> \n</p><p>\nЕсли исходному значению соответствует несколько из указанных вариантов,\nнапример, одновременно подходят и маска, и регулярное выражение,\nбудет выбран первый подходящий вариант в следующем порядке приоритета:\n</p> <ol class=\"compact\">\n\n<li>\nстроковое значение без маски\n</li>\n\n<li>\nсамое длинное строковое значение с маской в начале,\nнапример “<code>*.example.com</code>”\n</li>\n\n<li>\nсамое длинное строковое значение с маской в конце,\nнапример “<code>mail.*</code>”\n</li>\n\n<li>\nпервое подходящее регулярное выражение\n(в порядке следования в конфигурационном файле)\n</li>\n\n<li>\nзначение по умолчанию (<code>default</code>)\n</li>\n\n</ol><p> \n</p>"},{"directive":"map","defaultValue":"—","syntax":"map     строка    $переменная { ... }","context":"http","description":"<p>\nСоздаёт новую переменную, значение которой\nзависит от значений одной или более исходных переменных,\nуказанных в первом параметре.\n</p> <blockquote class=\"note\">\nДо версии 0.9.0 в качестве первого параметра можно было\nуказать только одну переменную.\n</blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nПоскольку переменные вычисляются только в момент использования,\nсамо по себе наличие даже большого числа объявлений переменных\n“<code>map</code>” не влечёт за собой никаких дополнительных\nрасходов на обработку запросов.\n</blockquote><p> \n</p><p>\nПараметры внутри блока <code>map</code> задают соответствие\nмежду исходными и результирующими значениями.\n</p><p>\nИсходные значения задаются строками или регулярными выражениями (0.9.6).\n</p><p>\nСтроки проверяются без учёта регистра.\n</p><p>\nПеред регулярным выражением ставится символ “<code>~</code>”,\nесли при сравнении следует учитывать регистр символов, либо символы\n“<code>~*</code>” (1.0.4), если регистр символов учитывать не нужно.\nРегулярное выражение может содержать именованные и позиционные выделения,\nкоторые могут затем использоваться в других директивах совместно с\nрезультирующей переменной.\n</p><p>\nЕсли исходное значение совпадает с именем одного из специальных параметров,\nописанных ниже, перед ним следует поставить символ “<code>\\</code>”.\n</p><p>\nВ качестве результирующего значения можно указать текст,\nпеременную (0.9.0) и их комбинации (1.11.0).\n</p><p>\nТакже поддерживаются следующие специальные параметры:\n</p> <dl class=\"compact\">\n<dt><code>default</code> <code><i>значение</i></code></dt>\n<dd>\nзадаёт результирующее значение, если исходное значение не\nсовпадает ни с одним из перечисленных.\nЕсли параметр <code>default</code> не указан, результирующим значением\nпо умолчанию будет пустая строка.\n</dd>\n\n<dt><code>hostnames</code></dt>\n<dd>\nуказывает, что в качестве исходных значений можно\nиспользовать маску для первой или последней части имени хоста, например,\n<blockquote class=\"example\"><pre>\n*.example.com 1;\nexample.*     1;\n</pre></blockquote>\nВместо двух записей\n<blockquote class=\"example\"><pre>\nexample.com   1;\n*.example.com 1;\n</pre></blockquote>\nможно использовать одну:\n<blockquote class=\"example\"><pre>\n.example.com  1;\n</pre></blockquote>\nЭтот параметр следует указывать перед списком значений.\n</dd>\n\n<dt><code>include</code> <code><i>файл</i></code></dt>\n<dd>\nвключает файл со значениями.\nВключений может быть несколько.\n</dd>\n\n<dt id=\"volatile\"><code>volatile</code></dt>\n<dd>\nуказывает, что переменная не кэшируется (1.11.7).\n</dd>\n\n</dl><p> \n</p><p>\nЕсли исходному значению соответствует несколько из указанных вариантов,\nнапример, одновременно подходят и маска, и регулярное выражение,\nбудет выбран первый подходящий вариант в следующем порядке приоритета:\n</p> <ol class=\"compact\">\n\n<li>\nстроковое значение без маски\n</li>\n\n<li>\nсамое длинное строковое значение с маской в начале,\nнапример “<code>*.example.com</code>”\n</li>\n\n<li>\nсамое длинное строковое значение с маской в конце,\nнапример “<code>mail.*</code>”\n</li>\n\n<li>\nпервое подходящее регулярное выражение\n(в порядке следования в конфигурационном файле)\n</li>\n\n<li>\nзначение по умолчанию (<code>default</code>)\n</li>\n\n</ol><p> \n</p>"},{"directive":"mail","defaultValue":"—","syntax":"mail { ... }","context":"main","description":"<p>\nПредоставляет контекст конфигурационного файла, в котором указываются\nдирективы почтового сервера.\n</p>"},{"directive":"log_subrequest","defaultValue":"log_subrequest off;","syntax":"log_subrequest on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает записывать в\n<a href=\"ngx_http_log_module.html#access_log\">access_log</a>\nподзапросы.\n</p>"},{"directive":"log_not_found","defaultValue":"log_not_found on;","syntax":"log_not_found on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает записывать в\n<a href=\"../ngx_core_module.html#error_log\">error_log</a>\nошибки о том, что файл не найден.\n</p>"},{"directive":"log_format","defaultValue":"—","syntax":"log_format     название    [escape=default|json]    строка ...;","context":"stream","description":"<p>\nЗадаёт формат лога, например:\n</p> <blockquote class=\"example\"><pre>\nlog_format proxy '$remote_addr [$time_local] '\n                 '$protocol $status $bytes_sent $bytes_received '\n                 '$session_time \"$upstream_addr\" '\n                 '\"$upstream_bytes_sent\" \"$upstream_bytes_received\" \"$upstream_connect_time\"';\n</pre></blockquote><p> \n</p>"},{"directive":"log_format","defaultValue":"log_format combined \"...\";","syntax":"log_format     название    [escape=default|json]    строка ...;","context":"http","description":"<p>\nЗадаёт формат лога.\n</p>"},{"directive":"lock_file","defaultValue":"lock_file logs/nginx.lock;","syntax":"lock_file файл;","context":"main","description":"<p>\nДля реализации <a href=\"#accept_mutex\">accept_mutex</a> и сериализации доступа к\nразделяемой памяти nginx использует механизм блокировок.\nНа большинстве систем блокировки реализованы с помощью атомарных\nопераций, и эта директива игнорируется.\nДля остальных систем применяется механизм файлов блокировок.\nЭта директива задаёт префикс имён файлов блокировок.\n</p>"},{"directive":"location","defaultValue":"—","syntax":"location [    = |    ~ |    ~* |    ^~    ] uri { ... }location @имя { ... }","context":"server, location","description":"<p>\nУстанавливает конфигурацию в зависимости от URI запроса.\n</p><p>\nДля сопоставления используется URI запроса в нормализованном виде,\nпосле декодирования текста, заданного в виде “<code>%XX</code>”,\nпреобразования относительных элементов пути “<code>.</code>” и\n“<code>..</code>” в реальные и возможной\n<a href=\"#merge_slashes\">замены</a> двух и более подряд идущих\nслэшей на один.\n</p><p>\nlocation можно задать префиксной строкой или регулярным выражением.\nРегулярные выражения задаются либо с модификатором “<code>~*</code>”\n(для поиска совпадения без учёта регистра символов),\nлибо с модификатором “<code>~</code>” (с учётом регистра).\nЧтобы найти location, соответствующий запросу, вначале проверяются\nlocation’ы, заданные префиксными строками (префиксные location’ы).\nСреди них ищется location с совпадающим префиксом\nмаксимальной длины и запоминается.\nЗатем проверяются регулярные выражения, в порядке их следования\nв конфигурационном файле.\nПроверка регулярных выражений прекращается после первого же совпадения,\nи используется соответствующая конфигурация.\nЕсли совпадение с регулярным выражением не найдено, то используется\nконфигурация запомненного ранее префиксного location’а.\n</p><p>\nБлоки <code>location</code> могут быть вложенными,\nс некоторыми исключениями, о которых говорится ниже.\n</p><p>\nДля операционных систем, нечувствительных к регистру символов, таких\nкак macOS и Cygwin, сравнение с префиксными строками производится\nбез учёта регистра (0.7.7).\nОднако сравнение ограничено только однобайтными locale’ями.\n</p><p>\nРегулярные выражения могут содержать выделения (0.7.40), которые могут\nзатем использоваться в других директивах.\n</p><p>\nЕсли у совпавшего префиксного location’а максимальной длины указан модификатор\n“<code>^~</code>”, то регулярные выражения не проверяются.\n</p><p>\nКроме того, с помощью модификатора “<code>=</code>” можно задать точное\nсовпадение URI и location.\nПри точном совпадении поиск сразу же прекращается.\nНапример, если запрос “<code>/</code>” случается часто, то\nуказав “<code>location = /</code>”, можно ускорить обработку\nэтих запросов, так как поиск прекратится после первого же сравнения.\nОчевидно, что такой location не может иметь вложенные location’ы.\n</p><p>\n</p> <blockquote class=\"note\">\nВ версиях с 0.7.1 по 0.8.41, если запрос точно совпал с префиксным\nlocation’ом без модификаторов “<code>=</code>” и “<code>^~</code>”,\nто поиск тоже сразу же прекращается и регулярные выражения также\nне проверяются.\n</blockquote><p> \n</p><p>\nПроиллюстрируем вышесказанное примером:\n</p> <blockquote class=\"example\"><pre>\nlocation = / {\n    [ конфигурация А ]\n}\n\nlocation / {\n    [ конфигурация Б ]\n}\n\nlocation /documents/ {\n    [ конфигурация В ]\n}\n\nlocation ^~ /images/ {\n    [ конфигурация Г ]\n}\n\nlocation ~* \\.(gif|jpg|jpeg)$ {\n    [ конфигурация Д ]\n}\n</pre></blockquote><p> \nДля запроса “<code>/</code>” будет выбрана конфигурация А,\nдля запроса “<code>/index.html</code>” — конфигурация Б,\nдля запроса “<code>/documents/document.html</code>” — конфигурация В,\nдля запроса “<code>/images/1.gif</code>” — конфигурация Г,\nа для запроса “<code>/documents/1.jpg</code>” — конфигурация Д.\n</p><p>\nПрефикс “<code>@</code>” задаёт именованный location.\nТакой location не используется при обычной обработке запросов, а\nпредназначен только для перенаправления в него запросов.\nТакие location’ы не могут быть вложенными и не могут содержать\nвложенные location’ы.\n</p><p>\nЕсли location задан префиксной строкой со слэшом в конце\nи запросы обрабатываются при помощи\n<a href=\"ngx_http_proxy_module.html#proxy_pass\">proxy_pass</a>,\n<a href=\"ngx_http_fastcgi_module.html#fastcgi_pass\">fastcgi_pass</a>,\n<a href=\"ngx_http_uwsgi_module.html#uwsgi_pass\">uwsgi_pass</a>,\n<a href=\"ngx_http_scgi_module.html#scgi_pass\">scgi_pass</a> или\n<a href=\"ngx_http_memcached_module.html#memcached_pass\">memcached_pass</a>,\nпроисходит специальная обработка.\nВ ответ на запрос с URI равным этой строке, но без завершающего слэша,\nбудет возвращено постоянное перенаправление с кодом 301\nна URI с добавленным в конец слэшом.\nЕсли такое поведение нежелательно, можно задать точное совпадение\nURI и location, например:\n</p> <blockquote class=\"example\"><pre>\nlocation /user/ {\n    proxy_pass http://user.example.com;\n}\n\nlocation = /user {\n    proxy_pass http://login.example.com;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"load_module","defaultValue":"—","syntax":"load_module файл;","context":"main","description":"<p>Эта директива появилась в версии 1.9.11.\n            </p></div><p>\nЗагружает динамический модуль.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nload_module modules/ngx_mail_module.so;\n</pre></blockquote><p> \n</p>"},{"directive":"listen","defaultValue":"—","syntax":"listen     адрес:порт    [ssl]    [udp]    [proxy_protocol]    [backlog=число]    [rcvbuf=размер]    [sndbuf=размер]    [bind]    [ipv6only=on|off]    [reuseport]    [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];","context":"server","description":"<p>\nЗадаёт <code><i>адрес</i></code> и <code><i>порт</i></code> для сокета,\nна котором сервер будет принимать соединения.\nМожно указать только порт.\nКроме того, адрес может быть именем хоста, например:\n</p> <blockquote class=\"example\"><pre>\nlisten 127.0.0.1:12345;\nlisten *:12345;\nlisten 12345;     # то же, что и *:12345\nlisten localhost:12345;\n</pre></blockquote><p> \nIPv6-адреса задаются в квадратных скобках:\n</p> <blockquote class=\"example\"><pre>\nlisten [::1]:12345;\nlisten [::]:12345;\n</pre></blockquote><p> \nUNIX-сокеты задаются префиксом “<code>unix:</code>”\n</p> <blockquote class=\"example\"><pre>\nlisten unix:/var/run/nginx.sock;\n</pre></blockquote><p> \n\n</p><p>\nПараметр <code>ssl</code> указывает на то, что все соединения,\nпринимаемые на данном порту, должны работать в режиме SSL.\n</p>"},{"directive":"listen","defaultValue":"—","syntax":"listen     адрес:порт    [ssl]    [backlog=число]    [rcvbuf=размер]    [sndbuf=размер]    [bind]    [ipv6only=on|off]    [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];","context":"server","description":"<p>\nЗадаёт <code><i>адрес</i></code> и <code><i>порт</i></code> сокета, на котором сервер\nбудет принимать запросы.\nМожно указать только порт.\nКроме того, адрес может быть именем сервера, например:\n</p> <blockquote class=\"example\"><pre>\nlisten 127.0.0.1:110;\nlisten *:110;\nlisten 110;     # то же, что и *:110\nlisten localhost:110;\n</pre></blockquote><p> \nIPv6-адреса (0.7.58) задаются в квадратных скобках:\n</p> <blockquote class=\"example\"><pre>\nlisten [::1]:110;\nlisten [::]:110;\n</pre></blockquote><p> \nUNIX-сокеты (1.3.5) задаются при помощи префикса “<code>unix:</code>”:\n</p> <blockquote class=\"example\"><pre>\nlisten unix:/var/run/nginx.sock;\n</pre></blockquote><p> \n\n</p><p>\nРазные серверы должны слушать на разных парах\n<code><i>адрес</i></code>:<code><i>порт</i></code>.\n</p><p>\nПараметр <code>ssl</code> указывает на то, что все соединения,\nпринимаемые на данном порту, должны работать в режиме SSL.\n</p><p>\nВ директиве <code>listen</code> можно также указать несколько\nдополнительных параметров, специфичных для связанных с сокетами\nсистемных вызовов.\n</p> <dl class=\"compact\">\n\n<dt>\n<code>backlog</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт параметр <code>backlog</code> в вызове\n<code>listen()</code>, который ограничивает\nмаксимальный размер очереди ожидающих приёма соединений (1.9.2).\nПо умолчанию <code>backlog</code> устанавливается равным -1 для\nFreeBSD, DragonFly BSD и macOS, и 511 для других платформ.\n</dd>\n\n<dt>\n<code>rcvbuf</code>=<code><i>размер</i></code>\n</dt>\n<dd>\nзадаёт размер буфера приёма\n(параметр <code>SO_RCVBUF</code>) для слушающего сокета (1.11.13).\n</dd>\n\n<dt>\n<code>sndbuf</code>=<code><i>размер</i></code>\n</dt>\n<dd>\nзадаёт размер буфера передачи\n(параметр <code>SO_SNDBUF</code>) для слушающего сокета (1.11.13).\n</dd>\n\n<dt>\n<code>bind</code>\n</dt>\n<dd>\nуказывает, что для данной пары\n<code><i>адрес</i></code>:<code><i>порт</i></code> нужно делать\n<code>bind()</code> отдельно.\nЭто нужно потому, что если описаны несколько директив <code>listen</code>\nс одинаковым портом, но разными адресами, и одна из директив\n<code>listen</code> слушает на всех адресах для данного порта\n(<code>*:</code><code><i>порт</i></code>), то nginx сделает\n<code>bind()</code> только на <code>*:</code><code><i>порт</i></code>.\nНеобходимо заметить, что в этом случае для определения адреса, на который\nпришло соединение, делается системный вызов <code>getsockname()</code>.\nЕсли же используются параметры <code>ipv6only</code>\nили <code>so_keepalive</code>,\nто для данной пары\n<code><i>адрес</i></code>:<code><i>порт</i></code> всегда делается\nотдельный вызов <code>bind()</code>.\n</dd>\n\n<dt>\n<code>ipv6only</code>=<code>on</code>|<code>off</code>\n</dt>\n<dd>\nэтот параметр определяет\n(через параметр сокета <code>IPV6_V6ONLY</code>),\nбудет ли слушающий на wildcard-адресе <code>[::]</code> IPv6-сокет\nпринимать только IPv6-соединения, или же одновременно IPv6- и IPv4-соединения.\nПо умолчанию параметр включён.\nУстановить его можно только один раз на старте.\n</dd>\n\n<dt>\n<code>so_keepalive</code>=<code>on</code>|<code>off</code>|[<code><i>keepidle</i></code>]:[<code><i>keepintvl</i></code>]:[<code><i>keepcnt</i></code>]\n</dt>\n<dd>\nэтот параметр конфигурирует для слушающего сокета\nповедение “TCP keepalive”.\nЕсли этот параметр опущен, то для сокета будут действовать\nнастройки операционной системы.\nЕсли он установлен в значение “<code>on</code>”, то для сокета\nвключается параметр <code>SO_KEEPALIVE</code>.\nЕсли он установлен в значение “<code>off</code>”, то для сокета\nпараметр <code>SO_KEEPALIVE</code> выключается.\nНекоторые операционные системы поддерживают настройку параметров\n“TCP keepalive” на уровне сокета посредством параметров\n<code>TCP_KEEPIDLE</code>, <code>TCP_KEEPINTVL</code> и\n<code>TCP_KEEPCNT</code>.\nНа таких системах (в настоящий момент это Linux 2.4+, NetBSD 5+ и\nFreeBSD 9.0-STABLE)\nих можно сконфигурировать с помощью параметров <code><i>keepidle</i></code>,\n<code><i>keepintvl</i></code> и <code><i>keepcnt</i></code>.\nОдин или два параметра могут быть опущены, в таком случае для\nсоответствующего параметра сокета будут действовать стандартные\nсистемные настройки.\nНапример,\n<blockquote class=\"example\"><pre>so_keepalive=30m::10</pre></blockquote>\nустановит таймаут бездействия (<code>TCP_KEEPIDLE</code>) в 30 минут,\nдля интервала проб (<code>TCP_KEEPINTVL</code>) будет действовать\nстандартная системная настройка, а счётчик проб (<code>TCP_KEEPCNT</code>)\nбудет равен 10.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"listen","defaultValue":"listen *:80 | *:8000;","syntax":"listen     адрес[:порт]    [default_server]    [ssl]    [http2 | spdy]    [proxy_protocol]    [setfib=число]    [fastopen=число]    [backlog=число]    [rcvbuf=размер]    [sndbuf=размер]    [accept_filter=фильтр]    [deferred]    [bind]    [ipv6only=on|off]    [reuseport]    [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];listen     порт    [default_server]    [ssl]    [http2 | spdy]    [proxy_protocol]    [setfib=число]    [fastopen=число]    [backlog=число]    [rcvbuf=размер]    [sndbuf=размер]    [accept_filter=фильтр]    [deferred]    [bind]    [ipv6only=on|off]    [reuseport]    [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];listen     unix:путь    [default_server]    [ssl]    [http2 | spdy]    [proxy_protocol]    [backlog=число]    [rcvbuf=размер]    [sndbuf=размер]    [accept_filter=фильтр]    [deferred]    [bind]    [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];","context":"server","description":"<p>\nЗадаёт <code><i>адрес</i></code> и <code><i>порт</i></code> для IP\nили <code><i>путь</i></code> для UNIX-сокета,\nна которых сервер будет принимать запросы.\nМожно указать <code><i>адрес</i></code> и <code><i>порт</i></code>,\nлибо только <code><i>адрес</i></code> или только <code><i>порт</i></code>.\nКроме того, <code><i>адрес</i></code> может быть именем хоста, например:\n</p> <blockquote class=\"example\"><pre>\nlisten 127.0.0.1:8000;\nlisten 127.0.0.1;\nlisten 8000;\nlisten *:8000;\nlisten localhost:8000;\n</pre></blockquote><p> \nIPv6-адреса (0.7.36) задаются в квадратных скобках:\n</p> <blockquote class=\"example\"><pre>\nlisten [::]:8000;\nlisten [::1];\n</pre></blockquote><p> \nUNIX-сокеты (0.8.21) задаются при помощи префикса “<code>unix:</code>”:\n</p> <blockquote class=\"example\"><pre>\nlisten unix:/var/run/nginx.sock;\n</pre></blockquote><p> \n</p><p>\nЕсли указан только <code><i>адрес</i></code>, то используется порт 80.\n</p><p>\nЕсли директива не указана, то используется либо <code>*:80</code>,\nесли nginx работает с привилегиями суперпользователя,\nлибо <code>*:8000</code>.\n</p><p>\nЕсли у директивы есть параметр <code>default_server</code>, то сервер,\nв котором описана эта директива, будет сервером по умолчанию для указанной пары\n<code><i>адрес</i></code>:<code><i>порт</i></code>.\nЕсли же директив с параметром <code>default_server</code> нет, то\nсервером по умолчанию будет первый сервер, в котором описана пара\n<code><i>адрес</i></code>:<code><i>порт</i></code>.\n</p> <blockquote class=\"note\">\nДо версии 0.8.21 этот параметр назывался просто\n<code>default</code>.\n</blockquote><p> \n</p><p>\nПараметр <code>ssl</code> (0.7.14) указывает на то, что все соединения,\nпринимаемые на данном порту, должны работать в режиме SSL.\nЭто позволяет задать компактную <a href=\"configuring_https_servers.html#single_http_https_server\">конфигурацию</a> для сервера,\nработающего сразу в двух режимах — HTTP и HTTPS.\n</p><p>\nПараметр <code>http2</code> (1.9.5) позволяет принимать на этом порту\n<a href=\"ngx_http_v2_module.html\">HTTP/2</a>-соединения.\nОбычно, чтобы это работало, следует также указать параметр\n<code>ssl</code>, однако nginx можно также настроить и на приём\nHTTP/2-соединений без SSL.\n</p><p>\nПараметр <code>spdy</code> (1.3.15-1.9.4) позволяет принимать на этом порту\n<a href=\"ngx_http_spdy_module.html\">SPDY</a>-соединения.\nОбычно, чтобы это работало, следует также указать параметр\n<code>ssl</code>, однако nginx можно также настроить и на приём\nSPDY-соединений без SSL.\n</p><p>\nПараметр <code>proxy_protocol</code> (1.5.12)\nуказывает на то, что все соединения, принимаемые на данном порту,\nдолжны использовать\n<a href=\"http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt\">протокол\nPROXY</a>.\n</p><p>\nВ директиве <code>listen</code> можно также указать несколько\nдополнительных параметров, специфичных для связанных с сокетами\nсистемных вызовов.\nЭти параметры можно задать в любой директиве <code>listen</code>,\nно только один раз для указанной пары\n<code><i>адрес</i></code>:<code><i>порт</i></code>.\n</p> <blockquote class=\"note\">\nДо версии 0.8.21 их можно было указывать лишь в директиве\n<code>listen</code> совместно с параметром <code>default</code>.\n</blockquote><p> \n</p> <dl class=\"compact\">\n\n<dt>\n<code>setfib</code>=<code><i>число</i></code>\n</dt>\n<dd>\nэтот параметр (0.8.44) задаёт таблицу маршрутизации, FIB\n(параметр <code>SO_SETFIB</code>) для слушающего сокета.\nВ настоящий момент это работает только на FreeBSD.\n</dd>\n\n<dt>\n<code>fastopen</code>=<code><i>число</i></code>\n</dt>\n<dd>\nвключает\n“<a href=\"http://en.wikipedia.org/wiki/TCP_Fast_Open\">TCP Fast Open</a>”\nдля слушающего сокета (1.5.8) и\n<a href=\"https://tools.ietf.org/html/rfc7413#section-5.1\">ограничивает</a>\nмаксимальную длину очереди соединений, которые ещё не завершили процесс\nthree-way handshake.\n<blockquote class=\"note\">\nНе включайте “TCP Fast Open”, не убедившись, что сервер может адекватно\nобрабатывать многократное получение\n<a href=\"https://tools.ietf.org/html/rfc7413#section-6.1\">\nодного и того же SYN-пакета с данными</a>.\n</blockquote>\n</dd>\n\n<dt>\n<code>backlog</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт параметр <code>backlog</code> в вызове\n<code>listen()</code>, который ограничивает\nмаксимальный размер очереди ожидающих приёма соединений.\nПо умолчанию <code>backlog</code> устанавливается равным -1 для\nFreeBSD, DragonFly BSD и macOS, и 511 для других платформ.\n</dd>\n\n<dt>\n<code>rcvbuf</code>=<code><i>размер</i></code>\n</dt>\n<dd>\nзадаёт размер буфера приёма\n(параметр <code>SO_RCVBUF</code>) для слушающего сокета.\n</dd>\n\n<dt>\n<code>sndbuf</code>=<code><i>размер</i></code>\n</dt>\n<dd>\nзадаёт размер буфера передачи\n(параметр <code>SO_SNDBUF</code>) для слушающего сокета.\n</dd>\n\n<dt>\n<code>accept_filter</code>=<code><i>фильтр</i></code>\n</dt>\n<dd>\nзадаёт название accept-фильтра\n(параметр <code>SO_ACCEPTFILTER</code>) для слушающего сокета,\nкоторый включается для фильтрации входящих соединений\nперед передачей их в <code>accept()</code>.\nРаботает только на FreeBSD и NetBSD 5.0+.\nМожно использовать два фильтра:\n<a href=\"http://man.freebsd.org/accf_data\">dataready</a>\nи\n<a href=\"http://man.freebsd.org/accf_http\">httpready</a>.\n</dd>\n\n<dt>\n<code>deferred</code>\n</dt>\n<dd>\nуказывает использовать отложенный <code>accept()</code>\n(параметр <code>TCP_DEFER_ACCEPT</code> сокета) на Linux.\n</dd>\n\n<dt>\n<code>bind</code>\n</dt>\n<dd>\nуказывает, что для данной пары\n<code><i>адрес</i></code>:<code><i>порт</i></code> нужно делать\n<code>bind()</code> отдельно.\nЭто нужно потому, что если описаны несколько директив <code>listen</code>\nс одинаковым портом, но разными адресами, и одна из директив\n<code>listen</code> слушает на всех адресах для данного порта\n(<code>*:</code><code><i>порт</i></code>), то nginx сделает\n<code>bind()</code> только на <code>*:</code><code><i>порт</i></code>.\nНеобходимо заметить, что в этом случае для определения адреса, на который\nпришло соединение, делается системный вызов <code>getsockname()</code>.\nЕсли же используются параметры <code>setfib</code>,\n<code>backlog</code>, <code>rcvbuf</code>,\n<code>sndbuf</code>, <code>accept_filter</code>,\n<code>deferred</code>, <code>ipv6only</code>\nили <code>so_keepalive</code>,\nто для данной пары\n<code><i>адрес</i></code>:<code><i>порт</i></code> всегда делается\nотдельный вызов <code>bind()</code>.\n</dd>\n\n<dt>\n<code>ipv6only</code>=<code>on</code>|<code>off</code>\n</dt>\n<dd>\nэтот параметр (0.7.42) определяет\n(через параметр сокета <code>IPV6_V6ONLY</code>),\nбудет ли слушающий на wildcard-адресе <code>[::]</code> IPv6-сокет\nпринимать только IPv6-соединения, или же одновременно IPv6- и IPv4-соединения.\nПо умолчанию параметр включён.\nУстановить его можно только один раз на старте.\n<blockquote class=\"note\">\nДо версии 1.3.4,\nесли этот параметр не был задан явно, то для сокета действовали\nнастройки операционной системы.\n</blockquote>\n</dd>\n\n<dt id=\"reuseport\">\n<code>reuseport</code>\n</dt>\n<dd>\nэтот параметр (1.9.1) указывает, что нужно создавать отдельный слушающий сокет\nдля каждого рабочего процесса\n(через параметр сокета <code>SO_REUSEPORT</code>), позволяя ядру\nраспределять входящие соединения между рабочими процессами.\nВ настоящий момент это работает только на Linux 3.9+ и DragonFly BSD.\n<blockquote class=\"note\">\nНенадлежащее использование параметра может иметь\n<a href=\"http://man7.org/linux/man-pages/man7/socket.7.html\">последствия</a>\nв плане безопасности.\n</blockquote>\n</dd>\n\n<dt>\n<code>so_keepalive</code>=<code>on</code>|<code>off</code>|[<code><i>keepidle</i></code>]:[<code><i>keepintvl</i></code>]:[<code><i>keepcnt</i></code>]\n</dt>\n<dd>\nэтот параметр (1.1.11) конфигурирует для слушающего сокета\nповедение “TCP keepalive”.\nЕсли этот параметр опущен, то для сокета будут действовать\nнастройки операционной системы.\nЕсли он установлен в значение “<code>on</code>”, то для сокета\nвключается параметр <code>SO_KEEPALIVE</code>.\nЕсли он установлен в значение “<code>off</code>”, то для сокета\nпараметр <code>SO_KEEPALIVE</code> выключается.\nНекоторые операционные системы поддерживают настройку параметров\n“TCP keepalive” на уровне сокета посредством параметров\n<code>TCP_KEEPIDLE</code>, <code>TCP_KEEPINTVL</code> и\n<code>TCP_KEEPCNT</code>.\nНа таких системах (в настоящий момент это Linux 2.4+, NetBSD 5+ и\nFreeBSD 9.0-STABLE)\nих можно сконфигурировать с помощью параметров <code><i>keepidle</i></code>,\n<code><i>keepintvl</i></code> и <code><i>keepcnt</i></code>.\nОдин или два параметра могут быть опущены, в таком случае для\nсоответствующего параметра сокета будут действовать стандартные\nсистемные настройки.\nНапример,\n<blockquote class=\"example\"><pre>so_keepalive=30m::10</pre></blockquote>\nустановит таймаут бездействия (<code>TCP_KEEPIDLE</code>) в 30 минут,\nдля интервала проб (<code>TCP_KEEPINTVL</code>) будет действовать\nстандартная системная настройка, а счётчик проб (<code>TCP_KEEPCNT</code>)\nбудет равен 10.\n</dd>\n\n</dl><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nlisten 127.0.0.1 default_server accept_filter=dataready backlog=1024;\n</pre></blockquote><p> \n</p>"},{"directive":"lingering_timeout","defaultValue":"lingering_timeout 5s;","syntax":"lingering_timeout время;","context":"http, server, location","description":"<p>\nЕсли действует <a href=\"#lingering_close\">lingering_close</a>, эта директива задаёт\nмаксимальное время ожидания поступления дополнительных данных от клиента.\nЕсли в течение этого времени данные не были получены, соединение закрывается.\nВ противном случае данные читаются и игнорируются, и nginx снова\nждёт поступления данных.\nЦикл “ждать-читать-игнорировать” повторяется, но не дольше чем задано\nдирективой <a href=\"#lingering_time\">lingering_time</a>.\n</p>"},{"directive":"lingering_time","defaultValue":"lingering_time 30s;","syntax":"lingering_time время;","context":"http, server, location","description":"<p>\nЕсли действует <a href=\"#lingering_close\">lingering_close</a>,\nэта директива задаёт максимальное время, в течение которого nginx\nбудет обрабатывать (читать и игнорировать) дополнительные данные,\nпоступающие от клиента.\nПо прошествии этого времени соединение будет закрыто, даже если\nбудут ещё данные.\n</p>"},{"directive":"lingering_close","defaultValue":"lingering_close on;","syntax":"lingering_close     off |    on |    always;","context":"http, server, location","description":"<p>\n                    Эта директива появилась в версиях 1.1.0 и 1.0.6.\n                    \n                        </p>\n                    </div><p>\nУправляет закрытием соединений с клиентами.\n</p><p>\nСо значением по умолчанию “<code>on</code>” nginx будет\n<a href=\"#lingering_timeout\">ждать</a> и\n<a href=\"#lingering_time\">обрабатывать</a> дополнительные данные,\nпоступающие от клиента, перед полным закрытием соединения, но только\nесли эвристика указывает на то, что клиент может ещё послать данные.\n</p><p>\nСо значением “<code>always</code>” nginx всегда будет\nждать и обрабатывать дополнительные данные, поступающие от клиента.\n</p><p>\nСо значением “<code>off</code>” nginx не будет ждать поступления\nдополнительных данных и сразу же закроет соединение.\nЭто поведение нарушает протокол и поэтому не должно использоваться без\nнеобходимости.\n</p>"},{"directive":"limit_zone","defaultValue":"—","syntax":"limit_zone     название    $переменная    размер;","context":"http","description":"<p>\nЭта директива устарела в версии 1.1.8\nи была удалена в версии 1.7.6.\nВместо неё следует\nиспользовать аналогичную директиву <a href=\"#limit_conn_zone\">limit_conn_zone</a>\nс изменённым синтаксисом:\n</p> <blockquote class=\"note\">\n<code>limit_conn_zone</code>\n<code><i>$переменная</i></code>\n<code>zone</code>=<code><i>название</i></code>:<code><i>размер</i></code>;\n</blockquote><p> \n</p>"},{"directive":"limit_req_zone","defaultValue":"—","syntax":"limit_req_zone     ключ    zone=название:размер    rate=скорость;","context":"http","description":"<p>\nЗадаёт параметры зоны разделяемой памяти,\nкоторая хранит состояние для разных значений ключа.\nСостояние в частности хранит текущее число избыточных запросов.\nВ качестве ключа можно использовать текст, переменные и их комбинации.\nЗапросы с пустым значением ключа не учитываются.\n</p> <blockquote class=\"note\">\nДо версии 1.7.6 в качестве ключа можно было задать ровно одну переменную.\n</blockquote><p> \nПример использования:\n</p> <blockquote class=\"example\"><pre>\nlimit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;\n</pre></blockquote><p> \n</p><p>\nВ данном случае состояния хранятся в зоне “one” размером 10 мегабайт,\nи средняя скорость обработки запросов для этой зоны не может превышать\n1 запроса в секунду.\n</p><p>\nВ качестве ключа используется IP-адрес клиента.\nОбратите внимание, что вместо переменной <code>$remote_addr</code> используется\nпеременная <code>$binary_remote_addr</code>.\nДлина значения переменной <code>$binary_remote_addr</code> всегда\nравна 4 байтам для IPv4-адресов или 16 байтам для IPv6-адресов.\nПри этом размер состояния всегда равен\n64 байтам на 32-битных платформах и 128 байтам на 64-битных платформах.\nВ зоне размером 1 мегабайт может разместиться около 16 тысяч состояний\nразмером 64 байта или около 8 тысяч состояний размером 128 байт.\n</p><p>\nПри переполнении зоны удаляется наименее востребованное состояние.\nЕсли и это не позволяет создать новое состояние, запрос завершается с\n<a href=\"#limit_req_status\">ошибкой</a>.\n</p><p>\nСкорость задаётся в запросах в секунду (r/s).\nЕсли же нужна скорость меньше одного запроса в секунду,\nто она задаётся в запросах в минуту (r/m), например,\nползапроса в секунду — это 30r/m.\n</p>"},{"directive":"limit_req_status","defaultValue":"limit_req_status 503;","syntax":"limit_req_status код;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.3.15.\n            </p></div><p>\nПозволяет переопределить код ответа, используемый при отклонении запросов.\n</p>"},{"directive":"limit_req_log_level","defaultValue":"limit_req_log_level error;","syntax":"limit_req_log_level info |notice |warn |error;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.18.\n            </p></div><p>\nЗадаёт желаемый уровень записи в лог\nслучаев отказа в обработке запросов при превышении скорости\nи случаев задержек при обработке запроса.\nЗадержки записываются в лог с уровнем на единицу меньшим, чем отказы,\nнапример, если указано “<code>limit_req_log_level notice</code>”,\nто задержки будут записываться в лог на уровне <code>info</code>.\n</p>"},{"directive":"limit_req","defaultValue":"—","syntax":"limit_req     zone=название    [burst=число]    [nodelay];","context":"http, server, location","description":"<p>\nЗадаёт зону разделяемой памяти (<code>zone</code>)\nи максимальный размер всплеска запросов (<code>burst</code>).\nЕсли скорость поступления запросов превышает описанную в зоне,\nто их обработка задерживается так, чтобы запросы обрабатывались\nс заданной скоростью.\nИзбыточные запросы задерживаются до тех пор, пока их число\nне превысит максимальный размер всплеска.\nПри превышении запрос завершается с\n<a href=\"#limit_req_status\">ошибкой</a>.\nПо умолчанию максимальный размер всплеска равен нулю.\nНапример, директивы\n</p> <blockquote class=\"example\"><pre>\nlimit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;\n\nserver {\n    location /search/ {\n        limit_req zone=one burst=5;\n    }\n</pre></blockquote><p> \nпозволяют в среднем не более 1 запроса в секунду\nсо всплесками не более 5 запросов.\n</p><p>\nЕсли же избыточные запросы в пределах лимита всплесков задерживать\nне требуется, то следует использовать параметр <code>nodelay</code>:\n</p> <blockquote class=\"example\"><pre>\nlimit_req zone=one burst=5 nodelay;\n</pre></blockquote><p> \n</p><p>\nДиректив <code>limit_req</code> может быть несколько.\nНапример, следующая конфигурация ограничивает скорость обработки запросов,\nпоступающих с одного IP-адреса, и в то же время ограничивает\nскорость обработки запросов одним виртуальным сервером:\n</p> <blockquote class=\"example\"><pre>\nlimit_req_zone $binary_remote_addr zone=perip:10m rate=1r/s;\nlimit_req_zone $server_name zone=perserver:10m rate=10r/s;\n\nserver {\n    ...\n    limit_req zone=perip burst=5 nodelay;\n    limit_req zone=perserver burst=10;\n}\n</pre></blockquote><p> \n\n</p><p>\nДирективы наследуются с предыдущего уровня при условии, что на данном уровне\nне описаны свои директивы <code>limit_req</code>.\n</p>"},{"directive":"limit_rate_after","defaultValue":"limit_rate_after 0;","syntax":"limit_rate_after размер;","context":"http, server, location, if в location","description":"<p>Эта директива появилась в версии 0.8.0.\n            </p></div><p>\nЗадаёт начальный объём данных, после передачи которого начинает\nограничиваться скорость передачи ответа клиенту.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nlocation /flv/ {\n    flv;\n    limit_rate_after 500k;\n    limit_rate       50k;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"limit_rate","defaultValue":"limit_rate 0;","syntax":"limit_rate скорость;","context":"http, server, location, if в location","description":"<p>\nОграничивает скорость передачи ответа клиенту.\n<code><i>Скорость</i></code> задаётся в байтах в секунду.\nЗначение 0 отключает ограничение скорости.\n\nОграничение устанавливается на запрос, поэтому, если клиент одновременно\nоткроет два соединения, суммарная скорость будет вдвое выше\nзаданного ограничения.\n</p><p>\nОграничение скорости можно также задать в переменной <code>$limit_rate</code>.\nЭто может быть полезно в случаях, когда скорость нужно ограничивать\nв зависимости от какого-либо условия:\n</p> <blockquote class=\"example\"><pre>\nserver {\n\n    if ($slow) {\n        set $limit_rate 4k;\n    }\n\n    ...\n}\n</pre></blockquote><p> \n</p><p>\nКроме того, ограничение скорости может быть задано в поле\n“X-Accel-Limit-Rate” заголовка ответа проксированного сервера.\nЭту возможность можно запретить с помощью директив\n<a href=\"ngx_http_proxy_module.html#proxy_ignore_headers\">proxy_ignore_headers</a>,\n<a href=\"ngx_http_fastcgi_module.html#fastcgi_ignore_headers\">fastcgi_ignore_headers</a>,\n<a href=\"ngx_http_uwsgi_module.html#uwsgi_ignore_headers\">uwsgi_ignore_headers</a>\nи\n<a href=\"ngx_http_scgi_module.html#scgi_ignore_headers\">scgi_ignore_headers</a>.\n</p>"},{"directive":"limit_except","defaultValue":"—","syntax":"limit_except метод ... { ... }","context":"location","description":"<p>\nОграничивает HTTP-методы, доступные внутри location.\nПараметр <code><i>метод</i></code> может быть одним из\n<code>GET</code>,\n<code>HEAD</code>,\n<code>POST</code>,\n<code>PUT</code>,\n<code>DELETE</code>,\n<code>MKCOL</code>,\n<code>COPY</code>,\n<code>MOVE</code>,\n<code>OPTIONS</code>,\n<code>PROPFIND</code>,\n<code>PROPPATCH</code>,\n<code>LOCK</code>,\n<code>UNLOCK</code>\nили\n<code>PATCH</code>.\nЕсли разрешён метод <code>GET</code>, то метод\n<code>HEAD</code> также будет разрешён.\nДоступ к остальным методам может быть ограничен при помощи директив модулей\n<a href=\"ngx_http_access_module.html\">ngx_http_access_module</a>\nи\n<a href=\"ngx_http_auth_basic_module.html\">ngx_http_auth_basic_module</a>:\n</p> <blockquote class=\"example\"><pre>\nlimit_except GET {\n    allow 192.168.1.0/32;\n    deny  all;\n}\n</pre></blockquote><p> \nОбратите внимание, что данное ограничение действует для всех методов,\n<strong>кроме</strong> GET и HEAD.\n</p>"},{"directive":"limit_conn_zone","defaultValue":"—","syntax":"limit_conn_zone     ключ    zone=название:размер;","context":"stream","description":"<p>\nЗадаёт параметры зоны разделяемой памяти, которая хранит состояние\nдля разных значений ключа.\nСостояние в частности содержит текущее число соединений.\nВ качестве <code><i>ключа</i></code> может использоваться текст, переменные\nи их комбинации (1.11.2).\nЗапросы с пустым значением ключа не учитываются.\nПример использования:\n</p> <blockquote class=\"example\"><pre>\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n</pre></blockquote><p> \nЗдесь в качестве ключа используется IP-адрес клиента,\nзадаваемый переменной <code>$binary_remote_addr</code>.\nДлина значения <code>$binary_remote_addr</code>\nравна 4 байтам для IPv4-адресов или 16 байтам для IPv6-адресов.\nПри этом размер состояния всегда равен 32 или 64 байтам\nна 32-битных платформах и 64 байтам на 64-битных.\nВ зоне размером 1 мегабайт может разместиться около 32 тысяч состояний\nразмером 32 байта или 16 тысяч состояний размером 64 байта.\nПри переполнении зоны сервер закроет соединение.\n</p>"},{"directive":"limit_conn_zone","defaultValue":"—","syntax":"limit_conn_zone     ключ    zone=название:размер;","context":"http","description":"<p>\nЗадаёт параметры зоны разделяемой памяти, которая хранит состояние\nдля разных значений ключа.\nСостояние в частности содержит текущее число соединений.\nВ качестве ключа можно использовать текст, переменные и их комбинации.\nЗапросы с пустым значением ключа не учитываются.\n</p> <blockquote class=\"note\">\nДо версии 1.7.6 в качестве ключа можно было задать ровно одну переменную.\n</blockquote><p> \nПример использования:\n</p> <blockquote class=\"example\"><pre>\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n</pre></blockquote><p> \nЗдесь в качестве ключа используется IP-адрес клиента.\nОбратите внимание, что вместо переменной <code>$remote_addr</code>\nиспользована переменная <code>$binary_remote_addr</code>.\nДлина значения переменной <code>$remote_addr</code> может колебаться\nот 7 до 15 байт, при этом размер хранимого состояния составляет\nлибо 32, либо 64 байта на 32-битных платформах и всегда 64\nбайта на 64-битных.\nДлина значения переменной <code>$binary_remote_addr</code> всегда\nравна 4 байтам для IPv4-адресов или 16 байтам для IPv6-адресов.\nПри этом размер состояния всегда равен 32 или 64 байтам\nна 32-битных платформах и 64 байтам на 64-битных.\nВ зоне размером 1 мегабайт может разместиться около 32 тысяч состояний\nразмером 32 байта или 16 тысяч состояний размером 64 байта.\nПри переполнении зоны в ответ на последующие запросы сервер будет\nвозвращать\n<a href=\"#limit_conn_status\">ошибку</a>.\n</p>"},{"directive":"limit_conn_status","defaultValue":"limit_conn_status 503;","syntax":"limit_conn_status код;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.3.15.\n            </p></div><p>\nПозволяет переопределить код ответа, используемый при отклонении запросов.\n</p>"},{"directive":"limit_conn_log_level","defaultValue":"limit_conn_log_level error;","syntax":"limit_conn_log_level info |notice |warn |error;","context":"stream, server","description":"<p>\nЗадаёт желаемый уровень записи в лог случаев ограничения\nчисла соединений.\n</p>"},{"directive":"limit_conn_log_level","defaultValue":"limit_conn_log_level error;","syntax":"limit_conn_log_level info |notice |warn |error;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.18.\n            </p></div><p>\nЗадаёт желаемый уровень записи в лог случаев ограничения\nчисла соединений.\n</p>"},{"directive":"limit_conn","defaultValue":"—","syntax":"limit_conn зона число;","context":"stream, server","description":"<p>\nЗадаёт зону разделяемой памяти и максимально допустимое число соединений\nдля одного значения ключа.\nПри превышении этого числа сервер закроет соединение.\nНапример, директивы\n</p> <blockquote class=\"example\"><pre>\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\n    ...\n    limit_conn addr 1;\n}\n</pre></blockquote><p> \nразрешают одновременно обрабатывать не более одного соединения с одного\nIP-адреса.\n</p><p>\nДопустимо одновременное указание нескольких директив\n<code>limit_conn</code>,\nпри этом будет срабатывать любое из ограничений.\n</p><p>\nДирективы наследуются с предыдущего уровня при условии, что на данном уровне\nне описаны свои директивы <code>limit_conn</code>.\n</p>"},{"directive":"limit_conn","defaultValue":"—","syntax":"limit_conn зона число;","context":"http, server, location","description":"<p>\nЗадаёт зону разделяемой памяти и максимально допустимое число соединений\nдля одного значения ключа.\nПри превышении этого числа в ответ на запрос сервер вернёт\n<a href=\"#limit_conn_status\">ошибку</a>.\nНапример, директивы\n</p> <blockquote class=\"example\"><pre>\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\n    location /download/ {\n        limit_conn addr 1;\n    }\n</pre></blockquote><p> \nразрешают одновременно обрабатывать не более одного соединения с одного\nIP-адреса.\n</p> <blockquote class=\"note\">\nВ HTTP/2 и SPDY каждый параллельный запрос считается отдельным соединением.\n</blockquote><p> \n</p><p>\nДиректив <code>limit_conn</code> может быть несколько.\nНапример, следующая конфигурация ограничивает число соединений с сервером\nс одного клиентского IP-адреса и в то же время ограничивает общее число\nсоединений с виртуальным сервером:\n</p> <blockquote class=\"example\"><pre>\nlimit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\nserver {\n    ...\n    limit_conn perip 10;\n    limit_conn perserver 100;\n}\n</pre></blockquote><p> \n\n</p><p>\nДирективы наследуются с предыдущего уровня при условии, что на данном уровне\nне описаны свои директивы <code>limit_conn</code>.\n</p>"},{"directive":"least_time","defaultValue":"—","syntax":"least_time     connect |    first_byte |    last_byte    [inflight];","context":"upstream","description":"<p>\nЗадаёт для группы метод балансировки нагрузки, при котором соединение\nпередаётся серверу с наименьшими средним временем ответа и\nчислом активных соединений с учётом весов серверов.\nЕсли подходит сразу несколько серверов, то они выбираются циклически\n(в режиме round-robin) с учётом их весов.\n</p><p>\nЕсли указан параметр <code>connect</code>,\nто учитывается время соединения с сервером группы.\nЕсли указан параметр <code>first_byte</code>,\nто учитывается время получения первого байта данных.\nЕсли указан параметр <code>last_byte</code>,\nто учитывается время получения ответа.\nЕсли указан параметр <code>inflight</code> (1.11.6),\nто также учитываются незавершённые соединения.\n</p> <blockquote class=\"note\">\nДо версии 1.11.6\nнезавершённые соединения учитывались по умолчанию.\n</blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЭта директива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"least_time","defaultValue":"—","syntax":"least_time     header |    last_byte    [inflight];","context":"upstream","description":"<p>Эта директива появилась в версии 1.7.10.\n            </p></div><p>\nЗадаёт для группы метод балансировки нагрузки, при котором запрос\nпередаётся серверу с наименьшими средним временем ответа и\nчислом активных соединений с учётом весов серверов.\nЕсли подходит сразу несколько серверов, то они выбираются циклически\n(в режиме round-robin) с учётом их весов.\n</p><p>\nЕсли указан параметр <code>header</code>,\nто учитывается время получения\n<a href=\"#var_upstream_header_time\">заголовка ответа</a>.\nЕсли указан параметр <code>last_byte</code>, то учитывается\nвремя получения <a href=\"#var_upstream_response_time\">всего ответа</a>.\nЕсли указан параметр <code>inflight</code> (1.11.6),\nто также учитываются незавершённые запросы.\n</p> <blockquote class=\"note\">\nДо версии 1.11.6 незавершённые запросы учитывались по умолчанию.\n</blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЭта директива доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"least_conn","defaultValue":"—","syntax":"least_conn;","context":"upstream","description":"<p>\nЗадаёт для группы метод балансировки нагрузки, при котором соединение\nпередаётся серверу с наименьшим числом активных соединений,\nс учётом весов серверов.\nЕсли подходит сразу несколько серверов, они выбираются циклически\n(в режиме round-robin) с учётом их весов.\n</p>"},{"directive":"least_conn","defaultValue":"—","syntax":"least_conn;","context":"upstream","description":"<p>\n                    Эта директива появилась в версиях 1.3.1 и 1.2.2.\n                    \n                        </p>\n                    </div><p>\nЗадаёт для группы метод балансировки нагрузки, при котором запрос\nпередаётся серверу с наименьшим числом активных соединений,\nс учётом весов серверов.\nЕсли подходит сразу несколько серверов, они выбираются циклически\n(в режиме round-robin) с учётом их весов.\n</p>"},{"directive":"large_client_header_buffers","defaultValue":"large_client_header_buffers 4 8k;","syntax":"large_client_header_buffers число размер;","context":"http, server","description":"<p>\nЗадаёт максимальное <code><i>число</i></code> и <code><i>размер</i></code>\nбуферов для чтения большого заголовка запроса клиента.\nСтрока запроса не должна превышать размера одного буфера, иначе клиенту\nвозвращается ошибка\n414 (Request-URI Too Large).\nПоле заголовка запроса также не должно превышать размера одного буфера,\nиначе клиенту возвращается ошибка\n400 (Bad Request).\nБуферы выделяются только по мере необходимости.\nПо умолчанию размер одного буфера равен 8K байт.\nЕсли по окончании обработки запроса соединение переходит в состояние\nkeep-alive, эти буферы освобождаются.\n</p>"},{"directive":"keepalive_timeout","defaultValue":"keepalive_timeout 75s;","syntax":"keepalive_timeout     таймаут    [заголовок_таймаута];","context":"http, server, location","description":"<p>\nПервый параметр задаёт таймаут, в течение которого keep-alive\nсоединение с клиентом не будет закрыто со стороны сервера.\nЗначение 0 запрещает keep-alive соединения с клиентами.\nВторой необязательный параметр задаёт значение в поле\n“Keep-Alive: timeout=<code><i>время</i></code>”\nзаголовка ответа.\nДва параметра могут отличаться друг от друга.\n</p><p>\nПоле\n“Keep-Alive: timeout=<code><i>время</i></code>”\nзаголовка понимают Mozilla и Konqueror.\nMSIE сам закрывает keep-alive соединение примерно через 60 секунд.\n</p>"},{"directive":"keepalive_requests","defaultValue":"keepalive_requests 100;","syntax":"keepalive_requests число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.0.\n            </p></div><p>\nЗадаёт максимальное число запросов, которые можно\nсделать по одному keep-alive соединению.\nПосле того, как сделано максимальное число запросов,\nсоединение закрывается.\n</p>"},{"directive":"keepalive_disable","defaultValue":"keepalive_disable msie6;","syntax":"keepalive_disable none | браузер ...;","context":"http, server, location","description":"<p>\nЗапрещает keep-alive соединения с некорректно ведущими себя браузерами.\nПараметры <code><i>браузер</i></code> указывают, на какие браузеры это\nраспространяется.\nЗначение <code>msie6</code> запрещает keep-alive соединения\nсо старыми версиями MSIE после получения запроса POST.\nЗначение <code>safari</code> запрещает keep-alive соединения\nс Safari и подобными им браузерами на macOS и подобных ей ОС.\nЗначение <code>none</code> разрешает keep-alive соединения\nсо всеми браузерами.\n</p> <blockquote class=\"note\">\nДо версии 1.1.18 под значение <code>safari</code> подпадали\nвсе Safari и подобные им браузеры на всех ОС, и keep-alive\nсоединения с ними были по умолчанию запрещены.\n</blockquote><p> \n</p>"},{"directive":"keepalive","defaultValue":"—","syntax":"keepalive соединения;","context":"upstream","description":"<p>Эта директива появилась в версии 1.1.4.\n            </p></div><p>\nЗадействует кэш соединений для группы серверов.\n</p><p>\nПараметр <code><i>соединения</i></code> устанавливает максимальное число\nнеактивных постоянных соединений с серверами группы, которые будут\nсохраняться в кэше каждого рабочего процесса.\nПри превышении этого числа наиболее давно не используемые соединения\nзакрываются.\n</p> <blockquote class=\"note\">\nСледует особо отметить, что директива <code>keepalive</code>\nне ограничивает общее число соединений с серверами группы, которые\nрабочие процессы nginx могут открыть.\nПараметр <code><i>соединения</i></code> следует устанавливать достаточно\nконсервативно, чтобы серверы группы по-прежнему могли обрабатывать\nновые входящие соединения.\n</blockquote><p> \n</p><p>\nПример конфигурации группы серверов memcached с постоянными соединениями:\n</p> <blockquote class=\"example\"><pre>\nupstream memcached_backend {\n    server 127.0.0.1:11211;\n    server 10.0.0.2:11211;\n\n    keepalive 32;\n}\n\nserver {\n    ...\n\n    location /memcached/ {\n        set $memcached_key $uri;\n        memcached_pass memcached_backend;\n    }\n\n}\n</pre></blockquote><p> \n</p><p>\nДля HTTP директиву\n<a href=\"ngx_http_proxy_module.html#proxy_http_version\">proxy_http_version</a>\nследует установить в “<code>1.1</code>”,\nа поле заголовка “Connection” — очистить:\n</p> <blockquote class=\"example\"><pre>\nupstream http_backend {\n    server 127.0.0.1:8080;\n\n    keepalive 16;\n}\n\nserver {\n    ...\n\n    location /http/ {\n        proxy_pass http://http_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Connection \"\";\n        ...\n    }\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nХоть это и не рекомендуется, но также возможно использование постоянных\nсоединений с HTTP/1.0, путём передачи поля заголовка\n“Connection: Keep-Alive” серверу группы.\n</blockquote><p> \n</p><p>\nДля работы постоянных соединений с FastCGI-серверами потребуется\nвключить директиву\n<a href=\"ngx_http_fastcgi_module.html#fastcgi_keep_conn\">fastcgi_keep_conn</a>:\n</p> <blockquote class=\"example\"><pre>\nupstream fastcgi_backend {\n    server 127.0.0.1:9000;\n\n    keepalive 8;\n}\n\nserver {\n    ...\n\n    location /fastcgi/ {\n        fastcgi_pass fastcgi_backend;\n        fastcgi_keep_conn on;\n        ...\n    }\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nПри использовании методов балансировки нагрузки, отличных\nот стандартного round-robin, следует активировать их до\nдирективы <code>keepalive</code>.\n</blockquote><p> \n\n</p> <blockquote class=\"note\">\nПротоколы SCGI и uwsgi не определяют семантику постоянных соединений.\n</blockquote><p> \n</p>"},{"directive":"js_set","defaultValue":"—","syntax":"js_set $переменная функция;","context":"stream","description":"<p>\nЗадаёт функцию nginScript для указанной переменной.\n</p>"},{"directive":"js_set","defaultValue":"—","syntax":"js_set $переменная функция;","context":"http","description":"<p>\nЗадаёт функцию nginScript для указанной переменной.\n</p>"},{"directive":"js_preread","defaultValue":"—","syntax":"js_preread функция;","context":"stream, server","description":"<p>\nЗадаёт функцию nginScript, которая будет вызываться в\n<a href=\"stream_processing.html#preread_phase\">preread</a>-фазе.\n</p>"},{"directive":"js_include","defaultValue":"—","syntax":"js_include файл;","context":"stream","description":"<p>\nЗадаёт файл, который позволяет\nзадавать обработчики server и переменных на nginScript.\n</p>"},{"directive":"js_include","defaultValue":"—","syntax":"js_include файл;","context":"http","description":"<p>\nЗадаёт файл, позволяющий задавать обработчики location и переменных\nна nginScript.\n</p>"},{"directive":"js_filter","defaultValue":"—","syntax":"js_filter функция;","context":"stream, server","description":"<p>\nЗадаёт фильтр данных.\n</p>"},{"directive":"js_content","defaultValue":"—","syntax":"js_content функция;","context":"location, limit_except","description":"<p>\nЗадаёт функцию nginScript в качестве обработчика содержимого location.\n</p>"},{"directive":"js_access","defaultValue":"—","syntax":"js_access функция;","context":"stream, server","description":"<p>\nЗадаёт функцию nginScript, которая будет вызываться в\n<a href=\"stream_processing.html#access_phase\">access</a>-фазе.\n</p>"},{"directive":"ip_hash","defaultValue":"—","syntax":"ip_hash;","context":"upstream","description":"<p>\nЗадаёт для группы метод балансировки нагрузки, при котором запросы\nраспределяются по серверам на основе IP-адресов клиентов.\nВ качестве ключа для хэширования используются первые три\nоктета IPv4-адреса клиента или IPv6-адрес клиента целиком.\nМетод гарантирует, что запросы одного и того же клиента\nбудут всегда передаваться на один и тот же сервер.\nЕсли же этот сервер будет считаться недоступным,\nто запросы этого клиента будут передаваться на другой сервер.\nС большой долей вероятности это также будет один и тот же сервер.\n</p> <blockquote class=\"note\">\nIPv6-адреса поддерживаются начиная с версий 1.3.2 и 1.2.2.\n</blockquote><p> \n</p><p>\nЕсли один из серверов нужно убрать на некоторое время, то для сохранения\nтекущего хэширования IP-адресов клиентов этот сервер нужно пометить\nпараметром <code>down</code>.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nupstream backend {\n    ip_hash;\n\n    server backend1.example.com;\n    server backend2.example.com;\n    server backend3.example.com <strong>down</strong>;\n    server backend4.example.com;\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nДо версий 1.3.1 и 1.2.2 для серверов, использующих метод балансировки нагрузки\n<code>ip_hash</code>, нельзя было задать вес.\n</blockquote><p> \n</p>"},{"directive":"internal","defaultValue":"—","syntax":"internal;","context":"location","description":"<p>\nУказывает, что location может использоваться только для внутренних запросов.\nДля внешних запросов клиенту будет возвращаться ошибка\n404 (Not Found).\nВнутренними запросами являются:\n\n</p> <ul class=\"compact\">\n\n<li>\nзапросы, перенаправленные директивами\n<a href=\"#error_page\">error_page</a>,\n<a href=\"ngx_http_index_module.html#index\">index</a>,\n<a href=\"ngx_http_random_index_module.html#random_index\">random_index</a> и\n<a href=\"#try_files\">try_files</a>;\n</li>\n\n<li>\nзапросы, перенаправленные с помощью поля\n“X-Accel-Redirect” заголовка ответа вышестоящего сервера;\n</li>\n\n<li>\nподзапросы, формируемые командой\n“<code>include virtual</code>”\nмодуля\n<a href=\"ngx_http_ssi_module.html\">ngx_http_ssi_module</a>,\nдирективами модуля\n<a href=\"ngx_http_addition_module.html\">ngx_http_addition_module</a>,\nа также директивами\n<a href=\"ngx_http_auth_request_module.html#auth_request\">auth_request</a> и\n<a href=\"ngx_http_mirror_module.html#mirror\">mirror</a>;\n\n</li>\n\n<li>\nзапросы, изменённые директивой\n<a href=\"ngx_http_rewrite_module.html#rewrite\">rewrite</a>.\n</li>\n\n</ul><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nerror_page 404 /404.html;\n\nlocation /404.html {\n    internal;\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nДля предотвращения зацикливания, которое может возникнуть при\nиспользовании некорректных конфигураций, количество внутренних\nперенаправлений ограничено десятью.\nПо достижении этого ограничения будет возвращена ошибка\n500 (Internal Server Error).\nВ таком случае в лог-файле ошибок можно увидеть сообщение\n“rewrite or internal redirection cycle”.\n</blockquote><p> \n</p>"},{"directive":"index","defaultValue":"index index.html;","syntax":"index файл ...;","context":"http, server, location","description":"<p>\nОпределяет файлы, которые будут использоваться в качестве индекса.\nВ имени файла можно использовать переменные.\nНаличие файлов проверяется в порядке их перечисления.\nВ конце списка может стоять файл с абсолютным путём.\nПример:\n</p> <blockquote class=\"example\"><pre>\nindex index.$geo.html index.0.html /index.html;\n</pre></blockquote><p> \n</p><p>\nНеобходимо иметь в виду, что при использовании индексного файла делается\nвнутреннее перенаправление и запрос может быть обработан уже в другом\nlocation’е.\nНапример, в такой конфигурации:\n</p> <blockquote class=\"example\"><pre>\nlocation = / {\n    index index.html;\n}\n\nlocation / {\n    ...\n}\n</pre></blockquote><p> \nзапрос “<code>/</code>” будет фактически обработан во\nвтором location’е как “<code>/index.html</code>”.\n</p>"},{"directive":"include","defaultValue":"—","syntax":"include файл | маска;","context":"любой","description":"<p>\nВключает в конфигурацию другой <code><i>файл</i></code> или файлы,\nподходящие под заданную маску.\nВключаемые файлы должны содержать синтаксически верные директивы и блоки.\n</p><p>\nПример использования:\n</p> <blockquote class=\"example\"><pre>\ninclude mime.types;\ninclude vhosts/*.conf;\n</pre></blockquote><p> \n</p>"},{"directive":"imap_client_buffer","defaultValue":"imap_client_buffer 4k|8k;","syntax":"imap_client_buffer размер;","context":"mail, server","description":"<p>\nЗадаёт размер буфера для чтения IMAP-команд.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p>"},{"directive":"imap_capabilities","defaultValue":"imap_capabilities IMAP4 IMAP4rev1 UIDPLUS;","syntax":"imap_capabilities расширение ...;","context":"mail, server","description":"<p>\nПозволяет указать список расширений\n<a href=\"https://tools.ietf.org/html/rfc3501\">протокола IMAP</a>,\nвыдаваемый клиенту по команде\n<code>CAPABILITY</code>.\nВ зависимости от значения директивы\n<a href=\"ngx_mail_ssl_module.html#starttls\">starttls</a>\nк этому списку автоматически добавляются\nметоды аутентификации, указанные в директиве <a href=\"#imap_auth\">imap_auth</a>, и\n<a href=\"https://tools.ietf.org/html/rfc2595\">STARTTLS</a>.\n</p><p>\nВ данной директиве имеет смысл указать расширения,\nподдерживаемые IMAP-бэкендами,\nна которые проксируются клиенты (если эти расширения относятся к командам,\nиспользуемым после аутентификации, когда nginx прозрачно проксирует подключение\nклиента на бэкенд).\n</p><p>\nТекущий список стандартизованных расширений опубликован на\n<a href=\"http://www.iana.org/assignments/imap4-capabilities\">www.iana.org</a>.\n</p>"},{"directive":"imap_auth","defaultValue":"imap_auth plain;","syntax":"imap_auth метод ...;","context":"mail, server","description":"<p>\nЗадаёт разрешённые методы аутентификации IMAP-клиентов.\nПоддерживаемые методы:\n</p> <dl class=\"compact\">\n\n<dt><code>login</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/draft-murchison-sasl-login-00\">AUTH=LOGIN</a>\n</dd>\n\n<dt><code>plain</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc4616\">AUTH=PLAIN</a>\n</dd>\n\n<dt><code>cram-md5</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc2195\">AUTH=CRAM-MD5</a>.\nДля работы этого метода пароль должен храниться в незашифрованном виде.\n</dd>\n\n<dt><code>external</code></dt>\n<dd>\n<a href=\"https://tools.ietf.org/html/rfc4422\">AUTH=EXTERNAL</a> (1.11.6).\n</dd>\n\n</dl><p> \n</p>"},{"directive":"image_filter_webp_quality","defaultValue":"image_filter_webp_quality 80;","syntax":"image_filter_webp_quality качество;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.6.\n            </p></div><p>\nЗадаёт желаемое <code><i>качество</i></code> преобразованного изображения\nв формате WebP.\nДопустимые значения находятся в диапазоне от 1 до 100.\nМеньшим значениям обычно соответствует худшее качество изображения\nи меньший объём передаваемых данных.\nВ значении параметра допустимо использование переменных.\n</p>"},{"directive":"image_filter_transparency","defaultValue":"image_filter_transparency on;","syntax":"image_filter_transparency on|off;","context":"http, server, location","description":"<p>\nОпределяет, сохранять ли прозрачность при обработке изображений\nв формате GIF и в формате PNG с цветами, заданными палитрой.\nПотеря прозрачности позволяет получить более качественное изображение.\nПрозрачность альфа-канала в формате PNG сохраняется всегда.\n</p>"},{"directive":"image_filter_sharpen","defaultValue":"image_filter_sharpen 0;","syntax":"image_filter_sharpen процент;","context":"http, server, location","description":"<p>\nПовышает резкость итогового изображения.\nПроцент резкости может быть больше 100.\nЗначение 0 отключает повышение резкости.\nВ значении параметра допустимо использование переменных.\n</p>"},{"directive":"image_filter_jpeg_quality","defaultValue":"image_filter_jpeg_quality 75;","syntax":"image_filter_jpeg_quality качество;","context":"http, server, location","description":"<p>\nЗадаёт желаемое <code><i>качество</i></code> преобразованного изображения\nв формате JPEG.\nДопустимые значения находятся в диапазоне от 1 до 100.\nМеньшим значениям обычно соответствует худшее качество изображения\nи меньший объём передаваемых данных.\nМаксимальное рекомендуемое значение — 95.\nВ значении параметра допустимо использование переменных.\n</p>"},{"directive":"image_filter_interlace","defaultValue":"image_filter_interlace off;","syntax":"image_filter_interlace on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.3.15.\n            </p></div><p>\nЕсли включено, то итоговые изображения будут с чересстрочностью.\nВ случае JPEG итоговые изображения будут в формате “progressive JPEG”.\n</p>"},{"directive":"image_filter_buffer","defaultValue":"image_filter_buffer 1M;","syntax":"image_filter_buffer размер;","context":"http, server, location","description":"<p>\nЗадаёт максимальный размер буфера для чтения изображения.\nПри превышении размера сервер вернёт ошибку\n415 (Unsupported Media Type).\n</p>"},{"directive":"image_filter","defaultValue":"image_filter off;","syntax":"image_filter off;image_filter test;image_filter size;image_filter     rotate    90 | 180 |    270;image_filter     resize    ширина    высота;image_filter     crop    ширина    высота;","context":"location","description":"<p>\nЗадаёт тип преобразования изображения:\n</p> <dl class=\"compact\">\n\n<dt><code>off</code></dt>\n<dd>\nотключает обработку данным модулем во вложенном location.\n</dd>\n\n<dt><code>test</code></dt>\n<dd>\nпроверяет, что ответ действительно является изображением\nв формате JPEG, GIF, PNG или WebP.\nВ противном случае возвращается ошибка\n415 (Unsupported Media Type).\n</dd>\n\n<dt><code>size</code></dt>\n<dd>\nвыдаёт информацию об изображении в формате JSON, например:\n<blockquote class=\"example\"><pre>\n{ \"img\" : { \"width\": 100, \"height\": 100, \"type\": \"gif\" } }\n</pre></blockquote>\nВ случае ошибки выдаётся\n<blockquote class=\"example\"><pre>\n{}\n</pre></blockquote>\n</dd>\n\n<dt><code>rotate</code>\n<code>90</code>|<code>180</code>|<code>270</code>\n</dt>\n<dd>\nповорачивает изображение против часовой стрелки на указанное число градусов.\nВ значении параметра допустимо использование переменных.\nМожно использовать как отдельно, так и совместно с преобразованиями\n<code>resize</code> и <code>crop</code>.\n</dd>\n\n<dt><code>resize</code>\n<code><i>ширина</i></code>\n<code><i>высота</i></code>\n</dt>\n<dd>\nпропорционально уменьшает изображение до указанных размеров.\nЕсли требуется уменьшить только по одному измерению, то в качестве второго\nможно указать “<code>-</code>”.\nВ случае ошибки сервер возвращает код\n415 (Unsupported Media Type).\nВ значениях параметров допустимо использование переменных.\nПри использовании совместно с <code>rotate</code>,\nповорот изображения происходит <strong>после</strong>\nуменьшения размеров изображения.\n</dd>\n\n<dt><code>crop</code>\n<code><i>ширина</i></code>\n<code><i>высота</i></code>\n</dt>\n<dd>\nпропорционально уменьшает изображение до размера большей стороны\nи обрезает лишние края по другой стороне.\nЕсли требуется уменьшить только по одному измерению, то в качестве второго\nможно указать “<code>-</code>”.\nВ случае ошибки сервер возвращает код\n415 (Unsupported Media Type).\nВ значениях параметров допустимо использование переменных.\nПри использовании совместно с <code>rotate</code>,\nповорот изображения происходит <strong>до</strong>\nуменьшения размеров изображения.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"ignore_invalid_headers","defaultValue":"ignore_invalid_headers on;","syntax":"ignore_invalid_headers on | off;","context":"http, server","description":"<p>\nЕсли включено, nginx игнорирует поля заголовка с недопустимыми именами.\nДопустимыми считаются имена, состоящие из английских букв, цифр, дефисов\nи возможно знаков подчёркивания (последнее контролируется директивой\n<a href=\"#underscores_in_headers\">underscores_in_headers</a>).\n</p><p>\nЕсли директива указана на уровне <a href=\"#server\">server</a>,\nеё значение используется только в том случае,\nесли сервер является сервером по умолчанию.\nУказанное значение распространяется на все виртуальные серверы,\nслушающие на том же адресе и порту.\n</p>"},{"directive":"if_modified_since","defaultValue":"if_modified_since exact;","syntax":"if_modified_since     off |    exact |    before;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.7.24.\n            </p></div><p>\nОпределяет, как сравнивать время модификации ответа с\nвременем в поле\n“If-Modified-Since”\nзаголовка запроса:\n\n</p> <dl class=\"compact\">\n\n<dt><code>off</code></dt>\n<dd>\nне проверять поле\n“If-Modified-Since” заголовка запроса (0.7.34);\n</dd>\n\n<dt><code>exact</code></dt>\n<dd>\nточное совпадение;\n</dd>\n\n<dt><code>before</code></dt>\n<dd>\nвремя модификации ответа меньше или равно времени, заданному в поле\n“If-Modified-Since” заголовка запроса.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"if","defaultValue":"—","syntax":"if (условие) { ... }","context":"server, location","description":"<p>\nПроверяется указанное <code><i>условие</i></code>.\nЕсли оно истинно, то выполняются указанные в фигурных скобках директивы\nэтого модуля и запросу назначается конфигурация, указанная внутри\nдирективы <code>if</code>.\nКонфигурации внутри директив <code>if</code> наследуются с\nпредыдущего уровня конфигурации.\n</p><p>\nВ качестве условия могут быть заданы:\n</p> <ul class=\"compact\">\n\n<li>\nимя переменной; ложными значениями переменной являются пустая строка\nили “<code>0</code>”;\n<blockquote class=\"note\">\nДо версии 1.0.1 ложным значением также являлась любая строка,\nначинающаяся на “<code>0</code>”.\n</blockquote>\n</li>\n\n<li>\nсравнение переменной со строкой с помощью операторов\n“<code>=</code>” и “<code>!=</code>”;\n</li>\n\n<li>\nсоответствие переменной регулярному выражению с учётом\nрегистра символов — “<code>~</code>” и без него — “<code>~*</code>”.\nВ регулярных выражениях можно использовать выделения, которые затем\nдоступны в виде переменных <code>$1</code>..<code>$9</code>.\nТакже можно использовать отрицательные операторы “<code>!~</code>”\nи “<code>!~*</code>”.\nЕсли в регулярном выражении встречаются символы “<code>}</code>”\nили “<code>;</code>”, то всё выражение следует заключить в одинарные\nили двойные кавычки.\n</li>\n\n<li>\nпроверка существования файла с помощью операторов “<code>-f</code>”\nи “<code>!-f</code>”;\n</li>\n\n<li>\nпроверка существования каталога с помощью операторов “<code>-d</code>”\nи “<code>!-d</code>”;\n</li>\n\n<li>\nпроверка существования файла, каталога или символической ссылки\nс помощью операторов “<code>-e</code>” и “<code>!-e</code>”;\n</li>\n\n<li>\nпроверка исполняемости файла с помощью операторов “<code>-x</code>”\nи “<code>!-x</code>”.\n</li>\n\n</ul><p> \n</p><p>\nПримеры:\n</p> <blockquote class=\"example\"><pre>\nif ($http_user_agent ~ MSIE) {\n    rewrite ^(.*)$ /msie/$1 break;\n}\n\nif ($http_cookie ~* \"id=([^;]+)(?:;|$)\") {\n    set $id $1;\n}\n\nif ($request_method = POST) {\n    return 405;\n}\n\nif ($slow) {\n    limit_rate 10k;\n}\n\nif ($invalid_referer) {\n    return 403;\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nЗначение встроенной переменной <code>$invalid_referer</code> задаётся директивой\n<a href=\"ngx_http_referer_module.html#valid_referers\">valid_referers</a>.\n</blockquote><p> \n</p>"},{"directive":"http2_recv_timeout","defaultValue":"http2_recv_timeout 30s;","syntax":"http2_recv_timeout время;","context":"http, server","description":"<p>\nЗадаёт таймаут в случае, когда от клиента ожидаются ещё данные,\nпосле которого соединение закрывается.\n</p>"},{"directive":"http2_recv_buffer_size","defaultValue":"http2_recv_buffer_size 256k;","syntax":"http2_recv_buffer_size размер;","context":"http","description":"<p>\nЗадаёт размер входного буфера для\n<a href=\"../ngx_core_module.html#worker_processes\">рабочего\nпроцесса</a>.\n</p>"},{"directive":"http2_max_requests","defaultValue":"http2_max_requests 1000;","syntax":"http2_max_requests число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.6.\n            </p></div><p>\nЗадаёт максимальное число запросов, которые можно\nсделать по одному соединению HTTP/2,\nпосле чего соединение закрывается\nи клиенту необходимо использовать новое соединение.\n</p>"},{"directive":"http2_max_header_size","defaultValue":"http2_max_header_size 16k;","syntax":"http2_max_header_size размер;","context":"http, server","description":"<p>\nОграничивает максимальный размер всего списка заголовков запроса после\nраспаковки <a href=\"https://tools.ietf.org/html/rfc7541\">HPACK</a>.\nОграничение по умолчанию подходит для большинства запросов.\n</p>"},{"directive":"http2_max_field_size","defaultValue":"http2_max_field_size 4k;","syntax":"http2_max_field_size размер;","context":"http, server","description":"<p>\nОграничивает максимальный размер\nзаголовка запроса, сжатого при помощи\n<a href=\"https://tools.ietf.org/html/rfc7541\">HPACK</a>.\nОграничение применяется в равной степени как к имени, так и к значению.\nЕсли применяется кодирование Хаффмана,\nто фактический размер распакованных строк имени и значения может быть больше.\nОграничение по умолчанию подходит для большинства запросов.\n</p>"},{"directive":"http2_max_concurrent_streams","defaultValue":"http2_max_concurrent_streams 128;","syntax":"http2_max_concurrent_streams число;","context":"http, server","description":"<p>\nЗадаёт максимальное число параллельных HTTP/2-потоков\nв соединении.\n</p>"},{"directive":"http2_idle_timeout","defaultValue":"http2_idle_timeout 3m;","syntax":"http2_idle_timeout время;","context":"http, server","description":"<p>\nЗадаёт таймаут неактивности, после которого соединение закрывается.\n</p>"},{"directive":"http2_chunk_size","defaultValue":"http2_chunk_size 8k;","syntax":"http2_chunk_size размер;","context":"http, server, location","description":"<p>\nЗадаёт максимальный размер частей,\nна которое будет разделяться тело ответа.\nСлишком маленькое значение может привести к росту накладных расходов.\nСлишком большое значение может негативно сказаться на приоритизации из-за\n<a href=\"http://en.wikipedia.org/wiki/Head-of-line_blocking\">\nблокировки очереди</a>.\n</p>"},{"directive":"http2_body_preread_size","defaultValue":"","syntax":"","context":"","description":null},{"directive":"http","defaultValue":"—","syntax":"http { ... }","context":"main","description":"<p>\nПредоставляет контекст конфигурационного файла, в котором указываются\nдирективы HTTP-сервера.\n</p>"},{"directive":"hls_mp4_max_buffer_size","defaultValue":"hls_mp4_max_buffer_size 10m;","syntax":"hls_mp4_max_buffer_size размер;","context":"http, server, location","description":"<p>\nВ ходе обработки метаданных может понадобиться буфер большего размера.\nЕго <code><i>размер</i></code> не может превышать указанного,\nиначе nginx вернёт серверную ошибку\n500 (Internal Server Error)\nи запишет в лог следующее сообщение:\n</p> <blockquote class=\"example\"><pre>\n\"/some/movie/file.mp4\" mp4 moov atom is too large:\n12583268, you may want to increase hls_mp4_max_buffer_size\n</pre></blockquote><p> \n</p>"},{"directive":"hls_mp4_buffer_size","defaultValue":"hls_mp4_buffer_size 512k;","syntax":"hls_mp4_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт начальный <code><i>размер</i></code> буфера, используемого для\nобработки MP4- и MOV-файлов.\n</p>"},{"directive":"hls_fragment","defaultValue":"hls_fragment 5s;","syntax":"hls_fragment время;","context":"http, server, location","description":"<p>\nЗадаёт длину фрагмента по умолчанию для всех URI в плейлисте,\nзапрошенных без аргумента “<code>len</code>”.\n</p>"},{"directive":"hls_forward_args","defaultValue":"hls_forward_args off;","syntax":"hls_forward_args on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.12.\n            </p></div><p>\nДобавляет аргументы из запроса плейлиста в URI фрагментов.\nЭто может быть необходимо для авторизации клиента\nво время запроса фрагментов, а также для защиты HLS-потока с помощью\nмодуля\n<a href=\"ngx_http_secure_link_module.html\">ngx_http_secure_link_module</a>.\n</p><p>\nНапример, если клиент запрашивает плейлист\n<code>http://example.com/hls/test.mp4.m3u8?a=1&amp;b=2</code>,\nто аргументы <code>a=1</code> и <code>b=2</code>\nбудут добавлены в URI фрагментов после аргументов\n<code>start</code> и <code>end</code>:\n</p> <blockquote class=\"example\"><pre>\n#EXTM3U\n#EXT-X-VERSION:3\n#EXT-X-TARGETDURATION:15\n#EXT-X-PLAYLIST-TYPE:VOD\n\n#EXTINF:9.333,\ntest.mp4.ts?start=0.000&amp;end=9.333&amp;a=1&amp;b=2\n#EXTINF:7.167,\ntest.mp4.ts?start=9.333&amp;end=16.500&amp;a=1&amp;b=2\n#EXTINF:5.416,\ntest.mp4.ts?start=16.500&amp;end=21.916&amp;a=1&amp;b=2\n#EXTINF:5.500,\ntest.mp4.ts?start=21.916&amp;end=27.416&amp;a=1&amp;b=2\n#EXTINF:15.167,\ntest.mp4.ts?start=27.416&amp;end=42.583&amp;a=1&amp;b=2\n#EXTINF:9.626,\ntest.mp4.ts?start=42.583&amp;end=52.209&amp;a=1&amp;b=2\n\n#EXT-X-ENDLIST\n</pre></blockquote><p> \n</p><p>\nЕсли HLS-поток защищён с помощью модуля\n<a href=\"ngx_http_secure_link_module.html\">ngx_http_secure_link_module</a>,\nпеременную <code>$uri</code> не следует использовать в выражении\n<a href=\"ngx_http_secure_link_module.html#secure_link_md5\">secure_link_md5</a>,\nтак как это приведёт к ошибкам при запросах к фрагментам.\nВместо <code>$uri</code> следует использовать\n<a href=\"ngx_http_map_module.html#map\">базовую часть URI</a>\n(<code>$hls_uri</code> в примере):\n</p> <blockquote class=\"example\"><pre>\nhttp {\n    ...\n\n    map $uri $hls_uri {\n        ~^(?&lt;base_uri&gt;.*).m3u8$ $base_uri;\n        ~^(?&lt;base_uri&gt;.*).ts$   $base_uri;\n        default                 $uri;\n    }\n\n    server {\n        ...\n\n        location /hls {\n            hls;\n            hls_forward_args on;\n\n            alias /var/videos;\n\n            secure_link $arg_md5,$arg_expires;\n            secure_link_md5 \"$secure_link_expires$hls_uri$remote_addr secret\";\n\n            if ($secure_link = \"\") {\n                return 403;\n            }\n\n            if ($secure_link = \"0\") {\n                return 410;\n            }\n        }\n    }\n}\n</pre></blockquote><p> \n</p>"},{"directive":"hls_buffers","defaultValue":"hls_buffers 8 2m;","syntax":"hls_buffers число размер;","context":"http, server, location","description":"<p>\nЗадаёт максимальное <code><i>число</i></code> и <code><i>размер</i></code> буферов,\nкоторые используются для чтения и записи блоков данных.\n</p>"},{"directive":"hls","defaultValue":"—","syntax":"hls;","context":"location","description":"<p>\nВключает HLS-поток во вложенном location.\n</p>"},{"directive":"health_check_timeout","defaultValue":"health_check_timeout 5s;","syntax":"health_check_timeout время;","context":"stream, server","description":"<p>\nПереопределяет значение\n<a href=\"ngx_stream_proxy_module.html#proxy_timeout\">proxy_timeout</a>\nдля проверок работоспособности.\n</p>"},{"directive":"health_check","defaultValue":"—","syntax":"health_check [параметры];","context":"server","description":"<p>\nАктивирует периодические проверки работоспособности серверов в\n<a href=\"ngx_stream_upstream_hc_module.html#upstream\">группе</a>.\n</p><p>\nМогут быть заданы следующие необязательные параметры:\n</p> <dl class=\"compact\">\n\n<dt id=\"health_check_interval\">\n<code>interval</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт интервал между двумя последовательными проверками,\nпо умолчанию 5 секунд.\n</dd>\n\n<dt id=\"health_check_jitter\">\n<code>jitter</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт время, в пределах которого\nслучайным образом задерживается каждая проверка,\nпо умолчанию задержки нет.\n</dd>\n\n<dt id=\"health_check_fails\">\n<code>fails</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт число последовательных неуспешных проверок для определённого сервера,\nпосле которых сервер будет считаться неработоспособным,\nпо умолчанию 1.\n</dd>\n\n<dt id=\"health_check_passes\">\n<code>passes</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт число последовательных успешных проверок для определённого сервера,\nпосле которых сервер будет считаться работоспособным,\nпо умолчанию 1.\n</dd>\n\n<dt id=\"health_check_mandatory\">\n<code>mandatory</code>\n</dt>\n<dd>\nустанавливает исходное состояние “checking” для сервера\nдо завершения первой проверки работоспособности (1.11.7).\nНа серверы в состоянии “checking” клиентские соединения передаваться не будут.\nЕсли параметр не указан,\nто исходно сервер будет считаться работоспособным.\n</dd>\n\n<dt id=\"health_check_match\">\n<code>match</code>=<code><i>имя</i></code>\n</dt>\n<dd>\nуказывает на блок <code>match</code> с условиями, которым должно\nудовлетворять соединение, чтобы результат проверки считался успешным.\nПо умолчанию для TCP проверяется\nлишь возможность установки TCP-соединения с сервером,\nдля <a href=\"#health_check_udp\">UDP</a> проверяется отсутствие\nсообщения ICMP “<code>Destination Unreachable</code>”\nв ответ на отправленную строку “<code>nginx health check</code>”.\n<blockquote class=\"note\">\nДо версии 1.11.7 по умолчанию для UDP\nтребовалось наличие блока <a href=\"#hc_match\">match</a> с параметрами\n<a href=\"#match_send\">send</a> и <a href=\"#match_expect\">expect</a>.\n</blockquote>\n</dd>\n\n<dt id=\"health_check_port\">\n<code>port</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт порт, используемый при подключении к серверу\nдля проверки его работоспособности (1.9.7).\nПо умолчанию совпадает с портом\n<a href=\"ngx_stream_upstream_module.html#server\">сервера</a>.\n</dd>\n\n<dt id=\"health_check_udp\">\n<code>udp</code>\n</dt>\n<dd>\nуказывает, что для проверки работоспособности будет использоваться протокол\n<code>UDP</code>\nвместо протокола <code>TCP</code>, используемого по умолчанию (1.9.13).\n</dd>\n\n</dl><p> \n</p>"},{"directive":"health_check","defaultValue":"—","syntax":"health_check [параметры];","context":"location","description":"<p>\nАктивирует периодические проверки работоспособности серверов в\n<a href=\"ngx_http_upstream_module.html#upstream\">группе</a>,\nуказанной в содержащем location.\n</p><p>\nМогут быть заданы следующие необязательные параметры:\n</p> <dl class=\"compact\">\n\n<dt id=\"health_check_interval\">\n<code>interval</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт интервал между двумя последовательными проверками,\nпо умолчанию 5 секунд.\n</dd>\n\n<dt id=\"health_check_jitter\">\n<code>jitter</code>=<code><i>время</i></code>\n</dt>\n<dd>\nзадаёт время, в пределах которого\nслучайным образом задерживается каждая проверка,\nпо умолчанию задержки нет.\n</dd>\n\n<dt id=\"health_check_fails\">\n<code>fails</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт число последовательных неуспешных проверок для определённого сервера,\nпосле которых сервер будет считаться неработоспособным,\nпо умолчанию 1.\n</dd>\n\n<dt id=\"health_check_passes\">\n<code>passes</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт число последовательных успешных проверок для определённого сервера,\nпосле которых сервер будет считаться работоспособным,\nпо умолчанию 1.\n</dd>\n\n<dt id=\"health_check_uri\">\n<code>uri</code>=<code><i>uri</i></code>\n</dt>\n<dd>\nзадаёт URI, используемый в запросах, проверяющих работоспособность,\nпо умолчанию “<code>/</code>”.\n</dd>\n\n<dt id=\"health_check_mandatory\">\n<code>mandatory</code>\n</dt>\n<dd>\nустанавливает исходное состояние “checking” для сервера\nдо завершения первой проверки работоспособности (1.11.7).\nНа серверы в состоянии “checking” клиентские запросы передаваться не будут.\nЕсли параметр не указан,\nто исходно сервер будет считаться работоспособным.\n</dd>\n\n<dt id=\"health_check_match\">\n<code>match</code>=<code><i>имя</i></code>\n</dt>\n<dd>\nуказывает на блок <code>match</code> с условиями, которым должен\nудовлетворять ответ, чтобы результат проверки считался успешным.\nПо умолчанию код ответа должен быть 2xx или 3xx.\n</dd>\n\n<dt id=\"health_check_port\">\n<code>port</code>=<code><i>число</i></code>\n</dt>\n<dd>\nзадаёт порт, используемый при подключении к серверу\nдля проверки его работоспособности (1.9.7).\nПо умолчанию совпадает с портом\n<a href=\"ngx_http_upstream_module.html#server\">сервера</a>.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"hash","defaultValue":"—","syntax":"hash ключ [consistent];","context":"upstream","description":"<p>\nЗадаёт метод балансировки нагрузки для группы, при котором\nсоответствие клиента серверу определяется при помощи\nхэшированного значения <code><i>ключа</i></code>.\nВ качестве <code><i>ключа</i></code> может использоваться текст, переменные\nи их комбинации (1.11.2).\nПример использования:\n</p> <blockquote class=\"example\"><pre>\nhash $remote_addr;\n</pre></blockquote><p> \nСледует отметить, что любое добавление или удаление серверов в группе\nможет привести к перераспределению большинства ключей на другие серверы.\nМетод совместим с библиотекой Perl\n<a href=\"http://search.cpan.org/perldoc?Cache%3A%3AMemcached\">Cache::Memcached</a>.\n</p><p>\nЕсли задан параметр <code>consistent</code>, то вместо\nвышеописанного метода будет использоваться метод консистентного хэширования\n<a href=\"http://www.last.fm/user/RJ/journal/2007/04/10/392555/\">ketama</a>.\nМетод гарантирует, что при добавлении сервера в группу или его удалении\nна другие серверы будет перераспределено минимальное число ключей.\nПрименение метода для кэширующих серверов обеспечивает\nбольший процент попаданий в кэш.\nМетод совместим с библиотекой Perl\n<a href=\"http://search.cpan.org/perldoc?Cache%3A%3AMemcached%3A%3AFast\">Cache::Memcached::Fast</a>\nпри значении параметра <code><i>ketama_points</i></code> равным 160.\n</p>"},{"directive":"hash","defaultValue":"—","syntax":"hash ключ [consistent];","context":"upstream","description":"<p>Эта директива появилась в версии 1.7.2.\n            </p></div><p>\nЗадаёт метод балансировки нагрузки для группы, при котором\nсоответствие клиента серверу определяется при помощи\nхэшированного значения <code><i>ключа</i></code>.\nВ качестве <code><i>ключа</i></code> может использоваться\nтекст, переменные и их комбинации.\nСледует отметить, что любое добавление или удаление серверов в группе\nможет привести к перераспределению большинства ключей на другие серверы.\nМетод совместим с библиотекой Perl\n<a href=\"http://search.cpan.org/perldoc?Cache%3A%3AMemcached\">Cache::Memcached</a>.\n</p><p>\nЕсли задан параметр <code>consistent</code>, то вместо\nвышеописанного метода будет использоваться метод консистентного хэширования\n<a href=\"http://www.last.fm/user/RJ/journal/2007/04/10/392555/\">ketama</a>.\nМетод гарантирует, что при добавлении сервера в группу или его удалении\nна другие серверы будет перераспределено минимальное число ключей.\nПрименение метода для кэширующих серверов обеспечивает\nбольший процент попаданий в кэш.\nМетод совместим с библиотекой Perl\n<a href=\"http://search.cpan.org/perldoc?Cache%3A%3AMemcached%3A%3AFast\">Cache::Memcached::Fast</a>\nпри значении параметра <code><i>ketama_points</i></code> равным 160.\n</p>"},{"directive":"gzip_vary","defaultValue":"gzip_vary off;","syntax":"gzip_vary on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает выдавать в ответе поле заголовка\n“Vary: Accept-Encoding”, если активны директивы\n<a href=\"#gzip\">gzip</a>,\n<a href=\"ngx_http_gzip_static_module.html#gzip_static\">gzip_static</a> или\n<a href=\"ngx_http_gunzip_module.html#gunzip\">gunzip</a>.\n</p>"},{"directive":"gzip_types","defaultValue":"gzip_types text/html;","syntax":"gzip_types mime-тип ...;","context":"http, server, location","description":"<p>\nРазрешает сжатие ответа методом gzip для указанных MIME-типов в дополнение\nк “<code>text/html</code>”.\nСпециальное значение “<code>*</code>” соответствует любому MIME-типу\n(0.8.29).\nОтветы с типом “<code>text/html</code>” сжимаются всегда.\n</p>"},{"directive":"gzip_static","defaultValue":"gzip_static off;","syntax":"gzip_static     on |    off |    always;","context":"http, server, location","description":"<p>\nРазрешает (“<code>on</code>”) или запрещает (“<code>off</code>”)\nпроверку готового сжатого файла.\nПри использовании также учитываются директивы\n<a href=\"ngx_http_gzip_module.html#gzip_http_version\">gzip_http_version</a>,\n<a href=\"ngx_http_gzip_module.html#gzip_proxied\">gzip_proxied</a>,\n<a href=\"ngx_http_gzip_module.html#gzip_disable\">gzip_disable</a>\nи <a href=\"ngx_http_gzip_module.html#gzip_vary\">gzip_vary</a>.\n</p><p>\nСо значением “<code>always</code>” (1.3.6) во всех случаях будет\nиспользоваться сжатый файл, без проверки поддержки на стороне клиента.\nЭто полезно, если на диске всё равно нет несжатых файлов, или используется\nмодуль <a href=\"ngx_http_gunzip_module.html\">ngx_http_gunzip_module</a>.\n</p><p>\nСжимать файлы можно с помощью программы <code>gzip</code>\nили совместимой с ней.\nЖелательно, чтобы дата и время модификации исходного и сжатого файлов совпадали.\n</p>"},{"directive":"gzip_proxied","defaultValue":"gzip_proxied off;","syntax":"gzip_proxied     off |    expired |    no-cache |    no-store |    private |    no_last_modified |    no_etag |    auth |    any    ...;","context":"http, server, location","description":"<p>\nРазрешает или запрещает сжатие ответа методом gzip для проксированных\nзапросов в зависимости от запроса и ответа.\nТо, что запрос проксированный, определяется на основании наличия поля\n“Via” в заголовке запроса.\nВ директиве можно указать одновременно несколько параметров:\n</p> <dl class=\"compact\">\n\n<dt><code>off</code></dt>\n<dd>\nзапрещает сжатие для всех проксированных запросов,\nигнорируя остальные параметры;\n</dd>\n\n<dt><code>expired</code></dt>\n<dd>\nразрешает сжатие, если в заголовке ответа есть поле\n“Expires” со значением, запрещающим кэширование;\n</dd>\n\n<dt><code>no-cache</code></dt>\n<dd>\nразрешает сжатие, если в заголовке ответа есть поле\n“Cache-Control” с параметром “<code>no-cache</code>”;\n</dd>\n\n<dt><code>no-store</code></dt>\n<dd>\nразрешает сжатие, если в заголовке ответа есть поле\n“Cache-Control” с параметром “<code>no-store</code>”;\n</dd>\n\n<dt><code>private</code></dt>\n<dd>\nразрешает сжатие, если в заголовке ответа есть поле\n“Cache-Control” с параметром “<code>private</code>”;\n</dd>\n\n<dt><code>no_last_modified</code></dt>\n<dd>\nразрешает сжатие, если в заголовке ответа нет поля\n“Last-Modified”;\n</dd>\n\n<dt><code>no_etag</code></dt>\n<dd>\nразрешает сжатие, если в заголовке ответа нет поля\n“ETag”;\n</dd>\n\n<dt><code>auth</code></dt>\n<dd>\nразрешает сжатие, если в заголовке запроса есть поле\n“Authorization”;\n</dd>\n\n<dt><code>any</code></dt>\n<dd>\nразрешает сжатие для всех проксированных запросов.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"gzip_min_length","defaultValue":"gzip_min_length 20;","syntax":"gzip_min_length длина;","context":"http, server, location","description":"<p>\nУстанавливает минимальную длину ответа, который будет сжиматься методом gzip.\nДлина определяется только из поля “Content-Length”\nзаголовка ответа.\n</p>"},{"directive":"gzip_http_version","defaultValue":"gzip_http_version 1.1;","syntax":"gzip_http_version 1.0 | 1.1;","context":"http, server, location","description":"<p>\nУстанавливает минимальную HTTP-версию запроса, необходимую для сжатия ответа.\n</p>"},{"directive":"gzip_disable","defaultValue":"—","syntax":"gzip_disable regex ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.6.23.\n            </p></div><p>\nЗапрещает сжатие ответа методом gzip для запросов\nс полями заголовка “User-Agent”,\nсовпадающими с заданными регулярными выражениями.\n</p><p>\nСпециальная маска “<code>msie6</code>” (0.7.12) соответствует\nрегулярному выражению “<code>MSIE [4-6]\\.</code>”, но работает быстрее.\nНачиная с версии 0.8.11 из этой маски исключается\n“<code>MSIE 6.0; ... SV1</code>”.\n</p>"},{"directive":"gzip_comp_level","defaultValue":"gzip_comp_level 1;","syntax":"gzip_comp_level степень;","context":"http, server, location","description":"<p>\nУстанавливает <code><i>степень</i></code> сжатия ответа методом gzip.\nДопустимые значения находятся в диапазоне от 1 до 9.\n</p>"},{"directive":"gzip_buffers","defaultValue":"gzip_buffers 32 4k|16 8k;","syntax":"gzip_buffers число размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> и <code><i>размер</i></code> буферов,\nв которые будет сжиматься ответ.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p> <blockquote class=\"note\">\nДо версии 0.7.28 по умолчанию использовалось 4 буфера размером 4K или 8K.\n</blockquote><p> \n</p>"},{"directive":"gzip","defaultValue":"gzip off;","syntax":"gzip on | off;","context":"http, server, location, if в location","description":"<p>\nРазрешает или запрещает сжатие ответа методом gzip.\n</p>"},{"directive":"gunzip_buffers","defaultValue":"gunzip_buffers 32 4k|16 8k;","syntax":"gunzip_buffers число размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> и <code><i>размер</i></code> буферов,\nв которые будет разжиматься ответ.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p>"},{"directive":"gunzip","defaultValue":"gunzip off;","syntax":"gunzip on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает распаковку ответов, сжатых методом gzip,\nдля тех клиентов, которые его не поддерживают.\nЕсли разрешено, то для определения, поддерживает ли клиент gzip,\nтакже учитываются следующие директивы:\n<a href=\"ngx_http_gzip_module.html#gzip_http_version\">gzip_http_version</a>,\n<a href=\"ngx_http_gzip_module.html#gzip_proxied\">gzip_proxied</a> и\n<a href=\"ngx_http_gzip_module.html#gzip_disable\">gzip_disable</a>.\nСм. также директиву <a href=\"ngx_http_gzip_module.html#gzip_vary\">gzip_vary</a>.\n</p>"},{"directive":"google_perftools_profiles","defaultValue":"—","syntax":"google_perftools_profiles файл;","context":"main","description":"<p>\nЗадаёт имя файла, который хранит информацию о профилировании\nрабочего процесса nginx.\nИдентификатор рабочего процесса всегда является частью имени файла\nи добавляется в конце имени после точки.\n</p>"},{"directive":"geoip_proxy_recursive","defaultValue":"geoip_proxy_recursive off;","syntax":"geoip_proxy_recursive on | off;","context":"http","description":"<p>\n                    Эта директива появилась в версиях 1.3.0 и 1.2.1.\n                    \n                        </p>\n                    </div><p>\nПри выключенном рекурсивном поиске вместо исходного адреса клиента,\nсовпадающего с одним из доверенных адресов, будет использоваться последний\nадрес, переданный в “X-Forwarded-For”.\nПри включённом рекурсивном поиске вместо исходного адреса клиента,\nсовпадающего с одним из доверенных адресов, будет использоваться последний\nне доверенный адрес, переданный в “X-Forwarded-For”.\n</p>"},{"directive":"geoip_proxy","defaultValue":"—","syntax":"geoip_proxy адрес | CIDR;","context":"http","description":"<p>\n                    Эта директива появилась в версиях 1.3.0 и 1.2.1.\n                    \n                        </p>\n                    </div><p>\nЗадаёт доверенные адреса, при запросе с которых будет использоваться\nадрес в переданном поле заголовка запроса “X-Forwarded-For”.\n</p>"},{"directive":"geoip_org","defaultValue":"—","syntax":"geoip_org файл;","context":"stream","description":"<p>\nЗадаёт базу данных для определения названия организации\nв зависимости от значения IP-адреса клиента.\nПри использовании этой базы данных доступна следующая переменная:\n</p> <dl class=\"compact\">\n\n<dt id=\"var_geoip_org\"><code>$geoip_org</code></dt>\n<dd>\nназвание организации, например, “The University of Melbourne”.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"geoip_org","defaultValue":"—","syntax":"geoip_org файл;","context":"http","description":"<p>Эта директива появилась в версии 1.0.3.\n            </p></div><p>\nЗадаёт базу данных для определения названия организации\nв зависимости от значения IP-адреса клиента.\nПри использовании этой базы данных доступна следующая переменная:\n</p> <dl class=\"compact\">\n\n<dt id=\"var_geoip_org\"><code>$geoip_org</code></dt>\n<dd>\nназвание организации, например, “The University of Melbourne”.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"geoip_country","defaultValue":"—","syntax":"geoip_country файл;","context":"stream","description":"<p>\nЗадаёт базу данных для определения страны в зависимости\nот значения IP-адреса клиента.\nПри использовании этой базы данных доступны следующие переменные:\n</p> <dl class=\"compact\">\n\n<dt id=\"var_geoip_country_code\"><code>$geoip_country_code</code></dt>\n<dd>\nдвухбуквенный код страны, например,\n“<code>RU</code>”, “<code>US</code>”.\n</dd>\n\n<dt id=\"var_geoip_country_code3\"><code>$geoip_country_code3</code>\n</dt>\n<dd>\nтрёхбуквенный код страны, например,\n“<code>RUS</code>”, “<code>USA</code>”.\n</dd>\n\n<dt id=\"var_geoip_country_name\"><code>$geoip_country_name</code></dt>\n<dd>\nназвание страны, например,\n“<code>Russian Federation</code>”, “<code>United States</code>”.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"geoip_country","defaultValue":"—","syntax":"geoip_country файл;","context":"http","description":"<p>\nЗадаёт базу данных для определения страны в зависимости\nот значения IP-адреса клиента.\nПри использовании этой базы данных доступны следующие переменные:\n</p> <dl class=\"compact\">\n\n<dt id=\"var_geoip_country_code\"><code>$geoip_country_code</code></dt>\n<dd>\nдвухбуквенный код страны, например,\n“<code>RU</code>”, “<code>US</code>”.\n</dd>\n\n<dt id=\"var_geoip_country_code3\"><code>$geoip_country_code3</code>\n</dt>\n<dd>\nтрёхбуквенный код страны, например,\n“<code>RUS</code>”, “<code>USA</code>”.\n</dd>\n\n<dt id=\"var_geoip_country_name\"><code>$geoip_country_name</code></dt>\n<dd>\nназвание страны, например,\n“<code>Russian Federation</code>”, “<code>United States</code>”.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"geoip_city","defaultValue":"—","syntax":"geoip_city файл;","context":"stream","description":"<p>\nЗадаёт базу данных для определения страны, региона и города\nв зависимости от значения IP-адреса клиента.\nПри использовании этой базы данных доступны следующие переменные:\n</p> <dl class=\"compact\">\n\n<dt id=\"var_geoip_area_code\"><code>$geoip_area_code</code></dt>\n<dd>телефонный код области (только для США).\n<blockquote class=\"note\">\nДанная переменная может содержать неактуальную информацию, т.к.\nсоответствующее поле базы данных объявлено устаревшим.\n</blockquote>\n</dd>\n\n<dt id=\"var_geoip_city_continent_code\">\n<code>$geoip_city_continent_code</code>\n</dt>\n<dd>двухбуквенный код континента, например,\n“<code>EU</code>”, “<code>NA</code>”.\n</dd>\n\n<dt id=\"var_geoip_city_country_code\"><code>$geoip_city_country_code</code>\n</dt>\n<dd>\nдвухбуквенный код страны, например,\n“<code>RU</code>”, “<code>US</code>”.\n</dd>\n\n<dt id=\"var_geoip_city_country_code3\"><code>$geoip_city_country_code3</code>\n</dt>\n<dd>\nтрёхбуквенный код страны, например,\n“<code>RUS</code>”, “<code>USA</code>”.\n</dd>\n\n<dt id=\"var_geoip_city_country_name\"><code>$geoip_city_country_name</code>\n</dt>\n<dd>\nназвание страны, например,\n“<code>Russian Federation</code>”, “<code>United States</code>”.\n</dd>\n\n<dt id=\"var_geoip_dma_code\"><code>$geoip_dma_code</code></dt>\n<dd>\nDMA-код региона в США (также известный как “код агломерации”), согласно\n<a href=\"https://developers.google.com/adwords/api/docs/appendix/cities-DMAregions\">геотаргетингу</a>\nGoogle AdWords API.\n</dd>\n\n<dt id=\"var_geoip_latitude\"><code>$geoip_latitude</code></dt>\n<dd>широта.</dd>\n\n<dt id=\"var_geoip_longitude\"><code>$geoip_longitude</code></dt>\n<dd>долгота.</dd>\n\n<dt id=\"var_geoip_region\"><code>$geoip_region</code></dt>\n<dd>\nдвухсимвольный код региона страны (область, край, штат,\nпровинция, федеральная земля и тому подобное), например,\n“<code>48</code>”, “<code>DC</code>”.\n</dd>\n\n<dt id=\"var_geoip_region_name\"><code>$geoip_region_name</code></dt>\n<dd>\nназвание региона страны (область, край, штат,\nпровинция, федеральная земля и тому подобное), например,\n“<code>Moscow City</code>”, “<code>District of Columbia</code>”.\n</dd>\n\n<dt id=\"var_geoip_city\"><code>$geoip_city</code></dt>\n<dd>\nназвание города, например,\n“<code>Moscow</code>”, “<code>Washington</code>”.\n</dd>\n\n<dt id=\"var_geoip_postal_code\"><code>$geoip_postal_code</code></dt>\n<dd>\nпочтовый индекс.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"geoip_city","defaultValue":"—","syntax":"geoip_city файл;","context":"http","description":"<p>\nЗадаёт базу данных для определения страны, региона и города\nв зависимости от значения IP-адреса клиента.\nПри использовании этой базы данных доступны следующие переменные:\n</p> <dl class=\"compact\">\n\n<dt id=\"var_geoip_area_code\"><code>$geoip_area_code</code></dt>\n<dd>телефонный код области (только для США).\n<blockquote class=\"note\">\nДанная переменная может содержать неактуальную информацию, т.к.\nсоответствующее поле базы данных объявлено устаревшим.\n</blockquote>\n</dd>\n\n<dt id=\"var_geoip_city_continent_code\">\n<code>$geoip_city_continent_code</code>\n</dt>\n<dd>двухбуквенный код континента, например,\n“<code>EU</code>”, “<code>NA</code>”.\n</dd>\n\n<dt id=\"var_geoip_city_country_code\"><code>$geoip_city_country_code</code>\n</dt>\n<dd>\nдвухбуквенный код страны, например,\n“<code>RU</code>”, “<code>US</code>”.\n</dd>\n\n<dt id=\"var_geoip_city_country_code3\"><code>$geoip_city_country_code3</code>\n</dt>\n<dd>\nтрёхбуквенный код страны, например,\n“<code>RUS</code>”, “<code>USA</code>”.\n</dd>\n\n<dt id=\"var_geoip_city_country_name\"><code>$geoip_city_country_name</code>\n</dt>\n<dd>\nназвание страны, например,\n“<code>Russian Federation</code>”, “<code>United States</code>”.\n</dd>\n\n<dt id=\"var_geoip_dma_code\"><code>$geoip_dma_code</code></dt>\n<dd>\nDMA-код региона в США (также известный как “код агломерации”), согласно\n<a href=\"https://developers.google.com/adwords/api/docs/appendix/cities-DMAregions\">геотаргетингу</a>\nGoogle AdWords API.\n</dd>\n\n<dt id=\"var_geoip_latitude\"><code>$geoip_latitude</code></dt>\n<dd>широта.</dd>\n\n<dt id=\"var_geoip_longitude\"><code>$geoip_longitude</code></dt>\n<dd>долгота.</dd>\n\n<dt id=\"var_geoip_region\"><code>$geoip_region</code></dt>\n<dd>\nдвухсимвольный код региона страны (область, край, штат,\nпровинция, федеральная земля и тому подобное), например,\n“<code>48</code>”, “<code>DC</code>”.\n</dd>\n\n<dt id=\"var_geoip_region_name\"><code>$geoip_region_name</code></dt>\n<dd>\nназвание региона страны (область, край, штат,\nпровинция, федеральная земля и тому подобное), например,\n“<code>Moscow City</code>”, “<code>District of Columbia</code>”.\n</dd>\n\n<dt id=\"var_geoip_city\"><code>$geoip_city</code></dt>\n<dd>\nназвание города, например,\n“<code>Moscow</code>”, “<code>Washington</code>”.\n</dd>\n\n<dt id=\"var_geoip_postal_code\"><code>$geoip_postal_code</code></dt>\n<dd>\nпочтовый индекс.\n</dd>\n\n</dl><p> \n</p>"},{"directive":"geo","defaultValue":"—","syntax":"geo [$адрес] $переменная { ... }","context":"stream","description":"<p>\nОписывает для указанной переменной зависимость значения от\nIP-адреса клиента.\nПо умолчанию адрес берётся из переменной <code>$remote_addr</code>,\nно его также можно получить из другой переменной, например:\n</p> <blockquote class=\"example\"><pre>\ngeo $arg_remote_addr $geo {\n    ...;\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nПоскольку переменные вычисляются только в момент использования,\nсамо по себе наличие даже большого числа объявлений переменных\n“<code>geo</code>” не влечёт за собой никаких дополнительных\nрасходов на обработку соединений.\n</blockquote><p> \n</p><p>\nЕсли значение переменной не представляет из себя правильный IP-адрес,\nто используется адрес “<code>255.255.255.255</code>”.\n</p><p>\nАдреса задаются либо префиксами в формате CIDR\n(включая одиночные адреса), либо в виде диапазонов.\n</p><p>\nТакже поддерживаются следующие специальные параметры:\n</p> <dl class=\"compact\">\n\n<dt><code>delete</code></dt>\n<dd>\nудаляет описанную сеть.\n</dd>\n\n<dt><code>default</code></dt>\n<dd>\nзначение переменной, если адрес клиента не соответствует\nни одному из заданных адресов.\nПри задании адресов в формате CIDR\nвместо <code>default</code> можно использовать\n“<code>0.0.0.0/0</code>” и “<code>::/0</code>”.\nЕсли параметр <code>default</code> не указан, значением\nпо умолчанию будет пустая строка.\n</dd>\n\n<dt><code>include</code></dt>\n<dd>\nвключает файл с адресами и значениями.\nВключений может быть несколько.\n</dd>\n\n<dt><code>ranges</code></dt>\n<dd>\nуказывает, что адреса задаются в виде диапазонов.\nЭтот параметр должен быть первым.\nДля ускорения загрузки гео-базы нужно располагать адреса в порядке возрастания.\n</dd>\n\n</dl><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\ngeo $country {\n    default        ZZ;\n    include        conf/geo.conf;\n    delete         127.0.0.0/16;\n\n    127.0.0.0/24   US;\n    127.0.0.1/32   RU;\n    10.1.0.0/16    RU;\n    192.168.1.0/24 UK;\n}\n</pre></blockquote><p> \n</p><p>\nВ файле <code>conf/geo.conf</code> могут быть такие строки:\n</p> <blockquote class=\"example\"><pre>\n10.2.0.0/16    RU;\n192.168.2.0/24 RU;\n</pre></blockquote><p> \n</p><p>\nВ качестве значения выбирается максимальное совпадение, например,\nдля адреса 127.0.0.1 будет выбрано значение “<code>RU</code>”,\nа не “<code>US</code>”.\n</p><p>\nПример описания диапазонов:\n</p> <blockquote class=\"example\"><pre>\ngeo $country {\n    ranges;\n    default                   ZZ;\n    127.0.0.0-127.0.0.0       US;\n    127.0.0.1-127.0.0.1       RU;\n    127.0.0.2-127.0.0.255     US;\n    10.1.0.0-10.1.255.255     RU;\n    192.168.1.0-192.168.1.255 UK;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"geo","defaultValue":"—","syntax":"geo [$адрес] $переменная { ... }","context":"http","description":"<p>\nОписывает для указанной переменной зависимость значения от\nIP-адреса клиента.\nПо умолчанию адрес берётся из переменной <code>$remote_addr</code>,\nно его также можно получить из другой переменной (0.7.27), например:\n</p> <blockquote class=\"example\"><pre>\ngeo $arg_remote_addr $geo {\n    ...;\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nПоскольку переменные вычисляются только в момент использования,\nсамо по себе наличие даже большого числа объявлений переменных\n“<code>geo</code>” не влечёт за собой никаких дополнительных\nрасходов на обработку запросов.\n</blockquote><p> \n</p><p>\nЕсли значение переменной не представляет из себя правильный IP-адрес,\nто используется адрес “<code>255.255.255.255</code>”.\n</p><p>\nАдреса задаются либо префиксами в формате CIDR\n(включая одиночные адреса), либо в виде диапазонов (0.7.23).\n</p> <blockquote class=\"note\">\nIPv6-префиксы поддерживаются начиная с версий 1.3.10 и 1.2.7.\n</blockquote><p> \n</p><p>\nТакже поддерживаются следующие специальные параметры:\n</p> <dl class=\"compact\">\n\n<dt><code>delete</code></dt>\n<dd>\nудаляет описанную сеть (0.7.23).\n</dd>\n\n<dt><code>default</code></dt>\n<dd>\nзначение переменной, если адрес клиента не соответствует\nни одному из заданных адресов.\nПри задании адресов в формате CIDR\nвместо <code>default</code> можно использовать\n“<code>0.0.0.0/0</code>” и “<code>::/0</code>”.\nЕсли параметр <code>default</code> не указан, значением\nпо умолчанию будет пустая строка.\n</dd>\n\n<dt><code>include</code></dt>\n<dd>\nвключает файл с адресами и значениями.\nВключений может быть несколько.\n</dd>\n\n<dt><code>proxy</code></dt>\n<dd>\nзадаёт доверенные адреса (0.8.7, 0.7.63),\nпри запросе с которых будет использоваться адрес в переданном\nполе заголовка запроса “X-Forwarded-For”.\nВ отличие от обычных адресов, доверенные адреса проверяются\nпоследовательно.\n<blockquote class=\"note\">\nДоверенные IPv6-адреса поддерживаются начиная с версий 1.3.0 и 1.2.1.\n</blockquote>\n</dd>\n\n<dt><code>proxy_recursive</code></dt>\n<dd>\nвключает рекурсивный поиск адреса (1.3.0, 1.2.1).\nПри выключенном рекурсивном поиске вместо исходного адреса клиента,\nсовпадающего с одним из доверенных адресов, будет использоваться последний\nадрес, переданный в “X-Forwarded-For”.\nПри включённом рекурсивном поиске вместо исходного адреса клиента,\nсовпадающего с одним из доверенных адресов, будет использоваться последний\nне доверенный адрес, переданный в “X-Forwarded-For”.\n</dd>\n\n<dt><code>ranges</code></dt>\n<dd>\nуказывает, что адреса задаются в виде диапазонов (0.7.23).\nЭтот параметр должен быть первым.\nДля ускорения загрузки гео-базы нужно располагать адреса в порядке возрастания.\n</dd>\n\n</dl><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\ngeo $country {\n    default        ZZ;\n    include        conf/geo.conf;\n    delete         127.0.0.0/16;\n    proxy          192.168.100.0/24;\n    proxy          2001:0db8::/32;\n\n    127.0.0.0/24   US;\n    127.0.0.1/32   RU;\n    10.1.0.0/16    RU;\n    192.168.1.0/24 UK;\n}\n</pre></blockquote><p> \n</p><p>\nВ файле <code>conf/geo.conf</code> могут быть такие строки:\n</p> <blockquote class=\"example\"><pre>\n10.2.0.0/16    RU;\n192.168.2.0/24 RU;\n</pre></blockquote><p> \n</p><p>\nВ качестве значения выбирается максимальное совпадение, например,\nдля адреса 127.0.0.1 будет выбрано значение “<code>RU</code>”,\nа не “<code>US</code>”.\n</p><p>\nПример описания диапазонов:\n</p> <blockquote class=\"example\"><pre>\ngeo $country {\n    ranges;\n    default                   ZZ;\n    127.0.0.0-127.0.0.0       US;\n    127.0.0.1-127.0.0.1       RU;\n    127.0.0.2-127.0.0.255     US;\n    10.1.0.0-10.1.255.255     RU;\n    192.168.1.0-192.168.1.255 UK;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"flv","defaultValue":"—","syntax":"flv;","context":"location","description":"<p>\nВключает в содержащем location обработку этим модулем.\n</p>"},{"directive":"fastcgi_temp_path","defaultValue":"fastcgi_temp_path fastcgi_temp;","syntax":"fastcgi_temp_path     путь    [уровень1    [уровень2    [уровень3]]];","context":"http, server, location","description":"<p>\nЗадаёт имя каталога для хранения временных файлов с данными,\nполученными от FastCGI-серверов.\nВ каталоге может использоваться иерархия подкаталогов до трёх уровней.\nНапример, при такой конфигурации\n</p> <blockquote class=\"example\"><pre>\nfastcgi_temp_path /spool/nginx/fastcgi_temp 1 2;\n</pre></blockquote><p> \nвременный файл будет следующего вида:\n</p> <blockquote class=\"example\"><pre>\n/spool/nginx/fastcgi_temp/<strong>7</strong>/<strong>45</strong>/00000123<strong>457</strong>\n</pre></blockquote><p> \n</p><p>\nСм. также параметр <code>use_temp_path</code> директивы\n<a href=\"#fastcgi_cache_path\">fastcgi_cache_path</a>.\n</p>"},{"directive":"fastcgi_temp_file_write_size","defaultValue":"fastcgi_temp_file_write_size 8k|16k;","syntax":"fastcgi_temp_file_write_size размер;","context":"http, server, location","description":"<p>\nОграничивает <code><i>размер</i></code> данных, сбрасываемых во временный файл\nза один раз, при включённой буферизации ответов FastCGI-сервера\nво временные файлы.\nПо умолчанию <code><i>размер</i></code> ограничен двумя буферами, заданными\nдирективами <a href=\"#fastcgi_buffer_size\">fastcgi_buffer_size</a> и <a href=\"#fastcgi_buffers\">fastcgi_buffers</a>.\nМаксимальный размер временного файла задаётся директивой\n<a href=\"#fastcgi_max_temp_file_size\">fastcgi_max_temp_file_size</a>.\n</p>"},{"directive":"fastcgi_store_access","defaultValue":"fastcgi_store_access user:rw;","syntax":"fastcgi_store_access пользователи:права ...;","context":"http, server, location","description":"<p>\nЗадаёт права доступа для создаваемых файлов и каталогов, например,\n</p> <blockquote class=\"example\"><pre>\nfastcgi_store_access user:rw group:rw all:r;\n</pre></blockquote><p> \n</p><p>\nЕсли заданы какие-либо права для <code>group</code> или\n<code>all</code>, то права для <code>user</code>\nуказывать необязательно:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_store_access group:rw all:r;\n</pre></blockquote><p> \n</p>"},{"directive":"fastcgi_store","defaultValue":"fastcgi_store off;","syntax":"fastcgi_store     on |    off |    строка;","context":"http, server, location","description":"<p>\nРазрешает сохранение на диск файлов.\nПараметр <code>on</code> сохраняет файлы в соответствии с путями,\nуказанными в директивах\n<a href=\"ngx_http_core_module.html#alias\">alias</a> или\n<a href=\"ngx_http_core_module.html#root\">root</a>.\nПараметр <code>off</code> запрещает сохранение файлов.\nКроме того, имя файла можно задать явно с помощью строки с переменными:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_store /data/www$original_uri;\n</pre></blockquote><p> \n</p><p>\nВремя изменения файлов выставляется согласно полученному полю\n“Last-Modified” в заголовке ответа.\nОтвет сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временный файл и постоянное место хранения ответа\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если сохраняемые файлы будут находиться на той же файловой\nсистеме, что и каталог с временными файлами, задаваемый директивой\n<a href=\"#fastcgi_temp_path\">fastcgi_temp_path</a> для данного location.\n</p><p>\nДирективу можно использовать для создания локальных копий статических\nнеизменяемых файлов, например, так:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    root                 /data/www;\n    error_page           404 = /fetch$uri;\n}\n\nlocation /fetch/ {\n    internal;\n\n    fastcgi_pass         backend:9000;\n    ...\n\n    fastcgi_store        on;\n    fastcgi_store_access user:rw group:rw all:r;\n    fastcgi_temp_path    /data/temp;\n\n    alias                /data/www/;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"fastcgi_split_path_info","defaultValue":"—","syntax":"fastcgi_split_path_info regex;","context":"location","description":"<p>\nЗадаёт регулярное выражение, выделяющее значение для переменной\n<code>$fastcgi_path_info</code>.\nРегулярное выражение должно иметь два выделения, из которых первое\nстановится значением переменной <code>$fastcgi_script_name</code>,\nа второе - значением переменной <code>$fastcgi_path_info</code>.\nНапример, при таких настройках\n</p> <blockquote class=\"example\"><pre>\nlocation ~ ^(.+\\.php)(.*)$ {\n    fastcgi_split_path_info       ^(.+\\.php)(.*)$;\n    fastcgi_param SCRIPT_FILENAME /path/to/php$fastcgi_script_name;\n    fastcgi_param PATH_INFO       $fastcgi_path_info;\n</pre></blockquote><p> \nи запросе “<code>/show.php/article/0001</code>”\nпараметр <code>SCRIPT_FILENAME</code> будет равен\n“<code>/path/to/php/show.php</code>”, а параметр\n<code>PATH_INFO</code> - “<code>/article/0001</code>”.\n</p>"},{"directive":"fastcgi_send_timeout","defaultValue":"fastcgi_send_timeout 60s;","syntax":"fastcgi_send_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при передаче запроса FastCGI-серверу.\nТаймаут устанавливается не на всю передачу запроса,\nа только между двумя операциями записи.\nЕсли по истечении этого времени FastCGI-сервер не примет новых данных,\nсоединение закрывается.\n</p>"},{"directive":"fastcgi_send_lowat","defaultValue":"fastcgi_send_lowat 0;","syntax":"fastcgi_send_lowat размер;","context":"http, server, location","description":"<p>\nПри установке директивы в ненулевое значение nginx будет пытаться минимизировать\nчисло операций отправки на исходящих соединениях с FastCGI-сервером\nлибо при помощи флага <code>NOTE_LOWAT</code> метода\n<a href=\"../events.html#kqueue\">kqueue</a>,\nлибо при помощи параметра сокета <code>SO_SNDLOWAT</code>,\nс указанным <code><i>размером</i></code>.\n</p><p>\nЭта директива игнорируется на Linux, Solaris и Windows.\n</p>"},{"directive":"fastcgi_request_buffering","defaultValue":"fastcgi_request_buffering on;","syntax":"fastcgi_request_buffering on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nРазрешает или запрещает использовать буферизацию тела запроса клиента.\n</p>"},{"directive":"fastcgi_read_timeout","defaultValue":"fastcgi_read_timeout 60s;","syntax":"fastcgi_read_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут при чтении ответа FastCGI-сервера.\nТаймаут устанавливается не на всю передачу ответа,\nа только между двумя операциями чтения.\nЕсли по истечении этого времени FastCGI-сервер ничего не передаст,\nсоединение закрывается.\n</p>"},{"directive":"fastcgi_pass_request_headers","defaultValue":"fastcgi_pass_request_headers on;","syntax":"fastcgi_pass_request_headers on | off;","context":"http, server, location","description":null},{"directive":"fastcgi_pass_request_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"fastcgi_pass_header","defaultValue":"—","syntax":"fastcgi_pass_header поле;","context":"http, server, location","description":"<p>\nРазрешает передавать от FastCGI-сервера клиенту\n<a href=\"#fastcgi_hide_header\">запрещённые для передачи</a> поля заголовка.\n</p>"},{"directive":"fastcgi_pass","defaultValue":"—","syntax":"fastcgi_pass адрес;","context":"location, if в location","description":"<p>\nЗадаёт адрес FastCGI-сервера.\nАдрес может быть указан в виде доменного имени или IP-адреса,\nи порта:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_pass localhost:9000;\n</pre></blockquote><p> \nили в виде пути UNIX-сокета:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_pass unix:/tmp/fastcgi.socket;\n</pre></blockquote><p> \n</p><p>\nЕсли доменному имени соответствует несколько адресов, то все они будут\nиспользоваться по очереди (round-robin).\nИ, кроме того, адрес может быть\n<a href=\"ngx_http_upstream_module.html\">группой серверов</a>.\n</p><p>\nВ значении параметра можно использовать переменные.\nВ этом случае, если адрес указан в виде доменного имени,\nимя ищется среди описанных\n<a href=\"ngx_http_upstream_module.html\">групп серверов</a>\nи если не найдено, то определяется с помощью\n<a href=\"ngx_http_core_module.html#resolver\">resolver</a>’а.\n</p>"},{"directive":"fastcgi_param","defaultValue":"—","syntax":"fastcgi_param     параметр значение    [if_not_empty];","context":"http, server, location","description":"<p>\nЗадаёт <code><i>параметр</i></code>, который будет передаваться FastCGI-серверу.\nВ качестве значения можно использовать текст, переменные и их комбинации.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <code>fastcgi_param</code>.\n</p><p>\nНиже приведён пример минимально необходимых параметров для PHP:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_param SCRIPT_FILENAME /home/www/scripts/php$fastcgi_script_name;\nfastcgi_param QUERY_STRING    $query_string;\n</pre></blockquote><p> \n</p><p>\nПараметр <code>SCRIPT_FILENAME</code> используется в PHP для\nопределения имени скрипта, а в параметре <code>QUERY_STRING</code>\nпередаются параметры запроса.\n</p><p>\nЕсли скрипты обрабатывают запросы <code>POST</code>, то нужны\nещё три параметра:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_param REQUEST_METHOD  $request_method;\nfastcgi_param CONTENT_TYPE    $content_type;\nfastcgi_param CONTENT_LENGTH  $content_length;\n</pre></blockquote><p> \n</p><p>\nЕсли PHP был собран с параметром конфигурации\n<code>--enable-force-cgi-redirect</code>, то нужно передавать\nпараметр <code>REDIRECT_STATUS</code> со значением “200”:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_param REDIRECT_STATUS 200;\n</pre></blockquote><p> \n</p><p>\nЕсли директива указана с <code>if_not_empty</code> (1.1.11),\nто такой параметр с пустым значением передаваться на сервер не будет:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_param HTTPS           $https if_not_empty;\n</pre></blockquote><p> \n</p>"},{"directive":"fastcgi_no_cache","defaultValue":"—","syntax":"fastcgi_no_cache строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет сохраняться в кэш.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не будет сохранён:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_no_cache $cookie_nocache $arg_nocache$arg_comment;\nfastcgi_no_cache $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#fastcgi_cache_bypass\">fastcgi_cache_bypass</a>.\n</p>"},{"directive":"fastcgi_next_upstream_tries","defaultValue":"fastcgi_next_upstream_tries 0;","syntax":"fastcgi_next_upstream_tries число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает число допустимых попыток для передачи запроса\n<a href=\"#fastcgi_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"fastcgi_next_upstream_timeout","defaultValue":"fastcgi_next_upstream_timeout 0;","syntax":"fastcgi_next_upstream_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.5.\n            </p></div><p>\nОграничивает время, в течение которого возможна передача запроса\n<a href=\"#fastcgi_next_upstream\">следующему серверу</a>.\nЗначение <code>0</code> отключает это ограничение.\n</p>"},{"directive":"fastcgi_next_upstream","defaultValue":"fastcgi_next_upstream error timeout;","syntax":"fastcgi_next_upstream     error |    timeout |    invalid_header |    http_500 |    http_503 |    http_403 |    http_404 |    http_429 |    non_idempotent |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях запрос будет передан следующему серверу:\n</p> <dl class=\"compact\">\n\n<dt><code>error</code></dt>\n<dd>произошла ошибка соединения с сервером, передачи ему запроса или\nчтения заголовка ответа сервера;</dd>\n\n<dt><code>timeout</code></dt>\n<dd>произошёл таймаут во время соединения с сервером,\nпередачи ему запроса или чтения заголовка ответа сервера;</dd>\n\n<dt><code>invalid_header</code></dt>\n<dd>сервер вернул пустой или неверный ответ;</dd>\n\n<dt><code>http_500</code></dt>\n<dd>сервер вернул ответ с кодом 500;</dd>\n\n<dt><code>http_503</code></dt>\n<dd>сервер вернул ответ с кодом 503;</dd>\n\n<dt><code>http_403</code></dt>\n<dd>сервер вернул ответ с кодом 403;</dd>\n\n<dt><code>http_404</code></dt>\n<dd>сервер вернул ответ с кодом 404;</dd>\n\n<dt><code>http_429</code></dt>\n<dd>сервер вернул ответ с кодом 429 (1.11.13);</dd>\n\n<dt id=\"non_idempotent\"><code>non_idempotent</code></dt>\n<dd>обычно запросы с\n<a href=\"https://tools.ietf.org/html/rfc7231#section-4.2.2\">неидемпотентным</a>\nметодом\n(<code>POST</code>, <code>LOCK</code>, <code>PATCH</code>)\nне передаются на другой сервер,\nесли запрос серверу группы уже был отправлен (1.9.13);\nвключение параметра явно разрешает повторять подобные запросы;\n</dd>\n\n\n<dt><code>off</code></dt>\n<dd>запрещает передачу запроса следующему серверу.</dd>\n\n</dl><p> \n</p><p>\nНеобходимо понимать, что передача запроса следующему серверу возможна\nтолько при условии, что клиенту ещё ничего не передавалось.\nТо есть, если ошибка или таймаут возникли в середине передачи ответа,\nто исправить это уже невозможно.\n</p><p>\nДиректива также определяет, что считается\n<a href=\"ngx_http_upstream_module.html#max_fails\">неудачной\nпопыткой</a> работы с сервером.\nСлучаи <code>error</code>, <code>timeout</code> и\n<code>invalid_header</code>\nвсегда считаются неудачными попытками, даже если они не указаны в директиве.\nСлучаи <code>http_500</code>, <code>http_503</code>\nи <code>http_429</code>\nсчитаются неудачными попытками, только если они указаны в директиве.\nСлучаи <code>http_403</code> и <code>http_404</code>\nникогда не считаются неудачными попытками.\n</p><p>\nПередача запроса следующему серверу может быть ограничена по\n<a href=\"#fastcgi_next_upstream_tries\">количеству попыток</a>\nи по <a href=\"#fastcgi_next_upstream_timeout\">времени</a>.\n</p>"},{"directive":"fastcgi_max_temp_file_size","defaultValue":"fastcgi_max_temp_file_size 1024m;","syntax":"fastcgi_max_temp_file_size размер;","context":"http, server, location","description":"<p>\nЕсли включена <a href=\"#fastcgi_buffering\">буферизация</a> ответов\nFastCGI-сервера, и ответ не вмещается целиком в буферы,\nзаданные директивами <a href=\"#fastcgi_buffer_size\">fastcgi_buffer_size</a> и\n<a href=\"#fastcgi_buffers\">fastcgi_buffers</a>, часть ответа может быть записана во временный файл.\nЭта директива задаёт максимальный <code><i>размер</i></code> временного файла.\nРазмер данных, сбрасываемых во временный файл за один раз, задаётся\nдирективой <a href=\"#fastcgi_temp_file_write_size\">fastcgi_temp_file_write_size</a>.\n</p><p>\nЗначение 0 отключает возможность буферизации ответов во временные файлы.\n</p><p>\n</p> <blockquote class=\"note\">\nДанное ограничение не распространяется на ответы,\nкоторые будут <a href=\"#fastcgi_cache\">закэшированы</a>\nили <a href=\"#fastcgi_store\">сохранены</a> на диске.\n</blockquote><p> \n</p>"},{"directive":"fastcgi_limit_rate","defaultValue":"fastcgi_limit_rate 0;","syntax":"fastcgi_limit_rate скорость;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nОграничивает скорость чтения ответа от FastCGI-сервера.\n<code><i>Скорость</i></code> задаётся в байтах в секунду.\nЗначение 0 отключает ограничение скорости.\nОграничение устанавливается на запрос,\nпоэтому, если nginx одновременно\nоткроет два соединения к FastCGI-серверу,\nсуммарная скорость будет вдвое выше заданного ограничения.\nОграничение работает только в случае, если включена\n<a href=\"#fastcgi_buffering\">буферизация</a> ответов FastCGI-сервера.\n</p>"},{"directive":"fastcgi_keep_conn","defaultValue":"fastcgi_keep_conn off;","syntax":"fastcgi_keep_conn on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.4.\n            </p></div><p>\nПо умолчанию FastCGI-сервер будет закрывать соединение сразу же\nпосле отправки ответа.\nПри установке значения <code>on</code> nginx указывает\nFastCGI-серверу оставлять соединения открытыми.\nЭто в частности требуется для функционирования\n<a href=\"ngx_http_upstream_module.html#keepalive\">постоянных\nсоединений</a> с FastCGI-серверами.\n</p>"},{"directive":"fastcgi_intercept_errors","defaultValue":"fastcgi_intercept_errors off;","syntax":"fastcgi_intercept_errors on | off;","context":"http, server, location","description":"<p>\nОпределяет, передавать ли клиенту ответы FastCGI-сервера с кодом\nбольше либо равным 300,\nили же перехватывать их и перенаправлять на обработку nginx’у с помощью\nдирективы <a href=\"ngx_http_core_module.html#error_page\">error_page</a>.\n</p>"},{"directive":"fastcgi_index","defaultValue":"—","syntax":"fastcgi_index имя;","context":"http, server, location","description":"<p>\nЗадаёт имя файла, который при создании переменной\n<code>$fastcgi_script_name</code> будет добавляться после URI,\nесли URI заканчивается слэшом.\nНапример, при таких настройках\n</p> <blockquote class=\"example\"><pre>\nfastcgi_index index.php;\nfastcgi_param SCRIPT_FILENAME /home/www/scripts/php$fastcgi_script_name;\n</pre></blockquote><p> \nи запросе “<code>/page.php</code>”\nпараметр <code>SCRIPT_FILENAME</code> будет равен\n“<code>/home/www/scripts/php/page.php</code>”,\nа при запросе “<code>/</code>” - \n“<code>/home/www/scripts/php/index.php</code>”.\n</p>"},{"directive":"fastcgi_ignore_headers","defaultValue":"—","syntax":"fastcgi_ignore_headers поле ...;","context":"http, server, location","description":"<p>\nЗапрещает обработку некоторых полей заголовка из ответа FastCGI-сервера.\nВ директиве можно указать поля “X-Accel-Redirect”,\n“X-Accel-Expires”, “X-Accel-Limit-Rate” (1.1.6),\n“X-Accel-Buffering” (1.1.6),\n“X-Accel-Charset” (1.1.6), “Expires”,\n“Cache-Control”, “Set-Cookie” (0.8.44)\nи “Vary” (1.7.7).\n</p><p>\nЕсли не запрещено, обработка этих полей заголовка заключается в следующем:\n</p> <ul>\n\n<li>\n“X-Accel-Expires”, “Expires”,\n“Cache-Control”, “Set-Cookie”\nи “Vary”\nзадают параметры <a href=\"#fastcgi_cache_valid\">кэширования</a> ответа;\n</li>\n\n<li>\n“X-Accel-Redirect” производит\n<a href=\"ngx_http_core_module.html#internal\">внутреннее\nперенаправление</a> на указанный URI;\n</li>\n\n<li>\n“X-Accel-Limit-Rate” задаёт\n<a href=\"ngx_http_core_module.html#limit_rate\">ограничение\nскорости</a> передачи ответа клиенту;\n</li>\n\n<li>\n“X-Accel-Buffering” включает или выключает\n<a href=\"#fastcgi_buffering\">буферизацию</a> ответа;\n</li>\n\n<li>\n“X-Accel-Charset” задаёт желаемую\n<a href=\"ngx_http_charset_module.html#charset\">кодировку</a>\nответа.\n</li>\n\n</ul><p> \n</p>"},{"directive":"fastcgi_ignore_client_abort","defaultValue":"fastcgi_ignore_client_abort off;","syntax":"fastcgi_ignore_client_abort on | off;","context":"http, server, location","description":"<p>\nОпределяет, закрывать ли соединение с FastCGI-сервером\nв случае, если клиент закрыл соединение, не дождавшись ответа.\n</p>"},{"directive":"fastcgi_hide_header","defaultValue":"—","syntax":"fastcgi_hide_header поле;","context":"http, server, location","description":"<p>\nПо умолчанию\nnginx не передаёт клиенту поля заголовка “Status” и\n“X-Accel-...” из ответа FastCGI-сервера.\nДиректива <code>fastcgi_hide_header</code> задаёт дополнительные поля,\nкоторые не будут передаваться.\nЕсли же передачу полей нужно разрешить, можно воспользоваться\nдирективой <a href=\"#fastcgi_pass_header\">fastcgi_pass_header</a>.\n</p>"},{"directive":"fastcgi_force_ranges","defaultValue":"fastcgi_force_ranges off;","syntax":"fastcgi_force_ranges on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.7.\n            </p></div><p>\nВключает поддержку диапазонов запрашиваемых байт (byte-range)\nдля кэшированных и некэшированных ответов FastCGI-сервера\nвне зависимости от наличия поля “Accept-Ranges”\nв заголовках этих ответов.\n</p>"},{"directive":"fastcgi_connect_timeout","defaultValue":"fastcgi_connect_timeout 60s;","syntax":"fastcgi_connect_timeout время;","context":"http, server, location","description":"<p>\nЗадаёт таймаут для установления соединения с FastCGI-сервером.\nНеобходимо иметь в виду, что этот таймаут обычно не может превышать 75 секунд.\n</p>"},{"directive":"fastcgi_catch_stderr","defaultValue":"—","syntax":"fastcgi_catch_stderr строка;","context":"http, server, location","description":"<p>\nЗадаёт строку для поиска в потоке ошибок ответа,\nполученного от FastCGI-сервера.\nЕсли <code><i>строка</i></code> найдена, то считается, что FastCGI-сервер\nвернул <a href=\"#fastcgi_next_upstream\">неверный ответ</a>.\nЭто позволяет обрабатывать ошибки приложений в nginx, например:\n</p> <blockquote class=\"example\"><pre>\nlocation /php {\n    fastcgi_pass backend:9000;\n    ...\n    fastcgi_catch_stderr \"PHP Fatal error\";\n    fastcgi_next_upstream error timeout invalid_header;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"fastcgi_cache_valid","defaultValue":"—","syntax":"fastcgi_cache_valid [код ...] время;","context":"http, server, location","description":"<p>\nЗадаёт время кэширования для разных кодов ответа.\nНапример, директивы\n</p> <blockquote class=\"example\"><pre>\nfastcgi_cache_valid 200 302 10m;\nfastcgi_cache_valid 404      1m;\n</pre></blockquote><p> \nзадают время кэширования 10 минут для ответов с кодами 200 и 302\nи 1 минуту для ответов с кодом 404.\n</p><p>\nЕсли указано только <code><i>время</i></code> кэширования,\n</p> <blockquote class=\"example\"><pre>\nfastcgi_cache_valid 5m;\n</pre></blockquote><p> \nто кэшируются только ответы 200, 301 и 302.\n</p><p>\nКроме того, можно кэшировать любые ответы с помощью параметра\n<code>any</code>:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_cache_valid 200 302 10m;\nfastcgi_cache_valid 301      1h;\nfastcgi_cache_valid any      1m;\n</pre></blockquote><p> \n</p><p>\nПараметры кэширования могут также быть заданы непосредственно\nв заголовке ответа.\nТакой способ приоритетнее, чем задание времени кэширования с помощью директивы.\n</p> <ul>\n\n<li>\nПоле заголовка “X-Accel-Expires” задаёт время кэширования\nответа в секундах.\nЗначение 0 запрещает кэшировать ответ.\nЕсли значение начинается с префикса <code>@</code>, оно задаёт абсолютное\nвремя в секундах с начала эпохи, до которого ответ может быть закэширован.\n</li>\n\n<li>\nЕсли в заголовке нет поля “X-Accel-Expires”,\nпараметры кэширования определяются по полям заголовка\n“Expires” или “Cache-Control”.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Set-Cookie”,\nне будет кэшироваться.\n</li>\n\n<li>\nОтвет, в заголовке которого есть поле “Vary”\nсо специальным значением “<code>*</code>”,\nне будет кэшироваться (1.7.7).\nОтвет, в заголовке которого есть поле “Vary”\nс другим значением, будет закэширован\nс учётом соответствующих полей заголовка запроса (1.7.7).\n</li>\n\n</ul><p> \nОбработка одного или более из этих полей заголовка может быть отключена\nпри помощи директивы <a href=\"#fastcgi_ignore_headers\">fastcgi_ignore_headers</a>.\n</p>"},{"directive":"fastcgi_cache_use_stale","defaultValue":"fastcgi_cache_use_stale off;","syntax":"fastcgi_cache_use_stale     error |    timeout |    invalid_header |    updating |    http_500 |    http_503 |    http_403 |    http_404 |    http_429 |    off    ...;","context":"http, server, location","description":"<p>\nОпределяет, в каких случаях можно использовать устаревший закэшированный ответ.\nПараметры директивы совпадают с параметрами\nдирективы <a href=\"#fastcgi_next_upstream\">fastcgi_next_upstream</a>.\n</p><p>\nПараметр <code>error</code> также позволяет использовать\nустаревший закэшированный ответ при невозможности выбора\nFastCGI-сервера для обработки запроса.\n</p>"},{"directive":"fastcgi_cache_revalidate","defaultValue":"fastcgi_cache_revalidate off;","syntax":"fastcgi_cache_revalidate on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nРазрешает ревалидацию просроченных элементов кэша при помощи\nусловных запросов с полями заголовка\n“If-Modified-Since” и “If-None-Match”.\n</p>"},{"directive":"fastcgi_cache_purge","defaultValue":"—","syntax":"fastcgi_cache_purge строка ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.7.\n            </p></div><p>\nЗадаёт условия, при которых запрос будет считаться запросом\nна очистку кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто запись в кэше с соответствующим\n<a href=\"#fastcgi_cache_key\">ключом кэширования</a> удаляется.\nВ результате успешной операции возвращается ответ с кодом\n204 (No Content).\n</p><p>\nЕсли <a href=\"#fastcgi_cache_key\">ключ кэширования</a>\nзапроса на очистку заканчивается\nзвёздочкой (“<code>*</code>”), то все записи в кэше, соответствующие\nэтой маске, будут удалены из кэша.\nТем не менее, эти записи будут оставаться на диске или до момента удаления\nиз-за <a href=\"#fastcgi_cache_path\">отсутствия обращения к данным</a>,\nили до обработки их процессом “<a href=\"#purger\">cache purger</a>” (1.7.12),\nили до попытки клиента получить к ним доступ.\n</p><p>\nПример конфигурации:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_cache_path /data/nginx/cache keys_zone=cache_zone:10m;\n\nmap $request_method $purge_method {\n    PURGE   1;\n    default 0;\n}\n\nserver {\n    ...\n    location / {\n        fastcgi_pass        http://backend;\n        fastcgi_cache       cache_zone;\n        fastcgi_cache_key   $uri;\n        fastcgi_cache_purge $purge_method;\n    }\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nФункциональность доступна как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>.\n</blockquote><p> \n</p>"},{"directive":"fastcgi_cache_path","defaultValue":"—","syntax":"fastcgi_cache_path     путь    [levels=уровни]    [use_temp_path=on|off]    keys_zone=имя:размер    [inactive=время]    [max_size=размер]    [manager_files=число]    [manager_sleep=время]    [manager_threshold=время]    [loader_files=число]    [loader_sleep=время]    [loader_threshold=время]    [purger=on|off]    [purger_files=число]    [purger_sleep=время]    [purger_threshold=время];","context":"http","description":"<p>\nЗадаёт путь и другие параметры кэша.\nДанные кэша хранятся в файлах.\nКлючом и именем файла в кэше является результат функции MD5\nот проксированного URL.\nПараметр <code>levels</code> задаёт уровни иерархии кэша:\nможно задать от 1 до 3 уровней, на каждом уровне допускаются значения 1 или 2.\nНапример, при использовании\n</p> <blockquote class=\"example\"><pre>\nfastcgi_cache_path /data/nginx/cache levels=1:2 keys_zone=one:10m;\n</pre></blockquote><p> \nимена файлов в кэше будут такого вида:\n</p> <blockquote class=\"example\"><pre>\n/data/nginx/cache/<strong>c</strong>/<strong>29</strong>/b7f54b2df7773722d382f4809d650<strong>29c</strong>\n</pre></blockquote><p> \n</p><p>\nКэшируемый ответ сначала записывается во временный файл, а потом этот файл\nпереименовывается.\nНачиная с версии 0.8.9 временные файлы и кэш\nмогут располагаться на разных файловых системах.\nОднако нужно учитывать,\nчто в этом случае вместо дешёвой операции переименовывания в пределах\nодной файловой системы файл копируется с одной файловой системы на другую.\nПоэтому лучше, если кэш будет находиться на той же файловой\nсистеме, что и каталог с временными файлами.\nКакой из каталогов будет использоваться для временных файлов\nопределяется параметром <code>use_temp_path</code> (1.7.10).\nЕсли параметр не задан или установлен в значение “<code>on</code>”,\nто будет использоваться каталог, задаваемый директивой\n<a href=\"#fastcgi_temp_path\">fastcgi_temp_path</a> для данного location.\nЕсли параметр установлен в значение “<code>off</code>”,\nто временные файлы будут располагаться непосредственно в каталоге кэша.\n</p><p>\nКроме того, все активные ключи и информация о данных хранятся в зоне\nразделяемой памяти, <code><i>имя</i></code> и <code><i>размер</i></code> которой\nзадаются параметром <code>keys_zone</code>.\nЗоны размером в 1 мегабайт достаточно для хранения около 8 тысяч ключей.\n</p><p>\nЕсли к данным кэша не обращаются в течение времени, заданного параметром\n<code>inactive</code>, то данные удаляются, независимо от их свежести.\nПо умолчанию <code>inactive</code> равен 10 минутам.\n</p><p>\nСпециальный процесс “cache manager” следит за максимальным размером кэша,\nзаданным параметром <code>max_size</code>, и при превышении\nего размеров удаляет наименее востребованные данные.\nУдаление данных происходит итерациями, настраиваемыми параметрами (1.11.5)\n<code>manager_files</code>,\n<code>manager_threshold</code> и\n<code>manager_sleep</code>.\nЗа одну итерацию загружается не более <code>manager_files</code>\nэлементов (по умолчанию 100).\nВремя работы одной итерации ограничено параметром\n<code>manager_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>manager_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nЧерез минуту после старта активируется специальный процесс “cache loader”,\nкоторый загружает в зону кэша информацию о ранее закэшированных данных,\nхранящихся на файловой системе.\nЗагрузка также происходит итерациями.\nЗа одну итерацию загружается не более <code>loader_files</code>\nэлементов (по умолчанию 100).\nКроме того, время работы одной итерации ограничено параметром\n<code>loader_threshold</code> (по умолчанию 200 миллисекунд).\nМежду итерациями делается пауза на время, заданное параметром\n<code>loader_sleep</code> (по умолчанию 50 миллисекунд).\n</p><p>\nКроме того,\nследующие параметры доступны как часть\n<a href=\"http://nginx.com/products/\">коммерческой подписки</a>:\n</p><p>\n</p> <dl class=\"compact\">\n\n<dt id=\"purger\">\n<code>purger</code>=<code>on</code>|<code>off</code>\n</dt>\n<dd>\nУказывает, будут ли записи в кэше, соответствующие\n<a href=\"#fastcgi_cache_purge\">маске</a>,\nудалены с диска при помощи процесса “cache purger” (1.7.12).\nУстановка параметра в значение <code>on</code>\n(по умолчанию <code>off</code>)\nактивирует процесс “cache purger”, который\nпроходит по всем записям в кэше\nи удаляет записи, соответствующие этой маске.\n</dd>\n\n<dt id=\"purger_files\">\n<code>purger_files</code>=<code><i>число</i></code>\n</dt>\n<dd>\nЗадаёт число элементов, которые будут сканироваться за одну итерацию (1.7.12).\nПо умолчанию <code>purger_files</code> равен 10.\n</dd>\n\n<dt id=\"purger_threshold\">\n<code>purger_threshold</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт продолжительность одной итерации (1.7.12).\nПо умолчанию <code>purger_threshold</code> равен 50 миллисекундам.\n</dd>\n\n<dt id=\"purger_sleep\">\n<code>purger_sleep</code>=<code><i>время</i></code>\n</dt>\n<dd>\nЗадаёт паузу между итерациями (1.7.12).\nПо умолчанию <code>purger_sleep</code> равен 50 миллисекундам.\n</dd>\n\n</dl><p> \n</p><p>\n</p> <blockquote class=\"note\">\nВ версиях 1.7.3, 1.7.7 и 1.11.10 формат заголовка кэша был изменён.\nПри обновлении на более новую версию nginx\nранее закэшированные ответы будут считаться недействительными.\n</blockquote><p> \n</p>"},{"directive":"fastcgi_cache_min_uses","defaultValue":"fastcgi_cache_min_uses 1;","syntax":"fastcgi_cache_min_uses число;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> запросов, после которого ответ будет закэширован.\n</p>"},{"directive":"fastcgi_cache_methods","defaultValue":"fastcgi_cache_methods GET HEAD;","syntax":"fastcgi_cache_methods     GET |    HEAD |    POST    ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.7.59.\n            </p></div><p>\nЕсли метод запроса клиента указан в этой директиве,\nто ответ будет закэширован.\nМетоды “<code>GET</code>” и “<code>HEAD</code>” всегда добавляются\nв список, но тем не менее рекомендуется перечислять их явно.\nСм. также директиву <a href=\"#fastcgi_no_cache\">fastcgi_no_cache</a>.\n</p>"},{"directive":"fastcgi_cache_max_range_offset","defaultValue":"—","syntax":"fastcgi_cache_max_range_offset число;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.6.\n            </p></div><p>\nЗадаёт смещение в байтах для запросов с указанием диапазона запрашиваемых байт\n(byte-range requests).\nЕсли диапазон находится за указанным смещением,\nrange-запрос будет передан на FastCGI-сервер\nи ответ не будет закэширован.\n</p>"},{"directive":"fastcgi_cache_lock_timeout","defaultValue":"fastcgi_cache_lock_timeout 5s;","syntax":"fastcgi_cache_lock_timeout время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЗадаёт таймаут для <a href=\"#fastcgi_cache_lock\">fastcgi_cache_lock</a>.\nПо истечении указанного <code><i>времени</i></code>\nзапрос будет передан на FastCGI-сервер,\nоднако ответ не будет закэширован.\n</p> <blockquote class=\"note\">\nДо версии 1.7.8 такой ответ мог быть закэширован.\n</blockquote><p> \n</p>"},{"directive":"fastcgi_cache_lock_age","defaultValue":"fastcgi_cache_lock_age 5s;","syntax":"fastcgi_cache_lock_age время;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.8.\n            </p></div><p>\nЕсли последний запрос, переданный на FastCGI-сервер\nдля заполнения нового элемента кэша,\nне завершился за указанное <code><i>время</i></code>,\nна FastCGI-сервер может быть передан ещё один запрос.\n</p>"},{"directive":"fastcgi_cache_lock","defaultValue":"fastcgi_cache_lock off;","syntax":"fastcgi_cache_lock on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.12.\n            </p></div><p>\nЕсли включено, одновременно только одному запросу будет позволено\nзаполнить новый элемент кэша, идентифицируемый согласно директиве\n<a href=\"#fastcgi_cache_key\">fastcgi_cache_key</a>, передав запрос на FastCGI-сервер.\nОстальные запросы этого же элемента будут либо ожидать\nпоявления ответа в кэше, либо освобождения блокировки\nэтого элемента, в течение времени, заданного директивой\n<a href=\"#fastcgi_cache_lock_timeout\">fastcgi_cache_lock_timeout</a>.\n</p>"},{"directive":"fastcgi_cache_key","defaultValue":"—","syntax":"fastcgi_cache_key строка;","context":"http, server, location","description":"<p>\nЗадаёт ключ для кэширования, например,\n</p> <blockquote class=\"example\"><pre>\nfastcgi_cache_key localhost:9000$request_uri;\n</pre></blockquote><p> \n</p>"},{"directive":"fastcgi_cache_bypass","defaultValue":"—","syntax":"fastcgi_cache_bypass строка ...;","context":"http, server, location","description":"<p>\nЗадаёт условия, при которых ответ не будет браться из кэша.\nЕсли значение хотя бы одного из строковых параметров непустое и не равно “0”,\nто ответ не берётся из кэша:\n</p> <blockquote class=\"example\"><pre>\nfastcgi_cache_bypass $cookie_nocache $arg_nocache$arg_comment;\nfastcgi_cache_bypass $http_pragma    $http_authorization;\n</pre></blockquote><p> \nМожно использовать совместно с директивой <a href=\"#fastcgi_no_cache\">fastcgi_no_cache</a>.\n</p>"},{"directive":"fastcgi_cache_background_update","defaultValue":"fastcgi_cache_background_update off;","syntax":"fastcgi_cache_background_update on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.10.\n            </p></div><p>\nПозволяет запустить фоновый подзапрос\nдля обновления просроченного элемента кэша,\nв то время как клиенту возвращается устаревший закэшированный ответ.\nИспользование устаревшего закэшированного ответа в момент его обновления\nдолжно быть\n<a href=\"#fastcgi_cache_use_stale_updating\">разрешено</a>.\n</p>"},{"directive":"fastcgi_cache","defaultValue":"fastcgi_cache off;","syntax":"fastcgi_cache зона | off;","context":"http, server, location","description":"<p>\nЗадаёт зону разделяемой памяти, используемой для кэширования.\nОдна и та же зона может использоваться в нескольких местах.\nВ значении параметра можно использовать переменные (1.7.9).\nПараметр <code>off</code> запрещает кэширование, унаследованное\nс предыдущего уровня конфигурации.\n</p>"},{"directive":"fastcgi_busy_buffers_size","defaultValue":"fastcgi_busy_buffers_size 8k|16k;","syntax":"fastcgi_busy_buffers_size размер;","context":"http, server, location","description":"<p>\nПри включённой <a href=\"#fastcgi_buffering\">буферизации</a> ответов\nFastCGI-сервера, ограничивает суммарный <code><i>размер</i></code>\nбуферов, которые могут быть заняты для отправки ответа клиенту, пока\nответ ещё не прочитан целиком.\nОставшиеся буферы тем временем могут использоваться для чтения ответа\nи, при необходимости, буферизации части ответа во временный файл.\nПо умолчанию <code><i>размер</i></code> ограничен двумя буферами, заданными\nдирективами <a href=\"#fastcgi_buffer_size\">fastcgi_buffer_size</a> и <a href=\"#fastcgi_buffers\">fastcgi_buffers</a>.\n</p>"},{"directive":"fastcgi_buffers","defaultValue":"fastcgi_buffers 8 4k|8k;","syntax":"fastcgi_buffers число размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>число</i></code> и <code><i>размер</i></code> буферов\nдля одного соединения,\nв которые будет читаться ответ, получаемый от FastCGI-сервера.\nПо умолчанию размер одного буфера равен размеру страницы.\nВ зависимости от платформы это или 4K, или 8K.\n</p>"},{"directive":"fastcgi_buffering","defaultValue":"fastcgi_buffering on;","syntax":"fastcgi_buffering on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.5.6.\n            </p></div><p>\nРазрешает или запрещает использовать буферизацию ответов FastCGI-сервера.\n</p><p>\nЕсли буферизация включена, то nginx принимает ответ FastCGI-сервера\nкак можно быстрее, сохраняя его в буферы, заданные директивами\n<a href=\"#fastcgi_buffer_size\">fastcgi_buffer_size</a> и <a href=\"#fastcgi_buffers\">fastcgi_buffers</a>.\nЕсли ответ не вмещается целиком в память, то его часть может быть записана\nна диск во <a href=\"#fastcgi_temp_path\">временный файл</a>.\nЗапись во временные файлы контролируется директивами\n<a href=\"#fastcgi_max_temp_file_size\">fastcgi_max_temp_file_size</a> и\n<a href=\"#fastcgi_temp_file_write_size\">fastcgi_temp_file_write_size</a>.\n</p><p>\nЕсли буферизация выключена, то ответ синхронно передаётся клиенту сразу же\nпо мере его поступления.\nnginx не пытается считать весь ответ FastCGI-сервера.\nМаксимальный размер данных, который nginx может принять от сервера\nза один раз, задаётся директивой <a href=\"#fastcgi_buffer_size\">fastcgi_buffer_size</a>.\n</p><p>\nБуферизация может быть также включена или выключена путём передачи\nзначения “<code>yes</code>” или “<code>no</code>” в поле\n“X-Accel-Buffering” заголовка ответа.\nЭту возможность можно запретить с помощью директивы\n<a href=\"#fastcgi_ignore_headers\">fastcgi_ignore_headers</a>.\n</p>"},{"directive":"fastcgi_buffer_size","defaultValue":"fastcgi_buffer_size 4k|8k;","syntax":"fastcgi_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> буфера, в который будет читаться\nпервая часть ответа, получаемого от FastCGI-сервера.\nВ этой части ответа находится, как правило, небольшой заголовок ответа.\nПо умолчанию размер одного буфера равен размеру страницы памяти.\nВ зависимости от платформы это или 4K, или 8K,\nоднако его можно сделать меньше.\n</p>"},{"directive":"fastcgi_bind","defaultValue":"—","syntax":"fastcgi_bind     адрес    [transparent] |    off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.22.\n            </p></div><p>\nЗадаёт локальный IP-адрес с необязательным портом (1.11.2),\nкоторый будет использоваться в исходящих соединениях с FastCGI-сервером.\nВ значении параметра допустимо использование переменных (1.3.12).\nСпециальное значение <code>off</code> (1.3.12) отменяет действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>fastcgi_bind</code>, позволяя системе\nсамостоятельно выбирать локальный IP-адрес и порт.\n</p>"},{"directive":"f4f_buffer_size","defaultValue":"f4f_buffer_size 512k;","syntax":"f4f_buffer_size размер;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>размер</i></code> буфера, в который будет\nчитаться индексный файл <code>.f4x</code>.\n</p>"},{"directive":"f4f","defaultValue":"—","syntax":"f4f;","context":"location","description":"<p>\nВключает обработку данным модулем во вложенном location.\n</p>"},{"directive":"expires","defaultValue":"expires off;","syntax":"expires [modified] время;expires     epoch |    max |    off;","context":"http, server, location, if в location","description":"<p>\nРазрешает или запрещает добавлять или менять поля “Expires”\nи “Cache-Control” в заголовке ответа при условии, что код ответа\nравен 200, 201, 204, 206, 301, 302, 303, 304, 307 или 308.\nВ качестве параметра можно задать положительное или отрицательное\n<a href=\"../syntax.html\">время</a>.\n</p><p>\nВремя в поле “Expires” получается как сумма текущего времени\nи времени, заданного в директиве.\nЕсли используется параметр <code>modified</code> (0.7.0, 0.6.32),\nто время получается как сумма\nвремени модификации файла и времени, заданного в директиве.\n</p><p>\nКроме того, с помощью префикса “<code>@</code>” можно задать\nвремя суток (0.7.9, 0.6.34):\n</p> <blockquote class=\"example\"><pre>\nexpires @15h30m;\n</pre></blockquote><p> \n</p><p>\nПараметр <code>epoch</code> соответствует абсолютному времени\n“<code>Thu, 01 Jan 1970 00:00:01 GMT</code>”\n(1 января 1970 года 00:00:01 GMT).\nСодержимое поля “Cache-Control” зависит от знака\nзаданного времени:\n</p> <ul class=\"compact\">\n\n<li>\nотрицательное время — “Cache-Control: no-cache”.\n</li>\n\n<li>\nположительное или равное нулю время —\n“Cache-Control: max-age=<code><i>t</i></code>”,\nгде <code><i>t</i></code> это время в секундах, заданное в директиве.\n</li>\n\n</ul><p> \n</p><p>\nПараметр <code>max</code> задаёт время\n“<code>Thu, 31 Dec 2037 23:55:55 GMT</code>”\n(31 декабря 2037 23:55:55 GMT) для поля “Expires”\nи 10 лет для поля “Cache-Control”.\n</p><p>\nПараметр <code>off</code> запрещает добавлять или менять поля\n“Expires” и “Cache-Control” в заголовке ответа.\n</p><p>\nВ значении последнего параметра можно использовать переменные (1.7.9):\n</p> <blockquote class=\"example\"><pre>\nmap $sent_http_content_type $expires {\n    default         off;\n    application/pdf 42d;\n    ~image/         max;\n}\n\nexpires $expires;\n</pre></blockquote><p> \n</p>"},{"directive":"events","defaultValue":"—","syntax":"events { ... }","context":"main","description":"<p>\nПредоставляет контекст конфигурационного файла, в котором указываются\nдирективы, влияющие на обработку соединений.\n</p>"},{"directive":"etag","defaultValue":"etag on;","syntax":"etag on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.3.3.\n            </p></div><p>\nРазрешает или запрещает автоматическую генерацию поля “ETag”\nзаголовка ответа для статических ресурсов.\n</p>"},{"directive":"error_page","defaultValue":"—","syntax":"error_page     код ...    [=[ответ]]    uri;","context":"http, server, location, if в location","description":"<p>\nЗадаёт URI, который будет показываться для указанных ошибок.\nВ значении <code><i>uri</i></code> можно использовать переменные.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nerror_page 404             /404.html;\nerror_page 500 502 503 504 /50x.html;\n</pre></blockquote><p> \n</p><p>\nПри этом делается внутреннее перенаправление на указанный <code><i>uri</i></code>,\nа метод запроса клиента меняется на “<code>GET</code>”\n(для всех методов, отличных от\n“<code>GET</code>” и “<code>HEAD</code>”).\n</p><p>\nКроме того, можно поменять код ответа на другой,\nиспользуя синтаксис вида “<code>=</code><code><i>ответ</i></code>”, например:\n</p> <blockquote class=\"example\"><pre>\nerror_page 404 =200 /empty.gif;\n</pre></blockquote><p> \n</p><p>\nЕсли ошибочный ответ обрабатывается проксированным сервером или\nFastCGI/uwsgi/SCGI-сервером, и этот сервер может вернуть разные коды ответов,\nнапример, 200, 302, 401 или 404, то можно выдавать возвращаемый им код:\n</p> <blockquote class=\"example\"><pre>\nerror_page 404 = /404.php;\n</pre></blockquote><p> \n</p><p>\nЕсли при внутреннем перенаправлении не нужно менять URI и метод,\nто можно передать обработку ошибки в именованный location:\n</p> <blockquote class=\"example\"><pre>\nlocation / {\n    error_page 404 = @fallback;\n}\n\nlocation @fallback {\n    proxy_pass http://backend;\n}\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nЕсли при обработке <code><i>uri</i></code> происходит ошибка,\nклиенту возвращается ответ с кодом последней случившейся ошибки.\n</blockquote><p> \n</p><p>\nТакже существует возможность использовать перенаправления URL для обработки\nошибок:\n</p> <blockquote class=\"example\"><pre>\nerror_page 403      http://example.com/forbidden.html;\nerror_page 404 =301 http://example.com/notfound.html;\n</pre></blockquote><p> \nВ этом случае по умолчанию клиенту возвращается код ответа 302.\nЕго можно изменить только на один из кодов ответа, относящихся к\nперенаправлениям (301, 302, 303, 307 и 308).\n</p><p>\nДирективы наследуются с предыдущего уровня при условии, что на данном уровне\nне описаны свои директивы <code>error_page</code>.\n</p>"},{"directive":"error_log","defaultValue":"error_log logs/error.log error;","syntax":"error_log файл [уровень];","context":"main, http, mail, stream, server, location","description":"<p>\nКонфигурирует запись в лог.\nНа одном уровне может использоваться несколько логов (1.5.2).\nЕсли на уровне конфигурации <code>main</code> запись лога в файл\nявно не задана, то используется файл по умолчанию.\n</p><p>\nПервый параметр задаёт <code><i>файл</i></code>, который будет хранить лог.\n\nСпециальное значение <code>stderr</code> выбирает стандартный файл ошибок.\nЗапись в <a href=\"syslog.html\">syslog</a> настраивается указанием префикса\n“<code>syslog:</code>”.\nЗапись в\n<a href=\"debugging_log.html#memory\">кольцевой буфер в памяти</a>\nнастраивается указанием префикса “<code>memory:</code>” и\n<code><i>размера</i></code> буфера и как правило используется для отладки (1.7.11).\n</p><p>\nВторой параметр определяет <code><i>уровень</i></code> лога\nи может принимать одно из следующих значений:\n<code>debug</code>, <code>info</code>, <code>notice</code>,\n<code>warn</code>, <code>error</code>, <code>crit</code>,\n<code>alert</code> или <code>emerg</code>.\nУровни лога, указанные выше, перечислены в порядке возрастания важности.\nПри установке определённого уровня в лог попадают все сообщения\nуказанного уровня и уровней большей важности.\nНапример, при стандартном уровне <code>error</code> в лог попадают\nсообщения уровней <code>error</code>, <code>crit</code>,\n<code>alert</code> и <code>emerg</code>.\nЕсли этот параметр не задан, используется <code>error</code>.\n</p> <blockquote class=\"note\">\nДля работы уровня лога <code>debug</code> необходимо сконфигурировать\nnginx с <code>--with-debug</code>,\nсм. “<a href=\"debugging_log.html\">Отладочный лог</a>”.\n</blockquote><p> \n\n</p> <blockquote class=\"note\">\nДиректива может быть указана на\nуровне <code>stream</code>\nначиная с версии 1.7.11\nи на уровне <code>mail</code>\nначиная с версии 1.9.0.\n</blockquote><p> \n</p>"},{"directive":"env","defaultValue":"env TZ;","syntax":"env переменная[=значение];","context":"main","description":"<p>\nПо умолчанию nginx удаляет все переменные окружения, унаследованные\nот своего родительского процесса, кроме переменной TZ.\nЭта директива позволяет сохранить часть унаследованных переменных,\nпоменять им значения или же создать новые переменные окружения.\nЭти переменные затем:\n</p> <ul class=\"compact\">\n\n<li>\nнаследуются во время\n<a href=\"control.html#upgrade\">обновления исполняемого файла на лету</a>;\n</li>\n\n<li>\nиспользуются модулем\n<a href=\"http/ngx_http_perl_module.html\">ngx_http_perl_module</a>;\n</li>\n\n<li>\nиспользуются рабочими процессами.\nСледует иметь в виду, что управление поведением системных библиотек\nподобным образом возможно не всегда, поскольку зачастую библиотеки используют\nпеременные только во время инициализации, то есть ещё до того, как их\nможно задать с помощью данной директивы.\nИсключением из этого является упомянутое выше\n<a href=\"control.html#upgrade\">обновление исполняемого файла на лету</a>.\n</li>\n\n</ul><p> \n</p><p>\nЕсли переменная TZ не описана явно, то она всегда наследуется\nи всегда доступна модулю\n<a href=\"http/ngx_http_perl_module.html\">ngx_http_perl_module</a>.\n</p><p>\nПример использования:\n</p> <blockquote class=\"example\"><pre>\nenv MALLOC_OPTIONS;\nenv PERL5LIB=/data/site/modules;\nenv OPENSSL_ALLOW_PROXY_CERTS=1;\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nПеременная окружения NGINX используется для внутренних целей nginx\nи не должна устанавливаться непосредственно самим пользователем.\n</blockquote><p> \n</p>"},{"directive":"empty_gif","defaultValue":"—","syntax":"empty_gif;","context":"location","description":"<p>\nРазрешает в содержащем location выдавать однопиксельный прозрачный GIF.\n</p>"},{"directive":"disable_symlinks","defaultValue":"disable_symlinks off;","syntax":"disable_symlinks off;disable_symlinks     on |    if_not_owner    [from=часть];","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.1.15.\n            </p></div><p>\nОпределяет, как следует поступать с символическими ссылками\nпри открытии файлов:\n</p> <dl class=\"compact\">\n\n<dt><code>off</code></dt>\n<dd>\nСимволические ссылки в пути допускаются и не проверяются.\nЭто стандартное поведение.\n</dd>\n\n<dt><code>on</code></dt>\n<dd>\nЕсли любой компонент пути является символической ссылкой,\nдоступ к файлу запрещается.\n</dd>\n\n<dt><code>if_not_owner</code></dt>\n<dd>\nДоступ к файлу запрещается, если любой компонент пути\nявляется символической ссылкой, а ссылка и объект, на\nкоторый она ссылается, имеют разных владельцев.\n</dd>\n\n<dt><code>from</code>=<code><i>часть</i></code></dt>\n<dd>\nПри проверке символических ссылок\n(параметры <code>on</code> и <code>if_not_owner</code>)\nобычно проверяются все компоненты пути.\nМожно не проверять символические ссылки в начальной части пути,\nуказав дополнительно параметр\n<code>from</code>=<code><i>часть</i></code>.\nВ этом случае символические ссылки проверяются лишь начиная\nс компонента пути, который следует за заданной начальной частью.\nЕсли значение не является начальной частью проверяемого пути,\nпуть проверяется целиком, как если бы этот параметр не был указан вовсе.\nЕсли значение целиком совпадает с именем файла,\nсимволические ссылки не проверяются.\nВ значении параметра можно использовать переменные.\n</dd>\n\n</dl><p> \n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\ndisable_symlinks on from=$document_root;\n</pre></blockquote><p> \n</p><p>\nЭта директива доступна только на системах, в которых есть\nинтерфейсы <code>openat()</code> и <code>fstatat()</code>.\nК таким системам относятся современные версии FreeBSD, Linux и Solaris.\n</p><p>\nПараметры <code>on</code> и <code>if_not_owner</code>\nтребуют дополнительных затрат на обработку.\n</p> <blockquote class=\"note\">\nНа системах, не поддерживающих операцию открытия каталогов только для поиска,\nдля использования этих параметров требуется, чтобы рабочие процессы\nимели право читать все проверяемые каталоги.\n</blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nМодули\n<a href=\"ngx_http_autoindex_module.html\">ngx_http_autoindex_module</a>,\n<a href=\"ngx_http_random_index_module.html\">ngx_http_random_index_module</a>\nи <a href=\"ngx_http_dav_module.html\">ngx_http_dav_module</a>\nв настоящий момент игнорируют эту директиву.\n</blockquote><p> \n</p>"},{"directive":"directio_alignment","defaultValue":"directio_alignment 512;","syntax":"directio_alignment размер;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.11.\n            </p></div><p>\nУстанавливает выравнивание для\n<a href=\"#directio\">directio</a>.\nВ большинстве случаев достаточно 512-байтового выравнивания, однако\nпри использовании XFS под Linux его нужно увеличить до 4K.\n</p>"},{"directive":"directio","defaultValue":"directio off;","syntax":"directio размер | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.7.7.\n            </p></div><p>\nРазрешает использовать флаги\n<code>O_DIRECT</code> (FreeBSD, Linux),\n<code>F_NOCACHE</code> (macOS)\nили функцию <code>directio()</code> (Solaris)\nпри чтении файлов, размер которых больше либо равен указанному.\nДиректива автоматически запрещает (0.7.15) использование\n<a href=\"#sendfile\">sendfile</a>\nдля данного запроса.\nРекомендуется использовать для больших файлов:\n</p> <blockquote class=\"example\"><pre>\ndirectio 4m;\n</pre></blockquote><p> \nили при использовании <a href=\"#aio\">aio</a> в Linux.\n</p>"},{"directive":"deny","defaultValue":"—","syntax":"deny     адрес |    CIDR |    unix: |    all;","context":"stream, server","description":"<p>\nЗапрещает доступ для указанной сети или адреса.\nЕсли указано специальное значение <code>unix:</code>,\nзапрещает доступ для всех UNIX-сокетов.\n</p>"},{"directive":"deny","defaultValue":"—","syntax":"deny     адрес |    CIDR |    unix: |    all;","context":"http, server, location, limit_except","description":"<p>\nЗапрещает доступ для указанной сети или адреса.\nЕсли указано специальное значение <code>unix:</code> (1.5.1),\nзапрещает доступ для всех UNIX-сокетов.\n</p>"},{"directive":"default_type","defaultValue":"default_type text/plain;","syntax":"default_type mime-тип;","context":"http, server, location","description":"<p>\nЗадаёт MIME-тип ответов по умолчанию.\nСоответствие расширений имён файлов MIME-типу ответов задаётся\nс помощью директивы <a href=\"#types\">types</a>.\n</p>"},{"directive":"debug_points","defaultValue":"—","syntax":"debug_points abort | stop;","context":"main","description":"<p>\nЭта директива используется для отладки.\n</p><p>\nВ случае обнаружения внутренней ошибки, например, утечки сокетов в момент\nперезапуска рабочих процессов, включение <code>debug_points</code>\nприводит к созданию core-файла (<code>abort</code>)\nили остановке процесса (<code>stop</code>) с целью последующей\nдиагностики с помощью системного отладчика.\n</p>"},{"directive":"debug_connection","defaultValue":"—","syntax":"debug_connection     адрес |    CIDR |    unix:;","context":"events","description":"<p>\nВключает отладочный лог для отдельных клиентских соединений.\nДля остальных соединений используется уровень лога, заданный директивой\n<a href=\"#error_log\">error_log</a>.\nОтлаживаемые соединения задаются IPv4 или IPv6 (1.3.0, 1.2.1)\nадресом или сетью.\nСоединение может быть также задано при помощи имени хоста.\nОтладочный лог для соединений через UNIX-сокеты (1.3.0, 1.2.1)\nвключается параметром “<code>unix:</code>”.\n</p> <blockquote class=\"example\"><pre>\nevents {\n    debug_connection 127.0.0.1;\n    debug_connection localhost;\n    debug_connection 192.0.2.0/24;\n    debug_connection ::1;\n    debug_connection 2001:0db8::/32;\n    debug_connection unix:;\n    ...\n}\n</pre></blockquote><p> \n</p> <blockquote class=\"note\">\nДля работы директивы необходимо сконфигурировать nginx с параметром\n<code>--with-debug</code>,\nсм. “<a href=\"debugging_log.html\">Отладочный лог</a>”.\n</blockquote><p> \n</p>"},{"directive":"dav_methods","defaultValue":"dav_methods off;","syntax":"dav_methods     off | метод ...;","context":"http, server, location","description":"<p>\nРазрешает указанные HTTP- и WebDAV-методы.\nПараметр <code>off</code> запрещает все методы, обрабатываемые\nданным модулем.\nПоддерживаются следующие методы:\n<code>PUT</code>, <code>DELETE</code>, <code>MKCOL</code>,\n<code>COPY</code> и <code>MOVE</code>.\n</p>"},{"directive":"dav_access","defaultValue":"dav_access user:rw;","syntax":"dav_access пользователи:права ...;","context":"http, server, location","description":"<p>\nЗадаёт права доступа для создаваемых файлов и каталогов,\nнапример,\n</p> <blockquote class=\"example\"><pre>\ndav_access user:rw group:rw all:r;\n</pre></blockquote><p> \n</p><p>\nЕсли заданы какие-либо права для <code>group</code> или\n<code>all</code>, то права для <code>user</code>\nуказывать необязательно:\n</p> <blockquote class=\"example\"><pre>\ndav_access group:rw all:r;\n</pre></blockquote><p> \n</p>"},{"directive":"daemon","defaultValue":"daemon on;","syntax":"daemon on | off;","context":"main","description":"<p>\nОпределяет, будет ли nginx запускаться в режиме демона.\nИспользуется в основном для разработки.\n</p>"},{"directive":"create_full_put_path","defaultValue":"create_full_put_path off;","syntax":"create_full_put_path on | off;","context":"http, server, location","description":"<p>\nПо спецификации WebDAV-метод PUT может создавать файл только в\nуже существующем каталоге.\nДанная директива разрешает создавать все необходимые промежуточные каталоги.\n</p>"},{"directive":"connection_pool_size","defaultValue":"connection_pool_size 256|512;","syntax":"connection_pool_size размер;","context":"http, server","description":"<p>\nПозволяет производить точную настройку выделения памяти\nпод конкретные соединения.\nЭта директива не оказывает существенного влияния на\nпроизводительность, и её не следует использовать.\nПо умолчанию размер равен\n256 байт на 32-битных платформах и 512 байт на 64-битных платформах.\n</p> <blockquote class=\"note\">\nДо версии 1.9.8 по умолчанию использовалось значение 256 на всех платформах.\n</blockquote><p> \n</p>"},{"directive":"client_max_body_size","defaultValue":"","syntax":"","context":"","description":null},{"directive":"client_header_timeout","defaultValue":"client_header_timeout 60s;","syntax":"client_header_timeout время;","context":"http, server","description":"<p>\nЗадаёт таймаут при чтении заголовка запроса клиента.\nЕсли по истечении этого времени клиент не передаст полностью заголовок,\nто клиенту возвращается ошибка\n408 (Request Time-out).\n</p>"},{"directive":"client_header_buffer_size","defaultValue":"client_header_buffer_size 1k;","syntax":"client_header_buffer_size размер;","context":"http, server","description":"<p>\nЗадаёт размер буфера для чтения заголовка запроса клиента.\nДля большинства запросов достаточно буфера размером в 1K байт.\nОднако если в запросе есть длинные cookies, или же запрос\nпришёл от WAP-клиента, то он может не поместиться в 1K.\nПоэтому, если строка запроса или поле заголовка запроса\nне помещаются полностью в этот буфер, то выделяются буферы\nбольшего размера, задаваемые директивой\n<a href=\"#large_client_header_buffers\">large_client_header_buffers</a>.\n</p>"},{"directive":"client_body_timeout","defaultValue":"","syntax":"","context":"","description":null},{"directive":"client_body_temp_path","defaultValue":"","syntax":"","context":"","description":null},{"directive":"client_body_in_single_buffer","defaultValue":"","syntax":"","context":"","description":null},{"directive":"client_body_in_file_only","defaultValue":"","syntax":"","context":"","description":null},{"directive":"client_body_buffer_size","defaultValue":"","syntax":"","context":"","description":null},{"directive":"chunked_transfer_encoding","defaultValue":"chunked_transfer_encoding on;","syntax":"chunked_transfer_encoding on | off;","context":"http, server, location","description":"<p>\nПозволяет запретить формат передачи данных частями (chunked transfer\nencoding) в HTTP/1.1.\nЭто может понадобиться при использовании программ, не поддерживающих\nchunked encoding, несмотря на требования стандарта.\n</p>"},{"directive":"charset_types","defaultValue":"charset_types text/html text/xml text/plain text/vnd.wap.wmlapplication/javascript application/rss+xml;","syntax":"charset_types mime-тип ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.7.9.\n            </p></div><p>\nРазрешает работу модуля в ответах с указанными MIME-типами\nв дополнение к “<code>text/html</code>”.\nСпециальное значение “<code>*</code>” соответствует любому MIME-типу\n(0.8.29).\n</p><p>\n</p> <blockquote class=\"note\">\nДо версии 1.5.4 по умолчанию вместо MIME-типа\n“<code>application/javascript</code>” использовался\n“<code>application/x-javascript</code>”.\n</blockquote><p> \n</p>"},{"directive":"charset_map","defaultValue":"—","syntax":"charset_map кодировка1 кодировка2 { ... }","context":"http","description":"<p>\nОписывает таблицу перекодирования из одной кодировки в другую.\nТаблица для обратного перекодирования строится на основании тех же данных.\nКоды символов задаются в шестнадцатеричном виде.\nНеописанные символы в пределах 80-FF заменяются на “<code>?</code>”.\nПри перекодировании из UTF-8 символы, отсутствующие в однобайтной кодировке,\nзаменяются на “<code>&amp;#XXXX;</code>”.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\ncharset_map koi8-r windows-1251 {\n    C0 FE ; # small yu\n    C1 E0 ; # small a\n    C2 E1 ; # small b\n    C3 F6 ; # small ts\n    ...\n}\n</pre></blockquote><p> \n</p><p>\nПри описании таблицы перекодирования в UTF-8, коды кодировки UTF-8 должны\nбыть указаны во второй колонке, например:\n</p> <blockquote class=\"example\"><pre>\ncharset_map koi8-r utf-8 {\n    C0 D18E ; # small yu\n    C1 D0B0 ; # small a\n    C2 D0B1 ; # small b\n    C3 D186 ; # small ts\n    ...\n}\n</pre></blockquote><p> \n</p><p>\nПолные таблицы преобразования из <code>koi8-r</code> в\n<code>windows-1251</code> и из <code>koi8-r</code> и\n<code>windows-1251</code> в <code>utf-8</code>\nвходят в дистрибутив и находятся в файлах <code>conf/koi-win</code>,\n<code>conf/koi-utf</code> и <code>conf/win-utf</code>.\n</p>"},{"directive":"charset","defaultValue":"charset off;","syntax":"charset кодировка | off;","context":"http, server, location, if в location","description":"<p>\nДобавляет указанную кодировку в поле “Content-Type”\nзаголовка ответа.\nЕсли эта кодировка отличается от указанной в директиве\n<a href=\"#source_charset\">source_charset</a>, то выполняется перекодирование.\n</p><p>\nПараметр <code>off</code> отменяет добавление кодировки\nв поле “Content-Type” заголовка ответа.\n</p><p>\nКодировка может быть задана с помощью переменной:\n</p> <blockquote class=\"example\"><pre>\ncharset $charset;\n</pre></blockquote><p> \nВ этом случае необходимо, чтобы все возможные значения переменной\nприсутствовали хотя бы один раз в любом месте конфигурации в виде\nдиректив <a href=\"#charset_map\">charset_map</a>, <a href=\"#charset\">charset</a> или\n<a href=\"#source_charset\">source_charset</a>.\nДля кодировок <code>utf-8</code>, <code>windows-1251</code>\nи <code>koi8-r</code> для этого достаточно включить в конфигурацию\nфайлы <code>conf/koi-win</code>, <code>conf/koi-utf</code> и\n<code>conf/win-utf</code>.\nДля других кодировок можно просто сделать фиктивную таблицу перекодировки,\nнапример:\n</p> <blockquote class=\"example\"><pre>\ncharset_map iso-8859-5 _ { }\n</pre></blockquote><p> \n</p><p>\nКроме того, кодировка может быть задана в поле “X-Accel-Charset”\nзаголовка ответа.\nЭту возможность можно запретить с помощью директив\n<a href=\"ngx_http_proxy_module.html#proxy_ignore_headers\">proxy_ignore_headers</a>,\n<a href=\"ngx_http_fastcgi_module.html#fastcgi_ignore_headers\">fastcgi_ignore_headers</a>,\n<a href=\"ngx_http_uwsgi_module.html#uwsgi_ignore_headers\">uwsgi_ignore_headers</a>\nи\n<a href=\"ngx_http_scgi_module.html#scgi_ignore_headers\">scgi_ignore_headers</a>.\n</p>"},{"directive":"break","defaultValue":"—","syntax":"break;","context":"server, location, if","description":"<p>\nЗавершает обработку текущего набора директив модуля\n<code>ngx_http_rewrite_module</code>.\n</p><p>\nЕсли директива указана внутри\n<a href=\"ngx_http_core_module.html#location\">location</a>,\nдальнейшая обработка запроса продолжается в этом location.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\nif ($slow) {\n    limit_rate 10k;\n    break;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"autoindex_localtime","defaultValue":"autoindex_localtime off;","syntax":"autoindex_localtime on | off;","context":"http, server, location","description":"<p>\nДля <a href=\"#autoindex_format\">формата</a> HTML\nопределяет, в какой временной зоне выводить время в листинге\nкаталога: в локальной или в UTC.\n</p>"},{"directive":"autoindex_format","defaultValue":"autoindex_format html;","syntax":"autoindex_format     html |    xml |    json |    jsonp;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.7.9.\n            </p></div><p>\nЗадаёт формат вывода листинга каталога.\n</p><p>\nПри использовании формата JSONP имя callback-функции\nзадаётся в аргументе запроса <code>callback</code>.\nЕсли аргумент отсутствует или имеет пустое значение,\nто используется формат JSON.\n</p><p>\nВывод в формате XML может быть преобразован при помощи модуля\n<a href=\"ngx_http_xslt_module.html\">ngx_http_xslt_module</a>.\n</p>"},{"directive":"autoindex_exact_size","defaultValue":"autoindex_exact_size on;","syntax":"autoindex_exact_size on | off;","context":"http, server, location","description":"<p>\nДля <a href=\"#autoindex_format\">формата</a> HTML\nопределяет, как выводить размеры файлов в листинге\nкаталога: точно или округляя до килобайт, мегабайт и гигабайт.\n</p>"},{"directive":"autoindex","defaultValue":"autoindex off;","syntax":"autoindex on | off;","context":"http, server, location","description":"<p>\nРазрешает или запрещает вывод листинга каталога.\n</p>"},{"directive":"auth_request_set","defaultValue":"—","syntax":"auth_request_set $переменная значение;","context":"http, server, location","description":"<p>\nУстанавливает <code><i>переменную</i></code> в запросе в заданное\n<code><i>значение</i></code> после завершения запроса авторизации.\nЗначение может содержать переменные из запроса авторизации,\nнапример, <code>$upstream_http_*</code>.\n</p>"},{"directive":"auth_request","defaultValue":"auth_request off;","syntax":"auth_request uri | off;","context":"http, server, location","description":"<p>\nВключает авторизацию, основанную на результате выполнения подзапроса,\nи задаёт URI, на который будет отправлен подзапрос.\n</p>"},{"directive":"auth_jwt_key_file","defaultValue":"—","syntax":"auth_jwt_key_file файл;","context":"http, server, location","description":"<p>\nЗадаёт <code><i>файл</i></code> в формате\n<a href=\"https://tools.ietf.org/html/rfc7517#section-5\">JSON Web Key Set</a>\nдля проверки подписи JWT.\nВ значении параметра допустимо использование переменных.\n</p>"},{"directive":"auth_jwt_header_set","defaultValue":"—","syntax":"auth_jwt_header_set $переменная имя;","context":"http","description":"<p>Эта директива появилась в версии 1.11.10.\n            </p></div><p>\nУстанавливает <code><i>переменную</i></code> в заданное\n<code><i>имя</i></code> параметра заголовка JOSE.\n</p>"},{"directive":"auth_jwt_claim_set","defaultValue":"—","syntax":"auth_jwt_claim_set $переменная имя;","context":"http","description":"<p>Эта директива появилась в версии 1.11.10.\n            </p></div><p>\nУстанавливает <code><i>переменную</i></code> в заданное\n<code><i>имя</i></code> параметра JWT claim.\n</p>"},{"directive":"auth_jwt","defaultValue":"auth_jwt off;","syntax":"auth_jwt     строка    [token=$переменная] |    off;","context":"http, server, location","description":"<p>\nВключает проверку JSON Web Token.\nЗаданная <code><i>строка</i></code> используется в качестве <code>realm</code>.\nВ значении параметра допустимо использование переменных.\n</p><p>\nНеобязательный параметр <code>token</code> задаёт переменную,\nсодержащую JSON Web Token.\nПо умолчанию JWT передаётся в заголовке “Authorization”\nв качестве\n<a href=\"https://tools.ietf.org/html/rfc6750\">Bearer Token</a>.\nJWT может также передаваться как кука или часть строки запроса:\n</p> <blockquote class=\"example\"><pre>\nauth_jwt \"closed site\" token=$cookie_auth_token;\n</pre></blockquote><p> \n</p><p>\nСпециальное значение <code>off</code> отменяет действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>auth_jwt</code>.\n</p>"},{"directive":"auth_http_timeout","defaultValue":"auth_http_timeout 60s;","syntax":"auth_http_timeout время;","context":"mail, server","description":"<p>\nЗадаёт таймаут общения с сервером аутентификации.\n</p>"},{"directive":"auth_http_pass_client_cert","defaultValue":"auth_http_pass_client_cert off;","syntax":"auth_http_pass_client_cert on | off;","context":"mail, server","description":"<p>Эта директива появилась в версии 1.7.11.\n            </p></div><p>\nДобавляет заголовок “Auth-SSL-Cert” с\n<a href=\"ngx_mail_ssl_module.html#ssl_verify_client\">клиентским</a>\nсертификатом в формате PEM (закодирован в формате urlencode)\nк запросам, посылаемым на сервер аутентификации.\n</p>"},{"directive":"auth_http_header","defaultValue":"—","syntax":"auth_http_header заголовок значение;","context":"mail, server","description":"<p>\nДобавляет указанный заголовок к запросам, посылаемым на сервер аутентификации.\nЗаголовок можно использовать в качестве shared secret для проверки,\nчто запрос поступил от nginx.\nНапример:\n</p> <blockquote class=\"example\"><pre>\nauth_http_header X-Auth-Key \"secret_string\";\n</pre></blockquote><p> \n</p>"},{"directive":"auth_http","defaultValue":"—","syntax":"auth_http URL;","context":"mail, server","description":"<p>\nЗадаёт URL HTTP-сервера аутентификации.\nПротокол описан <a href=\"#protocol\">ниже</a>.\n</p>"},{"directive":"auth_basic_user_file","defaultValue":"—","syntax":"auth_basic_user_file файл;","context":"http, server, location, limit_except","description":"<p>\nЗадаёт файл, в котором хранятся имена и пароли пользователей.\nФормат файла следующий:\n</p> <blockquote class=\"example\"><pre>\n# комментарий\nимя1:пароль1\nимя2:пароль2:комментарий\nимя3:пароль3\n</pre></blockquote><p> \nВ имени файла можно использовать переменные.\n</p><p>\nПоддерживаются следующие типы паролей:\n</p> <ul class=\"compact\">\n\n<li>\nзашифрованные функцией <code>crypt()</code>; могут быть созданы\nс помощью утилиты “<code>htpasswd</code>” из дистрибутива HTTP-сервера\nApache или команды “<code>openssl passwd</code>”;\n</li>\n\n<li>\nхэшированные с помощью алгоритма, основанного на MD5, по версии Apache (apr1);\nмогут быть созданы теми же инструментами;\n</li>\n\n<li>\nзаданные согласно синтаксису\n“<code>{</code><code><i>схема</i></code><code>}</code><code><i>данные</i></code>”\n(1.0.3+) как описано в\n<a href=\"https://tools.ietf.org/html/rfc2307#section-5.3\">RFC 2307</a>;\nв настоящий момент реализованы схемы <code>PLAIN</code> (в качестве\nпримера, не следует применять), <code>SHA</code> (1.3.13) (простое SHA-1\nхэширование, не следует применять) и <code>SSHA</code> (SHA-1 хэширование\nс солью, используется в некоторых программах, в частности OpenLDAP\nи Dovecot).\n<blockquote class=\"note\">\nПоддержка схемы <code>SHA</code> была добавлена лишь для облегчения\nпроцесса миграции файлов паролей с других веб-серверов.\nЕё не следует применять для новых паролей, т.к. используемое при этом\nSHA-1 хэширование без соли уязвимо к взлому при помощи\n<a href=\"http://en.wikipedia.org/wiki/Rainbow_attack\">радужных таблиц</a>.\n</blockquote>\n</li>\n\n</ul><p> \n</p>"},{"directive":"auth_basic","defaultValue":"auth_basic off;","syntax":"auth_basic строка | off;","context":"http, server, location, limit_except","description":"<p>\nВключает проверку имени и пароля пользователя по протоколу\n“HTTP Basic Authentication”.\nЗаданный параметр используется в качестве <code><i>realm</i></code>.\nВ значении параметра допустимо использование переменных (1.3.10, 1.2.7).\nСпециальное значение <code>off</code> позволяет отменить действие\nунаследованной с предыдущего уровня конфигурации\nдирективы <code>auth_basic</code>.\n</p>"},{"directive":"ancient_browser_value","defaultValue":"ancient_browser_value 1;","syntax":"ancient_browser_value строка;","context":"http, server, location","description":"<p>\nЗадаёт значение для переменных <code>$ancient_browser</code>.\n</p>"},{"directive":"ancient_browser","defaultValue":"—","syntax":"ancient_browser строка ...;","context":"http, server, location","description":"<p>\nЗадаёт подстроки, при нахождении которых в поле “User-Agent”\nзаголовка запроса браузер считается устаревшим.\nСпециальная строка “<code>netscape4</code>” соответствует\nрегулярному выражению “<code>^Mozilla/[1-4]</code>”.\n</p>"},{"directive":"allow","defaultValue":"—","syntax":"allow     адрес |    CIDR |    unix: |    all;","context":"stream, server","description":"<p>\nРазрешает доступ для указанной сети или адреса.\nЕсли указано специальное значение <code>unix:</code>,\nразрешает доступ для всех UNIX-сокетов.\n</p>"},{"directive":"allow","defaultValue":"—","syntax":"allow     адрес |    CIDR |    unix: |    all;","context":"http, server, location, limit_except","description":"<p>\nРазрешает доступ для указанной сети или адреса.\nЕсли указано специальное значение <code>unix:</code> (1.5.1),\nразрешает доступ для всех UNIX-сокетов.\n</p>"},{"directive":"alias","defaultValue":"—","syntax":"alias путь;","context":"location","description":"<p>\nЗадаёт замену для указанного location’а.\nНапример, при такой конфигурации\n</p> <blockquote class=\"example\"><pre>\nlocation /i/ {\n    alias /data/w3/images/;\n}\n</pre></blockquote><p> \nна запрос\n“<code>/i/top.gif</code>” будет отдан файл\n<code>/data/w3/images/top.gif</code>.\n</p><p>\nВ значении параметра <code><i>путь</i></code> можно использовать переменные,\nкроме <code>$document_root</code> и <code>$realpath_root</code>.\n</p><p>\nЕсли <code>alias</code> используется внутри location’а, заданного\nрегулярным выражением, то регулярное выражение должно содержать\nвыделения, а сам <code>alias</code> — ссылки на эти выделения\n(0.7.40), например:\n</p> <blockquote class=\"example\"><pre>\nlocation ~ ^/users/(.+\\.(?:gif|jpe?g|png))$ {\n    alias /data/w3/images/$1;\n}\n</pre></blockquote><p> \n</p><p>\nЕсли location и последняя часть значения директивы совпадают:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    alias /data/w3/images/;\n}\n</pre></blockquote><p> \nто лучше воспользоваться директивой\n<a href=\"#root\">root</a>:\n</p> <blockquote class=\"example\"><pre>\nlocation /images/ {\n    root /data/w3;\n}\n</pre></blockquote><p> \n</p>"},{"directive":"aio_write","defaultValue":"aio_write off;","syntax":"aio_write on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.9.13.\n            </p></div><p>\nПри включённом <a href=\"#aio\">aio</a> разрешает его использование для записи файлов.\nВ настоящий момент это работает только при использовании\n<code>aio threads</code>\nи ограничено записью временных файлов с данными,\nполученными от проксируемых серверов.\n</p>"},{"directive":"aio","defaultValue":"aio off;","syntax":"aio     on |    off |    threads[=pool];","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.8.11.\n            </p></div><p>\nРазрешает или запрещает использование файлового асинхронного ввода-вывода (AIO)\nво FreeBSD и Linux:\n</p> <blockquote class=\"example\"><pre>\nlocation /video/ {\n    aio            on;\n    output_buffers 1 64k;\n}\n</pre></blockquote><p> \n</p><p>\nВо FreeBSD AIO можно использовать, начиная с FreeBSD 4.3.\nДо FreeBSD 11.0\nAIO можно либо собрать в ядре статически:\n</p> <blockquote class=\"example\"><pre>\noptions VFS_AIO\n</pre></blockquote><p> \nлибо загрузить динамически через загружаемый модуль ядра:\n</p> <blockquote class=\"example\"><pre>\nkldload aio\n</pre></blockquote><p> \n</p><p>\nВ Linux AIO можно использовать только начиная с версии ядра 2.6.22.\nКроме того, необходимо также дополнительно включить\n<a href=\"#directio\">directio</a>,\nиначе чтение будет блокирующимся:\n</p> <blockquote class=\"example\"><pre>\nlocation /video/ {\n    aio            on;\n    directio       512;\n    output_buffers 1 128k;\n}\n</pre></blockquote><p> \n</p><p>\nВ Linux\n<a href=\"#directio\">directio</a>\nможно использовать только для чтения блоков, выравненных\nна границу 512 байт (или 4К для XFS).\nНевыравненный конец файла будет читаться блокированно.\nТо же относится к запросам с указанием диапазона запрашиваемых байт\n(byte-range requests) и к запросам FLV не с начала файла: чтение\nневыравненных начала и конца ответа будет блокирующимся.\n</p><p>\nПри одновременном включении AIO и <a href=\"#sendfile\">sendfile</a> в Linux\nдля файлов, размер которых больше либо равен указанному\nв директиве <a href=\"#directio\">directio</a>, будет использоваться AIO,\nа для файлов меньшего размера\nили при выключенном <a href=\"#directio\">directio</a> — <a href=\"#sendfile\">sendfile</a>:\n</p> <blockquote class=\"example\"><pre>\nlocation /video/ {\n    sendfile       on;\n    aio            on;\n    directio       8m;\n}\n</pre></blockquote><p> \n</p><p>\nКроме того, читать и <a href=\"#sendfile\">отправлять</a>\nфайлы можно в многопоточном режиме (1.7.11),\nне блокируя при этом рабочий процесс:\n</p> <blockquote class=\"example\"><pre>\nlocation /video/ {\n    sendfile       on;\n    aio            threads;\n}\n</pre></blockquote><p> \nОперации чтения или отправки файлов будут обрабатываться потоками из указанного\n<a href=\"../ngx_core_module.html#thread_pool\">пула</a>.\nЕсли пул потоков не задан явно,\nиспользуется пул с именем “<code>default</code>”.\nИмя пула может быть задано при помощи переменных:\n</p> <blockquote class=\"example\"><pre>\naio threads=pool$disk;\n</pre></blockquote><p> \nПо умолчанию поддержка многопоточности выключена, её сборку следует\nразрешить с помощью конфигурационного параметра\n<code>--with-threads</code>.\nВ настоящий момент многопоточность совместима только с методами\n<a href=\"../events.html#epoll\">epoll</a>,\n<a href=\"../events.html#kqueue\">kqueue</a>\nи\n<a href=\"../events.html#eventport\">eventport</a>.\nОтправка файлов в многопоточном режиме поддерживается только на Linux.\n</p><p>\nСм. также директиву <a href=\"#sendfile\">sendfile</a>.\n</p>"},{"directive":"addition_types","defaultValue":"addition_types text/html;","syntax":"addition_types mime-тип ...;","context":"http, server, location","description":"<p>Эта директива появилась в версии 0.7.9.\n            </p></div><p>\nРазрешает добавлять текст в ответах с указанными MIME-типами\nв дополнение к “<code>text/html</code>”.\nСпециальное значение “<code>*</code>” соответствует любому MIME-типу\n(0.8.29).\n</p>"},{"directive":"add_trailer","defaultValue":"—","syntax":"add_trailer имя значение[always];","context":"http, server, location, if в location","description":"<p>Эта директива появилась в версии 1.13.2.\n            </p></div><p>\nДобавляет указанное поле в конец ответа при условии, что код ответа\nравен 200, 201, 206, 301, 302, 303, 307 или 308.\nВ значении можно использовать переменные.\n</p><p>\nДиректив <code>add_trailer</code> может быть несколько.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <code>add_trailer</code>.\n</p><p>\nЕсли указан параметр <code>always</code>,\nто указанное поле будет добавлено независимо от кода ответа.\n</p>"},{"directive":"add_header","defaultValue":"—","syntax":"add_header имя значение[always];","context":"http, server, location, if в location","description":"<p>\nДобавляет указанное поле в заголовок ответа при условии, что код ответа\nравен 200, 201, 204, 206, 301, 302, 303, 304, 307 или 308.\nВ значении можно использовать переменные.\n</p><p>\nДиректив <code>add_header</code> может быть несколько.\nДирективы наследуются с предыдущего уровня при условии, что на данном\nуровне не описаны свои директивы <code>add_header</code>.\n</p><p>\nЕсли указан параметр <code>always</code> (1.7.5),\nто поле заголовка будет добавлено независимо от кода ответа.\n</p>"},{"directive":"add_before_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"add_after_body","defaultValue":"","syntax":"","context":"","description":null},{"directive":"access_log","defaultValue":"access_log off;","syntax":"access_log     путь    формат    [buffer=размер]    [gzip[=степень]]    [flush=время]    [if=условие];access_log off;","context":"stream, server","description":"<p>\nЗадаёт путь, <a href=\"#log_format\">формат</a>\nи настройки буферизованной записи в лог.\nНа одном уровне может использоваться несколько логов.\nЗапись в <a href=\"../syslog.html\">syslog</a>\nнастраивается указанием префикса\n“<code>syslog:</code>” в первом параметре.\nСпециальное значение <code>off</code> отменяет все директивы\n<code>access_log</code> для текущего уровня.\n</p><p>\nЕсли задан размер буфера с помощью параметра <code>buffer</code> или\nуказан параметр <code>gzip</code>, то запись будет\nбуферизованной.\n</p> <blockquote class=\"note\">\nРазмер буфера должен быть не больше размера атомарной записи в дисковый файл.\nДля FreeBSD этот размер неограничен.\n</blockquote><p> \n</p><p>\nПри включённой буферизации данные записываются в файл:\n</p> <ul class=\"compact\">\n\n<li>\nесли очередная строка лога не помещается в буфер;\n</li>\n\n<li>\nесли данные в буфере находятся дольше интервала времени, заданного\nпараметром <code>flush</code>;\n</li>\n\n<li>\nпри <a href=\"../control.html\">переоткрытии</a> лог-файла или\nзавершении рабочего процесса.\n</li>\n\n</ul><p> \n</p><p>\nЕсли задан параметр <code>gzip</code>, то буфер будет сжиматься перед\nзаписью в файл.\nСтепень сжатия может быть задана в диапазоне от 1 (быстрее, но хуже сжатие)\nдо 9 (медленнее, но лучше сжатие).\nПо умолчанию используются буфер размером 64К байт и степень сжатия 1.\nДанные сжимаются атомарными блоками, и в любой момент времени лог-файл может\nбыть распакован или прочитан с помощью утилиты “<code>zcat</code>”.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\naccess_log /path/to/log.gz basic gzip flush=5m;\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nДля поддержки gzip-сжатия логов nginx должен быть собран с библиотекой zlib.\n</blockquote><p> \n</p><p>\nВ пути файла можно использовать переменные,\nно такие логи имеют некоторые ограничения:\n</p> <ul class=\"compact\">\n\n<li>\n<a href=\"../ngx_core_module.html#user\">пользователь</a>,\nс правами которого работают рабочие процессы, должен\nиметь права на создание файлов в каталоге с такими логами;\n</li>\n\n<li>\nне работает буферизация;\n</li>\n\n<li>\nфайл открывается для каждой записи в лог и сразу же после записи закрывается.\nСледует однако иметь в виду, что поскольку дескрипторы часто используемых файлов\nмогут храниться в <a href=\"#open_log_file_cache\">кэше</a>,\nто при вращении логов в течение времени, заданного параметром\n<code>valid</code> директивы <a href=\"#open_log_file_cache\">open_log_file_cache</a>,\nзапись может продолжаться в старый файл.\n</li>\n\n</ul><p> \n</p><p>\nПараметр <code>if</code> включает условную запись в лог.\nСессия не будет записываться в лог, если результатом вычисления\n<code><i>условия</i></code> является “0” или пустая строка.\n</p>"},{"directive":"access_log","defaultValue":"access_log logs/access.log combined;","syntax":"access_log     путь    [формат    [buffer=размер]    [gzip[=степень]]    [flush=время]    [if=условие]];access_log off;","context":"http, server, location, if в location, limit_except","description":"<p>\nЗадаёт путь, формат и настройки буферизованной записи в лог.\nНа одном уровне может использоваться несколько логов.\nЗапись в <a href=\"../syslog.html\">syslog</a>\nнастраивается указанием префикса\n“<code>syslog:</code>” в первом параметре.\nСпециальное значение <code>off</code> отменяет все директивы\n<code>access_log</code> для текущего уровня.\nЕсли формат не указан, то используется предопределённый формат\n“<code>combined</code>”.\n</p><p>\nЕсли задан размер буфера с помощью параметра <code>buffer</code> или\nуказан параметр <code>gzip</code> (1.3.10, 1.2.7), то запись будет\nбуферизованной.\n</p> <blockquote class=\"note\">\nРазмер буфера должен быть не больше размера атомарной записи в дисковый файл.\nДля FreeBSD этот размер неограничен.\n</blockquote><p> \n</p><p>\nПри включённой буферизации данные записываются в файл:\n</p> <ul class=\"compact\">\n\n<li>\nесли очередная строка лога не помещается в буфер;\n</li>\n\n<li>\nесли данные в буфере находятся дольше интервала времени, заданного\nпараметром <code>flush</code> (1.3.10, 1.2.7);\n</li>\n\n<li>\nпри <a href=\"../control.html\">переоткрытии</a> лог-файла или\nзавершении рабочего процесса.\n</li>\n\n</ul><p> \n</p><p>\nЕсли задан параметр <code>gzip</code>, то буфер будет сжиматься перед\nзаписью в файл.\nСтепень сжатия может быть задана в диапазоне от 1 (быстрее, но хуже сжатие)\nдо 9 (медленнее, но лучше сжатие).\nПо умолчанию используются буфер размером 64К байт и степень сжатия 1.\nДанные сжимаются атомарными блоками, и в любой момент времени лог-файл может\nбыть распакован или прочитан с помощью утилиты “<code>zcat</code>”.\n</p><p>\nПример:\n</p> <blockquote class=\"example\"><pre>\naccess_log /path/to/log.gz combined gzip flush=5m;\n</pre></blockquote><p> \n</p><p>\n</p> <blockquote class=\"note\">\nДля поддержки gzip-сжатия логов nginx должен быть собран с библиотекой zlib.\n</blockquote><p> \n</p><p>\nВ пути файла можно использовать переменные (0.7.6+),\nно такие логи имеют некоторые ограничения:\n</p> <ul class=\"compact\">\n\n<li>\n<a href=\"../ngx_core_module.html#user\">пользователь</a>,\nс правами которого работают рабочие процессы, должен\nиметь права на создание файлов в каталоге с такими логами;\n</li>\n\n<li>\nне работает буферизация;\n</li>\n\n<li>\nфайл открывается для каждой записи в лог и сразу же после записи закрывается.\nСледует однако иметь в виду, что поскольку дескрипторы часто используемых файлов\nмогут храниться в <a href=\"#open_log_file_cache\">кэше</a>,\nто при вращении логов в течение времени, заданного параметром\n<code>valid</code> директивы <a href=\"#open_log_file_cache\">open_log_file_cache</a>,\nзапись может продолжаться в старый файл.\n</li>\n\n<li>\nпри каждой записи в лог проверяется существование\n<a href=\"ngx_http_core_module.html#root\">корневого каталога</a>\nдля запроса — если этот каталог не существует, то лог не создаётся.\nПоэтому <a href=\"ngx_http_core_module.html#root\">root</a>\nи <code>access_log</code> нужно описывать на одном уровне:\n<blockquote class=\"example\"><pre>\nserver {\n    root       /spool/vhost/data/$host;\n    access_log /spool/vhost/logs/$host;\n    ...\n</pre></blockquote>\n</li>\n\n</ul><p> \n</p><p>\nПараметр <code>if</code> (1.7.0) включает условную запись в лог.\nЗапрос не будет записываться в лог, если результатом вычисления\n<code><i>условия</i></code> является “0” или пустая строка.\nВ следующем примере запросы с кодами ответа 2xx и 3xx\nне будут записываться в лог:\n</p> <blockquote class=\"example\"><pre>\nmap $status $loggable {\n    ~^[23]  0;\n    default 1;\n}\n\naccess_log /path/to/access.log combined if=$loggable;\n</pre></blockquote><p> \n</p>"},{"directive":"accept_mutex_delay","defaultValue":"accept_mutex_delay 500ms;","syntax":"accept_mutex_delay время;","context":"events","description":"<p>\nПри включённом <a href=\"#accept_mutex\">accept_mutex</a> задаёт максимальное время,\nв течение которого рабочий процесс вновь попытается начать принимать\nновые соединения, если в настоящий момент новые соединения принимает\nдругой рабочий процесс.\n</p>"},{"directive":"accept_mutex","defaultValue":"accept_mutex off;","syntax":"accept_mutex on | off;","context":"events","description":"<p>\nЕсли <code>accept_mutex</code> включён,\nрабочие процессы будут принимать новые соединения по очереди.\nВ противном случае о новых соединениях будет сообщаться сразу всем рабочим\nпроцессам, и при низкой интенсивности поступления новых соединений\nчасть рабочих процессов может работать вхолостую.\n</p> <blockquote class=\"note\">\nНет необходимости включать <code>accept_mutex</code>\nна системах, поддерживающих\nфлаг <a href=\"events.html#epoll\">EPOLLEXCLUSIVE</a> (1.11.3), или\nпри использовании <a href=\"http/ngx_http_core_module.html#reuseport\">reuseport</a>.\n</blockquote><p> \n</p> <blockquote class=\"note\">\nДо версии 1.11.3 по умолчанию использовалось значение <code>on</code>.\n</blockquote><p> \n</p>"},{"directive":"absolute_redirect","defaultValue":"absolute_redirect on;","syntax":"absolute_redirect on | off;","context":"http, server, location","description":"<p>Эта директива появилась в версии 1.11.8.\n            </p></div><p>\nЕсли запрещено, то перенаправления, выдаваемые nginx’ом, будут относительными.\n</p><p>\nСм. также директивы <a href=\"#server_name_in_redirect\">server_name_in_redirect</a>\nи <a href=\"#port_in_redirect\">port_in_redirect</a>.\n</p>"}]