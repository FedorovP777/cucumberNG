[
  {
    "name": "upsttream",
    "content": "upstream backend {\n  server ya.ru;\n  server google.com;\n\n}\n\n#location \/ {\n#        proxy_pass http:\/\/backend;\n#    }"
  },
  {
    "name": "Laravel",
    "content": "worker_processes  2;\n\npid \/var\/run\/nginx.pid;\n\n#                          [ debug | info | notice | warn | error | crit ]\n\nerror_log  \/var\/log\/nginx.error_log  info;\n\nevents {\n    worker_connections   2000;\n\n    # use [ kqueue | epoll | \/dev\/poll | select | poll ];\n    use kqueue;\n}\n\nhttp {\n\n    include       conf\/mime.types;\n    default_type  application\/octet-stream;\n\n\n    log_format main      '$remote_addr - $remote_user [$time_local] '\n                         '\"$request\" $status $bytes_sent '\n                         '\"$http_referer\" \"$http_user_agent\" '\n                         '\"$gzip_ratio\"';\n\n    log_format download  '$remote_addr - $remote_user [$time_local] '\n                         '\"$request\" $status $bytes_sent '\n                         '\"$http_referer\" \"$http_user_agent\" '\n                         '\"$http_range\" \"$sent_http_content_range\"';\n\n    client_header_timeout  3m;\n    client_body_timeout    3m;\n    send_timeout           3m;\n\n    client_header_buffer_size    1k;\n    large_client_header_buffers  4 4k;\n\n    gzip on;\n    gzip_min_length  1100;\n    gzip_buffers     4 8k;\n    gzip_types       text\/plain;\n\n    output_buffers   1 32k;\n    postpone_output  1460;\n\n    sendfile         on;\n    tcp_nopush       on;\n    tcp_nodelay      on;\n    send_lowat       12000;\n\n    keepalive_timeout  75 20;\n\n    #lingering_time     30;\n    #lingering_timeout  10;\n    #reset_timedout_connection  on;\n\n\n    server {\n        listen        one.example.com;\n        server_name   one.example.com  www.one.example.com;\n\n        access_log   \/var\/log\/nginx.access_log  main;\n\n        location \/ {\n            proxy_pass         http:\/\/127.0.0.1\/;\n            proxy_redirect     off;\n\n            proxy_set_header   Host             $host;\n            proxy_set_header   X-Real-IP        $remote_addr;\n            #proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;\n\n            client_max_body_size       10m;\n            client_body_buffer_size    128k;\n\n            client_body_temp_path      \/var\/nginx\/client_body_temp;\n\n            proxy_connect_timeout      70;\n            proxy_send_timeout         90;\n            proxy_read_timeout         90;\n            proxy_send_lowat           12000;\n\n            proxy_buffer_size          4k;\n            proxy_buffers              4 32k;\n            proxy_busy_buffers_size    64k;\n            proxy_temp_file_write_size 64k;\n\n            proxy_temp_path            \/var\/nginx\/proxy_temp;\n\n            charset  koi8-r;\n        }\n\n        error_page  404  \/404.html;\n\n        location \/404.html {\n            root  \/spool\/www;\n        }\n\n        location \/old_stuff\/ {\n            rewrite   ^\/old_stuff\/(.*)$  \/new_stuff\/$1  permanent;\n        }\n\n        location \/download\/ {\n\n            valid_referers  none  blocked  server_names  *.example.com;\n\n            if ($invalid_referer) {\n                #rewrite   ^\/   http:\/\/www.example.com\/;\n                return   403;\n            }\n\n            #rewrite_log  on;\n\n            # rewrite \/download\/*\/mp3\/*.any_ext to \/download\/*\/mp3\/*.mp3\n            rewrite ^\/(download\/.*)\/mp3\/(.*)\\..*$\n                    \/$1\/mp3\/$2.mp3                   break;\n\n            root         \/spool\/www;\n            #autoindex    on;\n            access_log   \/var\/log\/nginx-download.access_log  download;\n        }\n\n        location ~* \\.(jpg|jpeg|gif)$ {\n            root         \/spool\/www;\n            access_log   off;\n            expires      30d;\n        }\n    }\n}"
  },
  {
    "name": "proxy pass",
    "content": "location ^~ \/path {\n\n\n                rewrite ^\/path(\/.*)$ \/$1 break;\n                proxy_pass_header Cookie;\n                proxy_pass_header Set-Cookie;\n                proxy_pass http:\/\/domain.net:80\/;\n                proxy_set_header Host domain.net;\n                #proxy_cookie_domain mydomain  $host;\n                #sub_filter \"mydomain\"  $host;\n\n\n        }"
  },
  {
    "name": "Laravel(ssl)",
    "content": "server {\n\tlisten 80;\n\n\troot \/var\/www\/domainname\/public;\n\tindex index.html index.htm index.php;\n\tclient_max_body_size 32m;\n\tserver_name domainname.net;\n\tgzip on;\n\tgzip_disable \"msie6\";\n\tgzip_types text\/plain text\/css application\/json application\/x-javascript text\/xml application\/xml application\/xml+rss text\/javascript application\/javascript;\n\n\tgzip_comp_level 5;\n\taccess_log  \/var\/log\/domainname_access.log;\n\terror_log   \/var\/log\/domainname_error.log;\n\tdav_methods  PUT;\t\n\tadd_header Cache-Control \"no-cache, max-age=0\";                                       \n\tlocation \/ {\n\t\ttry_files $uri $uri\/ \/index.php?$query_string;\n\t}\n\n\tlocation ~ \\.php$ {\n\t\ttry_files $uri =404;\n\t\tfastcgi_split_path_info ^(.+\\.php)(\/.+)$;\n# NOTE: You should have \"cgi.fix_pathinfo = 0;\" in php.ini\n\n# With php5-cgi alone:\n\t\tfastcgi_pass 127.0.0.1:9000;\n# With php5-fpm:\n#fastcgi_pass unix:\/var\/run\/php5-fpm.sock;\n\t\tfastcgi_index index.php;\n\t\tinclude fastcgi_params;\n\t}\n}\n\n\n\n\nserver {\n\tlisten 443;\n\tserver_name domainname.net;\n\n\troot \/var\/www\/domainname\/public\/;\n\tindex index.php;\n\n\tssl on;\n\tssl_certificate \/etc\/nginx\/ssl\/domainname.crt;\n\tssl_certificate_key \/etc\/nginx\/ssl\/domainname.key;\n\n\tssl_session_timeout 5m;\n\n\tclient_max_body_size 20m;\n\taccess_log  \/var\/log\/domainname_access.log;\n\terror_log   \/var\/log\/domainname_error.log;\n\n\tssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;\n\tssl_ciphers \"HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES\";\n\tssl_prefer_server_ciphers on;\n\n\tlocation \/ {\n\t\ttry_files $uri $uri\/ =404;\n\t}\n\n\tlocation @rewrite {\n\n\t\trewrite ^\/(.*)$ \/index.php;\n\t}\n\n\tlocation ~ \\.php$ {\n\t\tfastcgi_split_path_info ^(.+\\.php)(\/.+)$;\n# NOTE: You should have \"cgi.fix_pathinfo = 0;\" in php.ini\n#index index.php\n# With php5-cgi alone:\n\t\tfastcgi_pass 127.0.0.1:9000;\n# With php5-fpm:\n#fastcgi_pass unix:\/var\/run\/php5-fpm.sock;\n\t\tfastcgi_index index.php;\n\t\tinclude fastcgi_params;\n#       fastcgi_index index.php;\n\t\ttry_files $uri @rewrite;\n\t}\n}"
  },
  {
    "name": "nginx status page",
    "content": "server {\n        listen 80;\n\n\tclient_max_body_size 32m;\n        server_name status.local;\n\nlocation \/ {\n\t\tstub_status on;\n\t\taccess_log off;\n\t\tallow 127.0.0.1;\n\t\tdeny all;\n\t}\n\n}"
  },
  {
    "name": "fastcgi params php7-fpm",
    "content": "fastcgi_param  SCRIPT_FILENAME\t  $document_root$fastcgi_script_name;"
  },
  {
    "name": "nginx.conf",
    "content": "user www-data;\nworker_processes 4;\npid \/run\/nginx.pid;\n\nevents {\n\tworker_connections 768;\n\t# multi_accept on;\n}\n\nhttp {\n\n\t##\n\t# Basic Settings\n\t##\nclient_max_body_size 100m;\n\tsendfile on;\n\ttcp_nopush on;\n\ttcp_nodelay on;\n\tkeepalive_timeout 65;\n\ttypes_hash_max_size 2048;\n\t# server_tokens off;\n\n\t# server_names_hash_bucket_size 64;\n\t# server_name_in_redirect off;\n\n\tinclude \/etc\/nginx\/mime.types;\n\tdefault_type application\/octet-stream;\n\n\t##\n\t# Logging Settings\n\t##\n\n\taccess_log \/var\/log\/nginx\/access.log;\n\terror_log \/var\/log\/nginx\/error.log;\n\n\t##\n\t# Gzip Settings\n\t##\n\n\tgzip on;\n\tgzip_disable \"msie6\";\n\tgzip_comp_level 4;\n\t# gzip_vary on;\n\t# gzip_proxied any;\n\t# gzip_comp_level 6;\n\t# gzip_buffers 16 8k;\n\t# gzip_http_version 1.1;\n\t# gzip_types text\/plain text\/css application\/json application\/x-javascript text\/xml application\/xml application\/xml+rss text\/javascript;\n\n\t##\n\t# nginx-naxsi config\n\t##\n\t# Uncomment it if you installed nginx-naxsi\n\t##\n\n\t#include \/etc\/nginx\/naxsi_core.rules;\n\n\t##\n\t# nginx-passenger config\n\t##\n\t# Uncomment it if you installed nginx-passenger\n\t##\n\t\n\t#passenger_root \/usr;\n\t#passenger_ruby \/usr\/bin\/ruby;\n\n\t##\n\t# Virtual Host Configs\n\t##\n\n\tinclude \/etc\/nginx\/conf.d\/*.conf;\n\tinclude \/etc\/nginx\/sites-enabled\/*;\n}"
  }
]