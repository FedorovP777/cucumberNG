[{"name":"upsttream","content":"upstream backend {\n  server ya.ru;\n  server google.com;\n\n}\n\n#location \/ {\n#        proxy_pass http:\/\/backend;\n#    }"},{"name":"Laravel","content":"worker_processes  2;\n\npid \/var\/run\/nginx.pid;\n\n#                          [ debug | info | notice | warn | error | crit ]\n\nerror_log  \/var\/log\/nginx.error_log  info;\n\nevents {\n    worker_connections   2000;\n\n    # use [ kqueue | epoll | \/dev\/poll | select | poll ];\n    use kqueue;\n}\n\nhttp {\n\n    include       conf\/mime.types;\n    default_type  application\/octet-stream;\n\n\n    log_format main      '$remote_addr - $remote_user [$time_local] '\n                         '\"$request\" $status $bytes_sent '\n                         '\"$http_referer\" \"$http_user_agent\" '\n                         '\"$gzip_ratio\"';\n\n    log_format download  '$remote_addr - $remote_user [$time_local] '\n                         '\"$request\" $status $bytes_sent '\n                         '\"$http_referer\" \"$http_user_agent\" '\n                         '\"$http_range\" \"$sent_http_content_range\"';\n\n    client_header_timeout  3m;\n    client_body_timeout    3m;\n    send_timeout           3m;\n\n    client_header_buffer_size    1k;\n    large_client_header_buffers  4 4k;\n\n    gzip on;\n    gzip_min_length  1100;\n    gzip_buffers     4 8k;\n    gzip_types       text\/plain;\n\n    output_buffers   1 32k;\n    postpone_output  1460;\n\n    sendfile         on;\n    tcp_nopush       on;\n    tcp_nodelay      on;\n    send_lowat       12000;\n\n    keepalive_timeout  75 20;\n\n    #lingering_time     30;\n    #lingering_timeout  10;\n    #reset_timedout_connection  on;\n\n\n    server {\n        listen        one.example.com;\n        server_name   one.example.com  www.one.example.com;\n\n        access_log   \/var\/log\/nginx.access_log  main;\n\n        location \/ {\n            proxy_pass         http:\/\/127.0.0.1\/;\n            proxy_redirect     off;\n\n            proxy_set_header   Host             $host;\n            proxy_set_header   X-Real-IP        $remote_addr;\n            #proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;\n\n            client_max_body_size       10m;\n            client_body_buffer_size    128k;\n\n            client_body_temp_path      \/var\/nginx\/client_body_temp;\n\n            proxy_connect_timeout      70;\n            proxy_send_timeout         90;\n            proxy_read_timeout         90;\n            proxy_send_lowat           12000;\n\n            proxy_buffer_size          4k;\n            proxy_buffers              4 32k;\n            proxy_busy_buffers_size    64k;\n            proxy_temp_file_write_size 64k;\n\n            proxy_temp_path            \/var\/nginx\/proxy_temp;\n\n            charset  koi8-r;\n        }\n\n        error_page  404  \/404.html;\n\n        location \/404.html {\n            root  \/spool\/www;\n        }\n\n        location \/old_stuff\/ {\n            rewrite   ^\/old_stuff\/(.*)$  \/new_stuff\/$1  permanent;\n        }\n\n        location \/download\/ {\n\n            valid_referers  none  blocked  server_names  *.example.com;\n\n            if ($invalid_referer) {\n                #rewrite   ^\/   http:\/\/www.example.com\/;\n                return   403;\n            }\n\n            #rewrite_log  on;\n\n            # rewrite \/download\/*\/mp3\/*.any_ext to \/download\/*\/mp3\/*.mp3\n            rewrite ^\/(download\/.*)\/mp3\/(.*)\\..*$\n                    \/$1\/mp3\/$2.mp3                   break;\n\n            root         \/spool\/www;\n            #autoindex    on;\n            access_log   \/var\/log\/nginx-download.access_log  download;\n        }\n\n        location ~* \\.(jpg|jpeg|gif)$ {\n            root         \/spool\/www;\n            access_log   off;\n            expires      30d;\n        }\n    }\n}"},{"name":null,"content":null},{"name":null,"content":null},{"name":null,"content":null},{"name":null,"content":null},{"name":null,"content":null},{"name":null,"content":null}]